<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"大数据技术与架构","title":"Apache Doris 2.1.0 版本发布，复杂查询性能提升 100%！","time":"2024-03-18 17:52:52","timeStamp":"1710755572"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&mid=2247521510&idx=1&sn=46cede5f6308375e61cf80bab8588ae2&chksm=fd3ed273ca495b65b8dac7f64de864a3a2f5f9eb7dd610ce58a5874ddd23bb00bc8ba3ce746c#rd" target="_blank">Apache Doris 2.1.0 版本发布，复杂查询性能提升 100%！</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_text">Apache Doris&nbsp;&nbsp;</span><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">大数据技术与架构&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2024-03-18 17:52:52</em></div><content><div class="reprint"><p>转自公众号：SelectDB<br><a href="http://mp.weixin.qq.com/s?__biz=Mzg3Njc2NDAwOA==&mid=2247528547&idx=1&sn=b3f7457006e38f402a44b0bda58c5419" target="_blank" title="阅读原文">http://mp.weixin.qq.com/s?__biz=Mzg3Njc2NDAwOA==&mid=2247528547&idx=1&sn=b3f7457006e38f402a44b0bda58c5419</a></p></div><section style="text-align: left;line-height: 1.75em;" data-mpa-powered-by="yiban.io"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;text-align: justify;">亲爱的社区小伙伴们，我们很高兴地向大家宣布，</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;text-align: justify;color: rgb(0, 101, 253);"><strong>在 3 月 8 日我们迎来了 Apache Doris 2.1.0 版本的正式发布</strong></span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;text-align: justify;">，欢迎大家下载使用。</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;text-align: justify;"></span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在查询性能方面， 2.1 系列版本我们着重提升了开箱盲测性能，力争不做调优的情况下取得较好的性能表现，包含了对复杂 SQL 查询性能的进一步提升，在 TPC-DS 1TB 测试数据集上获得超过 100% 的性能提升，查询性能居于业界领先地位。</span></p></li><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在数据湖分析场景，我们进行了大量性能方面的改进、相对于 Trino 和 Spark 分别有 4-6 倍的性能提升，并引入了多 SQL 方言兼容、便于用户可以从原有系统无缝切换至 Apache Doris。在面向数据科学以及其他形式的大规模数据读取场景，我们引入了基于 Arrow Flight 的高速读取接口，数据传输效率提升 100 倍。</span></p></li><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在半结构化数据分析场景，我们引入了全新的 Variant 和 IP 数据类型，完善了一系列分析函数，面向复杂半结构化数据的存储和分析处理更加得心应手。</span></p></li><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 2.1.0 版本中我们也引入了基于多表的异步物化视图以提升查询性能，支持透明改写加速、自动刷新、外表到内表的物化视图以及物化视图直查，基于这一能力物化视图也可用于数据仓库分层建模、作业调度和数据加工。</span></p></li><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在存储方面，我们引入了自增列、自动分区、MemTable 前移以及服务端攒批的能力，使得大规模数据实时写入的效率更高。</span></p></li><li><p style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 0px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在负载管理方面，我们进一步完善了 Workload Group 资源组的隔离能力，并增加了运行时查看 SQL 资源用量的能力，进一步提升了多负载场景下的稳定性。</span></p></li></ul><p style="line-height: 1.6em;text-align: justify;margin: 0px 0px 16px;text-indent: 0em;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: var(--articleFontsize);letter-spacing: 0.034em;color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">在 2.1.0 版本的研发过程中，有 237 位贡献者为 Apache Doris 带来了接近 6000 个 Commits。</span></strong></span><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">同时 2.1.0 版本也同样经过了近百家社区用户的大规模打磨，在测试过程中向我们反馈了许多有价值的优化项，在此向所有参与版本研发、测试和需求反馈的贡献者们表示最衷心的感谢。后续我们将会持续敏捷发版来响应所有用户对功能和稳定性的更高追求，欢迎大家在使用过程中给予我们更多反馈。</span></p><p style="line-height: 1.6em;text-align: justify;margin: 0px 0px 16px;text-indent: 0em;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);"><br  /></span></p><section><section style="text-align: right;justify-content: flex-end;margin: 10px 0% -93px;display: flex;flex-flow: row;" powered-by="xiumi.us"><section style="display: inline-block;vertical-align: top;width: 3%;flex: 0 0 auto;height: auto;align-self: flex-start;"><section style="transform: rotateZ(311deg);" powered-by="xiumi.us"><section style="margin-top: 0.5em;margin-bottom: 0.5em;text-align: left;transform: translate3d(-12px, 0px, 0px);"><section style="height: 1px;background-color: rgb(0, 82, 206);"><br  /><svg viewbox="0 0 1 1" style="float:left;line-height:0;width:0;vertical-align:top;"></svg></section></section></section></section></section></section><section style="text-align: justify;margin: 48px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">复杂查询性能提升 100%，TPC-DS 业界领先</span></strong><strong style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space-collapse: preserve;font-size: 16px;color: rgb(42, 100, 246);letter-spacing: 0.034em;"></strong></section><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><p style="text-align: justify;margin: 24px 0px;text-indent: 0em;line-height: 1.6em;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">在 2.1 系列版本中，我们着重提升了开箱盲测性能，力争不做调优的情况下取得较好的性能表现，包含了对复杂 SQL 查询性能的进一步提升</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;">。在此我们以 TPC-DS 1TB 作为性能测试对比的基准，重点对比最新 2.1.0 版本与 2.0.5 版本的性能提升。集群规模均为 1FE、3BE，其中 BE 节点的服务器配置为 48C 192G。从以下测试结果中可以看到：</span></p><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">2.1.0 版本的总查询耗时为 245.7 秒，相较于 2.0.5 版本的 489.6 秒，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>性能提升达到 100 %</strong></span>；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在全部 99 个 SQL 中，有近三分之一的 SQL 查询性能提升达到 2 倍以上，超过 80 个 SQL 都获得显著性能提升；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">不论是基础的过滤、排序、聚合，或者复杂的多表关联查询、子查询以及窗口函数计算，2.1.0 版本都有更为明显的性能优势；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">2.0.5 版本或 2.1.0 版本，都可以完整执行 TPC-DS 的 99 个查询。</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="726" data-imgfileid="100037842" data-ratio="0.5277777777777778" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/1_TAyU2JOKG3KJaDeC8XLCVFZ90fEprw.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3j6QgMCmq0LTt0WDYFBPwfCt4TAyU2JOKG3KJaDeC8XLCVFZ90fEprw/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1375"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">以上详细测试结果我们将在后续提交到 Apache Doris 官网文档中，也欢迎所有用户在完成最新版本的部署后进行测试复现。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">与此同时，我们也对业内多个 OLAP 系统在同等硬件资源和多个测试数据规模下进行了性能测试，不论大宽表场景或多表关联场景，Apache Doris 都具备着极为明显的性能优势。毫无疑问，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>Apache Doris 已在业界同类产品中性能居于最领先地位</strong></span>！</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">01&nbsp; 优化器更智能</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.0 版本中我们引入了全新查询优化器，在绝大多数场景无需任何调优即可实现极致的查询性能。而在最新发布的 Apache Doris 2.1 版本中，查询优化器在整体代际更新的基础上，进行了优化规则的扩展和枚举框架的完善，面向复杂分析场景更加得心应手：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">优化器基础设施完善：在多种优化器基础设施方面进行了补充和增强，例如对统计信息推导和代价模型方面的持续改进，使之能够收集更多的特征信息为复杂优化提供基础；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">优化规则持续扩展：得益于丰富的实际场景反馈，新版本中查询优化器增强了包括算子下压在内的许多经典规则，结合上述基础设施扩充而引入的新优化规则，使得新版本的查询优化器能覆盖更广泛的使用场景；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">枚举框架进一步优化：在查询优化器 Cascades 和 DPhyper 两大融合框架的基础上，继续深耕框架能力、优化框架性能，确立了更为清晰的枚举策略，兼顾计划质量和枚举效率，为高性能引擎提供坚实基础。例如将 Cascades 默认枚举表上限从 5 提升到了 8、有效扩大了高质量计划的覆盖范围，同时进一步优化 DPhyper 枚举效率、使之能够枚举出更优计划。</span></section></li></ul><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">02&nbsp; 无统计信息优化</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">针对海量数据规模以及数据湖分析场景下，针对统计信息收集难度高、收集时间久的问题，在 2.1 版本中查询优化器利用多种启发式技术，大大提升了<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>无统计信息场景下</strong></span>的计划质量，使得在没有统计信息的场景下也可获得较好的查询计划。同时扩展了 Runtime Filter 的下压场景和自适应能力，在执行过程中能够自适应地动态调整部分表达式谓词，使得 Apache Doris 在不依赖统计信息的情况下也具有优异的性能表现。</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">03&nbsp; Parallel Adaptive Scan 并行自适应扫描</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在复杂数据分析场景下，每次查询都需要扫描大量的数据进行计算，因此 IO 瓶颈很大程度上决定了查询性能的上限。为了提升 Scan IO 的性能，Apache Doris 采取了并行读取的技术，每个扫描线程读取 1 个或者多个 Tablet（即用户建表时指定的 Bucket），但如若用户建表时指定的Bucket 数目不合理、那么磁盘扫描线程就无法并行工作，直接影响查询性能。为此，在 2.1 版本中我们引入了 Tablet 内的并行扫描技术，可以将多个 Tablet 进行池化，在磁盘扫描端可以根据行数来拆分多个线程并行扫描（最多支持 48 个线程），从而有效避免分桶数不合理导致的查询性能问题。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="538" data-imgfileid="100037846" data-ratio="0.3314814814814815" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/2_2Yk7YcxMagaIA1pRCs7vgMuc1FRibA.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3ibiblRWDF2iaxGfzo0Ecs4e1fmJR2Yk7YcxMagaIA1pRCs7vgMuc1FRibA/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1622"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">因此在 2.1 版本以后，我们建议用户<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>在建表时设置的分桶数=整个集群磁盘的数量</strong></span>，在 IO 层面能将整个集群所有的 IO 资源全部利用起来。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">注：当前 2.1.0 版本的 Parallel Adaptive Scan 只能针对 Unqiue Key 模型的 Merge-on-Write 表以及 Duplicate Key 模型生效， 预计在 2.1.1 版本中会增加对 Unique Key 模型 Merge-on-Read 表和 Aggregate Key 模型的支持。</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">04&nbsp; Local Shuffle</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在部分场景下，数据分布不均会导致多个 Instance 的查询执行出现长尾。而为了解决单个 BE 节点上多个 Instance 之间的数据倾斜问题，在Apache Doris 2.1 版本中我们引入了 Local Shuffle 技术，尽可能将数据打散从而加速查询。例如在某一典型的聚合查询中，数据在经过聚合之前将会通过一个 Local Shuffle 节点被均匀分布在不同的 Pipeline Task 中，如下图所示：</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="1280" data-imgfileid="100037844" data-ratio="1.049074074074074" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/3_qgnje2WnRjrOiajF0SSShUHHyaLicA.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3A6ONwRibhoCqJnL02kZIic4wfCiaXqgnje2WnRjrOiajF0SSShUHHyaLicA/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1220"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在具备了 Parallel Adaptive Scan 和 Local Shuffle 能力之后，Apache Doris 能够规避由于分桶数不合理、数据分布不均带来的性能问题。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在此我们分别使用 Clickbench（大宽表场景）和 TPC-H（多表 Join 的复杂分析场景） 数据集模拟建表分桶不合理的情况，在 Clickbench 数据集中我们建表 Bucket 数量分别设为 1 和 16 ，在 TPC-H 100G 数据集下我们建表时每个 Partition 的 Bucket 数目分别设为 1 和 16。在开启 Parallel Adaptive Scan 和 Local Shuffle 之后，整体查询性能表现比较平稳，即使不合理的数据分布也能取得优异的性能表现。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="838" data-imgfileid="100037849" data-ratio="0.549074074074074" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/4_cn5YibW6ib6PHuBIrcacoOWrrh9Few.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3lfr5bjLvDqpTcdqpujAAkXLg2picn5YibW6ib6PHuBIrcacoOWrrh9Few/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1526"  /></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档<span style="font-size: 14px;color: rgb(0, 0, 0);">：</span>https://doris.apache.org/zh-CN/docs/query-acceleration/pipeline-x-execution-engine</span></p></blockquote><h2 style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">ARM 架构深度适配，性能提升 230%</span></strong></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><section style="margin-top: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">在 Apache Doris 2.1 版本中我们针对 ARM 架构进行了深度的适配和指令集优化，可以在 ARM 架构上充分发挥 Apache Doris 的性能优势。相较于 2.0 版本，2.1 版本在 ClickBench、SSB 100G、TPC-H 100G 以及 TPC-DS 1TB 等多个测试数据集中取得了超过 100% 的性能提升。在此我们以大宽表场景的 ClickBench 以及多表关联场景的 TPC-H 为例，集群配置均为 1FE 3BE、BE 节点的服务器配置为 16C 64G 的 ARM 服务器，测试结论如下：</span><br  /></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在大宽表场景中， ClickBench 测试数据集 43 个 SQL 的总查询耗时从 102.36 秒降低至 30.73 秒，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>性能提升超过 230%</strong></span>；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在多表关联场景中， TPC-H 22 个 SQL 的总查询耗时从 174.8 秒降低至 90.4 秒，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>性能提升 93%</strong></span>；</span></section></li></ul><h2 style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">数据湖分析</span></strong></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><section style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">01&nbsp; 性能提升</span></strong></span><br  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 2.1 版本中，我们对数据湖分析方面做了大量改进，包括对 HDFS 和对象存储的 IO 优化、Parquet/ORC 文件格式的读取反序列优化、浮点类型解压优化、谓词下推执行优化、缓存策略以及扫描任务调度策略的优化，以及针对不同数据源的统计信息准确性的提升及更精准的优化器代价模型。基于以上优化，Apache Doris 在数据湖分析场景下的性能得到大幅度提升。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="550" data-imgfileid="100037848" data-ratio="0.5789473684210527" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/5_iapBVU2DrQDyAYxoszKENVGbEnrtgA.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3mPcedDrWgm0hJcXgM2FoibvbvwiapBVU2DrQDyAYxoszKENVGbEnrtgA/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="950" data-width="950"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在此我们以 TPC-DS 1TB 场景下进行测试，Apache Doris 2.1 版本和 Trino 435 版本的性能测试结果如下：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在无缓存情况下，Apache Doris 的总体运行耗时间为 717s、Trino 为 1296s，查询耗时降低了 45%，全部 99 条 SQL 中有 80% 比 Trino 更快 ；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在开启文件缓存功能并命中的情况下，Apache Doris 的总体性能可以进一步提升 2.2 倍以上，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>较 Trino 有 4 倍以上的性能提升，全部 99 条 SQL 性能均优于 Trino</strong></span>。</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">与此同时也在 TPC-DS 10TB 场景下对 Apache Doris 2.1 版本与 Spark 3.5.0 以及 3.3.1 版本进行了性能测试，<span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>查询性能分别提升 4.2 倍和 6.1 倍</strong></span>。</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">02&nbsp; 多 SQL 方言兼容</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">当用户从原有 OLAP 系统（如 Clickhouse、Trino、Presto、Hive 等）迁移至 Apache Doris 时，一方面因为 SQL 方言存在差异，需要同步修改大量的业务查询逻辑进行适配，无法进行平滑迁移。另一方面，当使用 Apache Doris 作为统一数据分析网关时，需要对接原先的 Hive、Spark 等系统、以满足不同数据源的查询需求。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">因此在 Apache Doris 2.1 版本中我们引入了多 SQL 方言转换功能，用户可以直接使用原先系统的 SQL 方言在 Doris 中进行数据查询而无需修改业务逻辑。在部署好 SQL 转换服务后，用户只需通过会话变量</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">sql_dialect</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">设置当前会话的 SQL 方言类型，即可使用对应的 SQL 方言进行查询。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">该功能目前为实验性质功能，当前已经支持 ClickHouse、Presto、Trino、Hive、Spark。在此我们以 Trino 为例，部署完 SQL 转换服务后，在会话变量中设置</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">set sql_dialect = trino</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">，即可直接采取 Trino SQL 语法执行查询。在某些社区用户的实际线上业务 SQL 兼容性测试中，在全部 3w 多条查询语句中与 Trino SQL 兼容度高达 99% 以上。也欢迎所有用户在使用过程中向我们反馈不兼容的 Case，帮助 Apache Doris 更加完善。</span></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/lakehouse/sql-dialect</span></p></blockquote><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><span style="font-size: 18px;"><strong><span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">03&nbsp; 高速数据读取，数据传输效率提升 100 倍</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">如今许多大数据系统都采取列式内存数据格式，以 MySQL/JDBC/ODBC 作为与数据库系统交互的主流协议与标准。在数据输出至外部系统的过程中，需要将数据从系统特定的列存格式序列化为 MySQL/JDBC/ODBC 协议的行存格式，再反序列化回客户端的列存格式，这会使数据传输速度大幅降低，在面向数据科学或其他形式的大规模数据读写时，数据传输的效率缺陷愈发明显。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">作为用于大规模数据处理的列式内存格式，Apache Arrow 提供了高效的数据结构、允许不同系统间更快共享数据。如果源数据库和目标客户端都支持 Apache Arrow 作为列式内存格式，使用 Arrow Flight SQL 协议传输将无需序列化和反序列化数据，消除数据传输中的开销。同时 Arrow Flight 还可以利用多节点和多核架构，通过完全并行化优化吞吐能力。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="436" data-imgfileid="100037850" data-ratio="0.34074074074074073" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/6_BDESvsMDg8JoMSwW7DUOADj7uI9ZPQ.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3uUXnFU1ibgUDibT3AJ5zfQaViafBDESvsMDg8JoMSwW7DUOADj7uI9ZPQ/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1280"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在过去如果需要采取 Python 读取 Apache Doris 中的数据，需要将 Apache Doris 中列存的 Block 序列化为 MySQL 协议的行存 Bytes，然后在 Python 客户端再反序列化到 Pandas 中，传输过程带来的性能损耗非常大。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.1 版本中，我们提供了基于 Arrow Flight 的 HTTP Data API 高吞吐数据读写接口</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">。相比于过去的 MySQL 协议，使用 Arrow Flight SQL 后，我们在 Apache Doris 中先将列存的 Block 转为同样列存的 Arrow RecordBatch，这一步转换效率非常高、且传输过程中无需再次序列化和反序列化，而后在 Python 客户端再将 Arrow RecordBatch 转到同样列存的 Pandas DataFrame 中，这一步转换同样非常快。通过Arrow Flight 提供的 Python 客户端 Pandas/Numpy 等数据科学工具，可以快速从 Apache Doris 中读取数据并在本地进行分析。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">基于此， Apache Doris 可以与整个 AI 和数据科学生态进行良好的整合，这也是未来的重要发展方向。</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">conn&nbsp;=&nbsp;flight_sql.connect(uri=<span style="color: #98c379;line-height: 26px;">"grpc://127.0.0.1:9090"</span>,&nbsp;db_kwargs={<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adbc_driver_manager.DatabaseOptions.USERNAME.value:&nbsp;<span style="color: #98c379;line-height: 26px;">"user"</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adbc_driver_manager.DatabaseOptions.PASSWORD.value:&nbsp;<span style="color: #98c379;line-height: 26px;">"pass"</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br  />cursor&nbsp;=&nbsp;conn.cursor()<br  />cursor.execute(<span style="color: #98c379;line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;arrow_flight_sql_test&nbsp;order&nbsp;by&nbsp;k0;"</span>)<br  />print(cursor.fetchallarrow().to_pandas())<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">针对常见的数据类型，我们通过不同的 MySQL 客户端进行了对比测试，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>基于 Arrow Flight SQL 数据传输性能相较于 MySQL 协议提升了近百倍</strong></span>。</span></section><p style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="502" data-imgfileid="100037851" data-ratio="0.3925925925925926" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/7_FhTDKvY3wAFhgYZRcLiaGSCib3R3LQ.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3TbgjUaheEjsVicxokarw8qcdg3ibFhTDKvY3wAFhgYZRcLiaGSCib3R3LQ/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1280"  /></p><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">04&nbsp; 其他</span></strong><br  /></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Paimon Catalog：Paimon 版本升级至 0.6.0，优化了 Read Optimized 表的读取，在 Paimon 数据充分合并的场景下，可以有 10 倍的性能提升；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Iceberg Catalog：Iceberg 版本升级至 1.4.3，同时解决了 AWS S3 认证的若干兼容性问题；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Hudi Catalog：Hudi 版本升级至 0.14.1，同时解决了 Hudi Flink Catalog 的若干兼容性问题。</span></section></li></ul><h2 style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">多表物化视图</span></strong></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><section style="margin-top: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">作为一种典型的“空间换时间”策略，物化视图通过预先计算和存储 SQL 查询结果，当执行相同查询时可以直接从物化视图表中获取结果，在大幅提升查询性能的同时、更是减少重复计算带来的系统资源消耗。</span><br  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在过去版本中 Apache Doris 提供了强一致的单表物化视图、保证基表和物化视图表的原子性，并支持了查询语句在物化视图上的智能路由。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.1 版本中，我们引入了全新的异步物化视图，可以基于多表来构建</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">。异步物化视图可以全量或者分区增量构建，也可以手动或者周期性地构建刷新数据。在多表关联查询且表数据量较大的场景下，优化器会根据代价模型进行透明改写、并自动寻找最优物化视图来响应查询，</span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 0, 0);">以大幅提升查询性能</span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">。与此同时，也提供了从外表到内表的物化视图以及直查物化视图的能力，基于此特性，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>异步物化视图也可用于数据仓库分层建模、作业调度和数据加工。</strong></span>异步物化视图使用方式如下：</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">表定义：</span></strong></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">use</span>&nbsp;tpch;<br  /><br  /><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">IF</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">EXISTS</span>&nbsp;orders&nbsp;&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_orderkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_custkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_orderstatus&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">1</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_totalprice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimalv3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_orderdate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">date</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_orderpriority&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">15</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_clerk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">15</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_shippriority&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;o_comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">79</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DUPLICATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(o_orderkey,&nbsp;o_custkey)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">PARTITION</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">RANGE</span>(o_orderdate)(<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">FROM</span>&nbsp;(<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">TO</span>&nbsp;(<span style="color: #98c379;line-height: 26px;">'2023-10-20'</span>)&nbsp;<span style="color: #e6c07b;line-height: 26px;">INTERVAL</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">DAY</span>)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(o_orderkey)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;PROPERTIES&nbsp;(<span style="color: #98c379;line-height: 26px;">"replication_num"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"1"</span>);<br  /><br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;orders&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span><br  />&nbsp;&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'ok'</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">99.5</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'a'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'b'</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'yy'</span>),<br  />&nbsp;&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'ok'</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">109.2</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-18'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'c'</span>,<span style="color: #98c379;line-height: 26px;">'d'</span>,<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'mm'</span>),<br  />&nbsp;&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'ok'</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">99.5</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-19'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'a'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'b'</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'yy'</span>);<br  /><br  /><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">IF</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">EXISTS</span>&nbsp;lineitem&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_orderkey&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_partkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_suppkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_linenumber&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">integer</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_quantity&nbsp;&nbsp;&nbsp;&nbsp;decimalv3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_extendedprice&nbsp;&nbsp;decimalv3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_discount&nbsp;&nbsp;&nbsp;&nbsp;decimalv3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_tax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimalv3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_returnflag&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">1</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_linestatus&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">1</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_shipdate&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">date</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_commitdate&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">date</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_receiptdate&nbsp;<span style="color: #e6c07b;line-height: 26px;">date</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_shipinstruct&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">25</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_shipmode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">char</span>(<span style="color: #d19a66;line-height: 26px;">10</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;l_comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">44</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DUPLICATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(l_orderkey,&nbsp;l_partkey,&nbsp;l_suppkey,&nbsp;l_linenumber)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">PARTITION</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">RANGE</span>(l_shipdate)<br  />&nbsp;&nbsp;&nbsp;&nbsp;(<span style="color: #c678dd;line-height: 26px;">FROM</span>&nbsp;(<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">TO</span>&nbsp;(<span style="color: #98c379;line-height: 26px;">'2023-10-20'</span>)&nbsp;<span style="color: #e6c07b;line-height: 26px;">INTERVAL</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">DAY</span>)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(l_orderkey)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;PROPERTIES&nbsp;(<span style="color: #98c379;line-height: 26px;">"replication_num"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"1"</span>);<br  /><br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;lineitem&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span><br  />&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">4</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">5.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">6.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">7.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">8.5</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'o'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'k'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-17'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'a'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'b'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'yyyyyyyyy'</span>),<br  />&nbsp;(<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">4</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">5.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">6.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">7.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">8.5</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'o'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'k'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-18'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-18'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-18'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'a'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'b'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'yyyyyyyyy'</span>),<br  />&nbsp;(<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">6</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">7.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">8.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">9.5</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">10.5</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'k'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'o'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-19'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-19'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-10-19'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'c'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'d'</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'xxxxxxxxx'</span>);<br  />&nbsp;<br  />&nbsp;<br  />&nbsp;<span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">IF</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">EXISTS</span>&nbsp;partsupp&nbsp;(<br  />&nbsp;&nbsp;ps_partkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">INTEGER</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;ps_suppkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">INTEGER</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;ps_availqty&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">INTEGER</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;ps_supplycost&nbsp;&nbsp;DECIMALV3(<span style="color: #d19a66;line-height: 26px;">15</span>,<span style="color: #d19a66;line-height: 26px;">2</span>)&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;ps_comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">VARCHAR</span>(<span style="color: #d19a66;line-height: 26px;">199</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<br  />)<br  /><span style="color: #c678dd;line-height: 26px;">DUPLICATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(ps_partkey,&nbsp;ps_suppkey)<br  /><span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(ps_partkey)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">3</span><br  />PROPERTIES&nbsp;(<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">"replication_num"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"1"</span><br  />)<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">创建物化视图：</span></strong><br  /></section></pre><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">MATERIALIZED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">VIEW</span>&nbsp;mv1&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">BUILD</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">DEFERRED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">REFRESH</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">AUTO</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">ON</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">MANUAL</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">partition</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>(l_shipdate)<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;RANDOM&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PROPERTIES&nbsp;(<span style="color: #98c379;line-height: 26px;">'replication_num'</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">'1'</span>)&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">AS</span>&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;l_shipdate,&nbsp;o_orderdate,&nbsp;l_partkey,&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l_suppkey,&nbsp;<span style="color: #c678dd;line-height: 26px;">sum</span>(o_totalprice)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;sum_total<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;lineitem<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">left</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">join</span>&nbsp;orders&nbsp;<span style="color: #c678dd;line-height: 26px;">on</span>&nbsp;lineitem.l_orderkey&nbsp;=&nbsp;orders.o_orderkey&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">and</span>&nbsp;l_shipdate&nbsp;=&nbsp;o_orderdate<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l_shipdate,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o_orderdate,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l_partkey,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l_suppkey;</code></pre></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">目前异步物化视图已经具备以下功能：</span></strong></span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">透明改写加速：支持常见算子的透明改写，如 Select、Where、Join、Group by、Aggregation 等，可以直接通过建立物化视图，对现有的查询进行加速。例如在 BI 报表场景，某些报表查询延时比较高，就可以通过建立合适的物化视图进行加速。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">自动刷新：物化视图支持不同刷新策略，如定时刷新和手动刷新，也支持不同的刷新粒度，如全量刷新、分区粒度的增量刷新等。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">外表到内表的物化视图：可以对存放在 Hive、Hudi、Iceberg 等数据湖系统上的数据建立物化视图，加速对数据湖的访问，也可以通过物化视图的方式将数据湖中的数据同步到 Apache Doris 内表中。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">物化视图直查：用户也可以将物化视图的构建看做 ETL 的过程，把物化视图看做是 ETL 加工后的结果数据，由于物化视图本身也是一个表，所以用户可以直接查询物化视图。</span></section></li></ul><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/query-acceleration/async-materialized-view/</span></p></blockquote><section style="line-height: 1.6em;text-align: justify;margin: 40px 0px 24px;text-indent: 0em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">存储</span></strong><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">能力增强</span></strong></section><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">01&nbsp; 自增列 AUTO_INCREMENT</span></strong></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">自增列 AUTO_INCREMENT 是 OLTP 数据库中常见的一项功能，提供了一种方便高效的方式来为新插入的数据行自动分配唯一标识符。由于自增列的可用值分配涉及到全局事务，因此在分布式 OLAP 数据库中并不常见。在 Apache Doris 2.1 版本中，我们通过创新性的自增序列预分配策略，提供了高效的自增列实现。基于自增列的唯一性保证，用户可以利用自增列实现高效的字典编码和查询分页。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">字典编码：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在进行 PV/UV 统计或人群圈选等需要精确去重的查询时，可以使用自增列对 UserID 或订单 ID 等字符串值创建字典表，将用户数据批量或者实时写入字典表即可生成字典，根据各种维度的条件对对应的 Bitmap 进行聚合运算；</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #98c379;line-height: 26px;">`demo`</span>.<span style="color: #98c379;line-height: 26px;">`dictionary_tbl`</span>&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`user_id`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">50</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`aid`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">BIGINT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;AUTO_INCREMENT<br  />)&nbsp;<span style="color: #c678dd;line-height: 26px;">ENGINE</span>=OLAP<br  /><span style="color: #c678dd;line-height: 26px;">UNIQUE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(<span style="color: #98c379;line-height: 26px;">`user_id`</span>)<br  /><span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(<span style="color: #98c379;line-height: 26px;">`user_id`</span>)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">32</span><br  />PROPERTIES&nbsp;(<br  /><span style="color: #98c379;line-height: 26px;">"replication_allocation"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"tag.location.default:&nbsp;3"</span>,<br  /><span style="color: #98c379;line-height: 26px;">"enable_unique_key_merge_on_write"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"true"</span><br  />);<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">查询分页：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在页面展示数据时，往往需要做分页展示。传统的分页通常使用 SQL 中的</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">limit</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">,</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">offset</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;"> + </span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">order by</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">进行查询。在进行深分页查询时，即使查询数据量较少、数据库仍需将全部数据读取至内存进行全量排序，查询效率比较低下。采取自增列可以为每一行生成唯一标识、查询时记住上一页最大唯一标识并用于下一页的查询条件，实现更高效的分页查询。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">以下表为例，unique_value 是一个唯一值：</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #98c379;line-height: 26px;">`demo`</span>.<span style="color: #98c379;line-height: 26px;">`records_tbl2`</span>&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`key`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">int</span>(<span style="color: #d19a66;line-height: 26px;">11</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`name`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">26</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`address`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">41</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`city`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">11</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`nation`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">16</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`region`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">13</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`phone`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">16</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`mktsegment`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">11</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">""</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`unique_value`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">BIGINT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;AUTO_INCREMENT<br  />)&nbsp;<span style="color: #c678dd;line-height: 26px;">DUPLICATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>&nbsp;(<span style="color: #98c379;line-height: 26px;">`key`</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">`name`</span>)<span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;ipv4_test&nbsp;(<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`id`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">int</span>,<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`ip_v4`</span>&nbsp;ipv4<br  />)&nbsp;<span style="color: #c678dd;line-height: 26px;">ENGINE</span>=OLAP<br  /><span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(<span style="color: #98c379;line-height: 26px;">`id`</span>)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">4</span><br  />PROPERTIES&nbsp;(<br  /><span style="color: #98c379;line-height: 26px;">"replication_allocation"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"tag.location.default:&nbsp;1"</span><br  />);<br  />DISTRIBUTED&nbsp;BY&nbsp;HASH(`key`)&nbsp;BUCKETS&nbsp;10<br  />PROPERTIES&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;"replication_num"&nbsp;=&nbsp;"3"<br  />);<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在分页展示中，每页展示 100 条数据，使用如下方式获取第一页的数据：</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;*&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">通过程序记录下返回结果中</span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;*&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br  /></code></pre></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">通过程序记录下返回结果中&nbsp;</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">unique_value</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">中的最大值，假设为 99，则可用如下方式查询第二页的数据：</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">key</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">name</span>,&nbsp;address,&nbsp;city,&nbsp;nation,&nbsp;region,&nbsp;phone,&nbsp;mktsegment<br  /><span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2,&nbsp;(<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;max_value&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;uniuqe_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">offset</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">9999</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;previous_data<br  /><span style="color: #c678dd;line-height: 26px;">where</span>&nbsp;records_tbl2.uniuqe_value&nbsp;&gt;&nbsp;previous_data.max_value<br  /><span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br  /></code></pre></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">如果要直接查询一个靠后页面的内容，此时不方便直接获取之前页面数据中</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">unique_value</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">的最大值时，例如要直接获取第 101 页的内容，则可以使用如下方式进行查询</span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">key</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">name</span>,&nbsp;address,&nbsp;city,&nbsp;nation,&nbsp;region,&nbsp;phone,&nbsp;mktsegment<br  /><span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2,&nbsp;(<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;max_value&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;records_tbl2&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;uniuqe_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">offset</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">9999</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;previous_data<br  /><span style="color: #c678dd;line-height: 26px;">where</span>&nbsp;records_tbl2.uniuqe_value&nbsp;&gt;&nbsp;previous_data.max_value<br  /><span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;unique_value&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">100</span>;<br  /></code></pre></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/advanced/auto-increment</span></p></blockquote><p style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">02&nbsp; 自动分区 Auto Partition</span></strong><br  /></p><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.1 版本之前一直采取手动分区的形式，用户需要提前把分区建立好，否则在导入数据过程中会因为找不到对应分区而出错。而自动分区功能支持了在导入数据过程中自动检测分区列的数据对应的分区是否存在。如果不存在，则会自动创建分区并正常进行导入。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">自动分区功能使用方式如下：</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #98c379;line-height: 26px;">`DAILY_TRADE_VALUE`</span><br  />(<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`TRADE_DATE`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datev2&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">'交易日期'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`TRADE_ID`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #e6c07b;line-height: 26px;">varchar</span>(<span style="color: #d19a66;line-height: 26px;">40</span>)&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">'交易编号'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;......<br  />)<br  /><span style="color: #c678dd;line-height: 26px;">UNIQUE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(<span style="color: #98c379;line-height: 26px;">`TRADE_DATE`</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">`TRADE_ID`</span>)<br  /><span style="color: #c678dd;line-height: 26px;">AUTO</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">PARTITION</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">RANGE</span>&nbsp;date_trunc(<span style="color: #98c379;line-height: 26px;">`TRADE_DATE`</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">'year'</span>)<br  />(<br  />)<br  /><span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(<span style="color: #98c379;line-height: 26px;">`TRADE_DATE`</span>)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span><br  />PROPERTIES&nbsp;(<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">"replication_num"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"1"</span><br  />);<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">注意事项：</span></section><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">当前自动分区功能仅支持一个分区列，并且分区列必须为 NOT NULL 列；</span></section><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">自动分区当前已支持 Range 分区和 List 分区，其中 Range 分区函数仅支持</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">date_trunc</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">、分区列仅支持</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">DATE</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">或者</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">DATETIME</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">格式；List 分区不支持函数调用，分区列支持</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">BOOLEAN</code><code style="text-indent: 0em;word-spacing: 0em;font-size: var(--articleFontsize);letter-spacing: 0.034em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">、</span></code><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">TINYINT</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">SMALLINT</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">INT</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">BIGINT</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">LARGEINT</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">DATE</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">DATETIME</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">CHAR</code><span style="letter-spacing: 0em;text-indent: 0em;color: rgb(0, 0, 0);font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;text-align: left;word-spacing: 0em;">、</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">VARCHAR</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">数据类型，分区值为枚举值；</span></section><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">使用 List 分区时，一旦分区列的值当前不存在，自动分区功能都会为其创建一个独立的新分区。</span></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/advanced/partition/auto-partition/</span></p></blockquote><section style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">03&nbsp; INSERT INTO SELECT 导入性能提升 100%</span></strong></section><section style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">INSERT INTO…SELECT</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">语句是 ETL 中最高频使用的操作之一，可以快速完成数据在库表之间的迁移、转换以及清洗合并，提升</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">INSERT INTO…SELECT</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">性能可以更好满足用户对数据快速提取和分析的需求。在 Apache Doris 2.0 版本中，我们引入了单副本导入功能（Single Replica Load）来减少多副本的重复写入和 Compaction 工作，但是导入性能还存在优化的空间。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.1 版本中，为了进一步提升</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">INSERT INTO…SELECT</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">性能，我们实现了 MemTable 前移以进一步减少导入过程中的开销，能在大多数场景中能在 2.0 版本的基础上取得 100% 的导入性能提升。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="571" data-imgfileid="100037847" data-ratio="0.5941727367325702" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/8_deTjOATib3fFcENalSh6vMXIic7ibQ.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3O8jWvcJfOC45yubPYpYOmT7hdb0deTjOATib3fFcENalSh6vMXIic7ibQ/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="961" data-width="961"  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">MemTable 前移和非前移的流程对比如上图所示，Sink 节点不再发送编码后的 Block，而是在本地处理完 MemTable 将生成的 Segment 数据发给下游节点，减少了数据多次编码的开销，同时使内存反压更准确和及时。此外，我们使用了 Streaming RPC 来替代了 Ping-pong RPC ，减少了数据传输过程中的等待。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在此我们对 2.1 版本开启 MemTable 前移后的导入性能进行了测试，测试环境如下：1 FE+3 BE、每个节点 16C 64G、3 块高性能云盘（保证磁盘 I/O 不成为瓶颈）</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">可以看到在单副本场景下，2.1 版本开启 MemTable 前移后、导入耗时降低至 2.0 版本的 36%，三副本场景下导入耗时降低至 2.0 版本的 54%，整体导入性能提升超过 100%。</span></strong></span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);"><img class="rich_pages wxw-img" data-imgfileid="100037854" data-ratio="0.2935185185185185" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/9_Lop6Y6yiaibeHut6eI2FLRN9aJj6IA.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3bk4kKiaKd9W8ItIo7bR4ulNGFQJLop6Y6yiaibeHut6eI2FLRN9aJj6IA/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" style=""  /></span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">备注：MemTable 前移在 2.1 版本中默认开启，用户无需修改原有的导入命令即可获得大幅性能提升。如果在使用过程中遇到问题、希望回退到原有的导入方式，可以在 MySQL 连接中设置环境变量</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">enable_memtable_on_sink_node=false</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">来关闭 MemTable 前移。</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">04&nbsp; 高频实时导入/服务端攒批 Group Commit</span></strong></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在数据导入过程中，不同批次导入的数据都会写入内存表中，随后在磁盘中上形成一个个 RowSet 文件，每个 Rowset 文件对应一次数据导入版本。后台 Compacttion 进程会自动对多个版本的 RowSet 文件进行合并，将多个 RowSet 小文件合并成 RowSet 大文件以优化查询性能以及存储空间，而每一次的 Compaction 进程都会产生对 CPU、内存以及磁盘 IO 资源的消耗。在实际数据写入场景中，写入越实时高频、生成 RowSet 版本数越高、Compaction 所消耗的资源就越大。为了避免高频写入带来的过多资源消耗甚至 OOM，Apache Doris 引入了反压机制，即在版本过多的情况下会返回 -235 ，并对数据的版本数量进行控制。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="1124" data-imgfileid="100037853" data-ratio="0.7129629629629629" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/10_jGKxPxNym5ILMWC3KyRhhzODsr38PQ.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3sEq8DTk4t8C7orqtRRIEw7j8jGKxPxNym5ILMWC3KyRhhzODsr38PQ/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1576" style=""  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">从 Apache Doris 2.1 版本开始，我们引入了服务端攒批 Group Commit，大幅强化了高并发、高频实时写入的能力。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">顾名思义， Group Commit 会把用户侧的多次写入在 BE 端进行积攒后批量提交。对于用户而言，无需控制写入程序的频率，Doris 会自动把用户提交的多次写入在内部合并为一个版本，从而可以大幅提升用户侧的写入频次。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><img class="rich_pages wxw-img" data-height="1132" data-imgfileid="100037855" data-ratio="0.5916666666666667" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/11_AS2aUnRxNmXBOY6IzvB3pPjbnHEW6Q.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3K1wwuIxSBy6KNKKh7U0ib48ygAS2aUnRxNmXBOY6IzvB3pPjbnHEW6Q/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" data-width="1912" style=""  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">当前 Group Commit 已经支持同步模式</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">sync_mode</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">和异步模式</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">async_mode</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">。同步模式下会将多个导入在一个事务提交，事务提交后导入返回，在导入完成后数据立即可见。异步模式下数据会先写入 WAL，Apache Doris 会根据负载和表的</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">group_commit_interval</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">属性异步提交数据，提交之后数据可见。为了防止 WAL 占用较大的磁盘空间，单次导入数据量较大时，会自动切换为</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">sync_mode</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">我们分别采取 JDBC 和 Stream Load 两种方式对高并发写入场景下 Group Commit（异步模式</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">async_mode</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">）的写入性能进行了测试，测试报告如下：</span></section><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">JDBC 写入：</span></strong></span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">集群配置为 1FE 1BE，数据集为 TPC-H SF10 Lineitem 表，总共约 22GB、1.8 亿行；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">经测试，在并发数 20、单次 Insert 数据行数 100 行下，导入效率达到 10.69w 行/秒、导入吞吐达 11.46 MB/秒， BE 节点的 CPU 使用率稳定保持在 10%-20%；</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">Stream Load 写入：</span></strong></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">集群配置为 1FE 3BE，数据集为 httplogs、总共 31GB、2.47 亿行。在未开启 Group Commit 和 开启 Group Commit 的异步模式时，通过设置不同的单并发数据量和并发数，对比数据的写入性能。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">经测试，在并发数 10、单次导入数据量 1 MB 下，未开启 Group Commit 时会提示 -235 错误，开启后可稳定运行且导入效率达 81w 行/秒、导入吞吐达 104 MB/秒；在并发数 10、单次导入数据量 10MB 下，<span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color: rgb(0, 101, 253);"><strong>开启 Group Commit 后耗时降低至原先的 55%、导入吞吐提升 79%；</strong></span></span></section></li></ul><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档和完整测试报告：https://doris.apache.org/zh-CN/docs/data-operate/import/import-way/group-commit-manual/</span></p></blockquote><h2 style="line-height: 1.6em;text-align: justify;margin: 40px 0px 24px;text-indent: 0em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">半结构化数据分析</span></strong></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><section style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">01&nbsp; Variant 数据类型</span></strong><br  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">过去 Apache Doris 在应对复杂半结构化数据的存储和分析处理时，一般有两种方式：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">一种方式是用户提前预定好表结构，加工成宽表，在数据进入前将数据解析好，这种方案的优点是写入性能好，查询也不需要解析，但是使用不够灵活、对表结构发起变更增加运维、研发的成本。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">使用 Doris 中的 JSON 类型、或是存成 JSON String，将原始 JSON 数据不经过加工直接入库， 查询的时候，用解析函数处理。优点是不需要额外的数据加工、预定义表结构拍平嵌套结构，运维、研发方便，但存在解析性能以及数据读取效率低下的问题。</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">为了解决上述半结构化数据的挑战，在 Apache Doris 2.1 版本中我们引入全新的数据类型VARIANT，支持存储半结构化数据、允许存储包含不同数据类型（如整数、字符串、布尔值等）的复杂数据结构，无需在表结构中提前定义具体的列，其存储和查询与传统的 String、JSONB 等行存类型发生了本质的改变，期望其作为半结构化数据首选数据类型，给用户带来更加高效的数据处理机制。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Variant 类型特别适用于处理结构可能随时会发生变化的复杂嵌套结构。在写入过程中，Variant 类型可以自动根据列的结构和类型推断列信息，并将其合并到现有表的 Schema 中，将 JSON 键及其对应的值灵活存储为动态子列。同时，一个表可以同时包含灵活的 Variant 对象列和预先定义类型的更严格的静态列，从而在数据存储、查询上提供了更大的灵活性。除此之外，Variant 类型能够与 Doris 核心特性融合，利用列式存储、向量化引擎、优化器等技术，为用户带来极高性价比的查询性能及存储性能。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">使用方式如下：</span></strong></span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #5c6370;font-style: italic;line-height: 26px;">--&nbsp;无索引</span><br  /><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">IF</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">EXISTS</span>&nbsp;${table_name}&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;k&nbsp;<span style="color: #e6c07b;line-height: 26px;">BIGINT</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;VARIANT<br  />)<br  />table_properties;<br  /><br  /><span style="color: #5c6370;font-style: italic;line-height: 26px;">--&nbsp;在v列创建索引，可选指定分词方式，默认不分词</span><br  /><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">IF</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">NOT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">EXISTS</span>&nbsp;${table_name}&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;k&nbsp;<span style="color: #e6c07b;line-height: 26px;">BIGINT</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;VARIANT,<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">INDEX</span>&nbsp;idx_var(v)&nbsp;<span style="color: #c678dd;line-height: 26px;">USING</span>&nbsp;INVERTED&nbsp;[PROPERTIES(<span style="color: #98c379;line-height: 26px;">"parser"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"english|unicode|chinese"</span>)]&nbsp;[<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">'your&nbsp;comment'</span>]<br  />)<br  />table_properties;<br  /><br  /><span style="color: #5c6370;font-style: italic;line-height: 26px;">--&nbsp;查询，使用`[]`形式访问子列</span><br  /><span style="color: #c678dd;line-height: 26px;">SELECT</span>&nbsp;v[<span style="color: #98c379;line-height: 26px;">"properties"</span>][<span style="color: #98c379;line-height: 26px;">"title"</span>]&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;${table_name}<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="true"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">相比 JSON 类型的优势：</span></strong></span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 中 JSON 类型是以二进制 JSONB 格式进行存储，整行 JSON 以行存的形式存储到 Segment 文件中。而 VARIANT 类型在写入的时候进行类型推断，将写入的 JSON 列存化，查询不需要进行解析。此外 Variant 类型针对稀疏场景的 JSON 进行优化，只提取频繁出现的列，稀疏的列会以单独的格式进行存储。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">为了验证引入 Variant 数据类型后在存储以及查询上所带来的优势，我们基于 ClickBench 测试数据集进行了存储空间和查询性能的测试。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在存储空间方面，相同数据采取 Variant 类型，所占用的存储空间跟预定义的静态列的存储空间持平，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>相比于 JSON 类型则减少了约 65%</strong></span>。在一些低基数场景，由于列存的优势，存储资源的成本效应会更加明显。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);"><img class="rich_pages wxw-img" data-imgfileid="100037852" data-ratio="0.3712962962962963" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/12_5M70xD8wNVlkevib7kUaoYyLAjsJhQ.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3yNKe19ShGgeAiaNPvyx5tVB5085M70xD8wNVlkevib7kUaoYyLAjsJhQ/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" style=""  /></span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在查询性能方面，如下表可知，Variant 类型与预定义静态列的查询性能差异在 10% 左右；而对于 JSON 类型来说，<span style="letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);"><strong>Variant 类型的热查询速度相比于 JSON 类型提升了 8 倍以上，冷查询有着数量级的提升。</strong></span>（由于 I/O 原因，JSONB 类型的冷查询大部分超时）。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);"><img class="rich_pages wxw-img" data-imgfileid="100037856" data-ratio="0.3592592592592593" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/13_85xH5vGHJ0lJgdYpLibOke5tdwgBAg.png" onerror="this.src='https://mmbiz.qpic.cn/sz_mmbiz_png/Uecg6b8kbSZvxJJf91CpeiamUyTpg92C3kOu3tdIY0hrdUNkmLjSn5GTOz85xH5vGHJ0lJgdYpLibOke5tdwgBAg/640?wx_fmt=png&amp;from=appmsg'" data-type="png" data-w="1080" style=""  /></span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">注意事项：</span></strong></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">目前 Variant 暂不支持 Aggregate 模型，也不支持将 Variant 类型作为 Unique 或 Duplicate 模型的主键及排序键；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">推荐使用 RANDOM 模式或者开启 Group Commit 导入，写入性能更高效；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">日期、Decimal 等非标准 JSON 类型尽可能提取出来作为静态字段，性能更好；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">二维及其以上的数组以及数组嵌套对象，列存化会被存成 JSONB 编码，性能不如原生数组；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">查询过滤、聚合需要带 Cast，存储层会根据存储类型和 Cast 目标类型来提示（hint）存储引擎谓词下推，加速查询。</span></section></li></ul><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/sql-manual/sql-reference/Data-Types/VARIANT</span></p></blockquote><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">02&nbsp; IP 数据类型</span></strong></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在网络流量监控的场景中，IP 地址是一个常见的字段，大量的统计分析基于 IP 地址进行。在 Apache Doris 2.1 版本中，将原生支持 IPv4 和 IPv6 数据类型，用高效的二进制形式存储 IP 数据。相比于使用明文的 IP String，内存和存储空间可节省 60% 左右。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">同时基于 IP 类型，我们增加了常用的 20 多个 IP 处理函数，如：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">IPV4_NUM_TO_STRING：将类型为 Int16、Int32、Int64 且大端表示的 IPv4 的地址，返回相应 IPv4 的字符串表现形式；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">IPV4_CIDR_TO_RANGE：接收一个 IPv4 和一个包含 CIDR 的 Int16 值，返回一个结构体，其中包含两个 IPv4 字段分别表示子网的较低范围（min）和较高范围（max）；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">INET_ATON：获取包含 IPv4 地址的字符串，格式为 A.B.C.D（点分隔的十进制数字）</span></section></li></ul><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/sql-manual/sql-reference/Data-Types/IPV6</span></p></blockquote><h3 style="line-height: 1.6em;text-align: justify;margin: 32px 0px 24px;text-indent: 0em;"><strong style="font-size: 18px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(0, 101, 253);">03&nbsp; 复杂数据类型分析函数完善</span></strong></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.1 版本中我们丰富了行转列和 IN 能支持的数据类型。如：</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">1.&nbsp;</span><code style="text-indent: 0em;letter-spacing: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">explode_map</code><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;">：支持 MAP 类型数据行转列（仅在新优化器中实现）</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">支持 Map 类型 Explode 行转列，将 Map 字段的 N 个 Key Value 对展开成 N 行，每行的 Map 字段替换成 Key 和 Value 两个字段。</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">explode_map</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">需要和 Lateral View 一起使用，可以接多个 Lateral View, 结果则是每个</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">explode_map</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">之后的行数以笛卡尔积的形式展示。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">具体使用如下:</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #5c6370;font-style: italic;line-height: 26px;">--&nbsp;建表语句</span><br  />&nbsp;<span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #98c379;line-height: 26px;">`sdu`</span>&nbsp;(<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`id`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">INT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`name`</span>&nbsp;<span style="color: #e6c07b;line-height: 26px;">TEXT</span>&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">`score`</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">MAP</span>&lt;<span style="color: #e6c07b;line-height: 26px;">TEXT</span>,<span style="color: #e6c07b;line-height: 26px;">INT</span>&gt;&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span><br  />)&nbsp;<span style="color: #c678dd;line-height: 26px;">ENGINE</span>=OLAP<br  /><span style="color: #c678dd;line-height: 26px;">DUPLICATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">KEY</span>(<span style="color: #98c379;line-height: 26px;">`id`</span>)<br  /><span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">'OLAP'</span><br  /><span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(<span style="color: #98c379;line-height: 26px;">`id`</span>)&nbsp;BUCKETS&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span><br  />PROPERTIES&nbsp;(<br  /><span style="color: #98c379;line-height: 26px;">"replication_allocation"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"tag.location.default:&nbsp;1"</span><br  />);<br  /><br  /><span style="color: #5c6370;font-style: italic;line-height: 26px;">--&nbsp;insert&nbsp;数据</span><br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">0</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"zhangsan"</span>,&nbsp;{<span style="color: #98c379;line-height: 26px;">"Chinese"</span>:<span style="color: #98c379;line-height: 26px;">"80"</span>,<span style="color: #98c379;line-height: 26px;">"Math"</span>:<span style="color: #98c379;line-height: 26px;">"60"</span>,<span style="color: #98c379;line-height: 26px;">"English"</span>:<span style="color: #98c379;line-height: 26px;">"90"</span>});<br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"lisi"</span>,&nbsp;{<span style="color: #98c379;line-height: 26px;">"null"</span>:<span style="color: #56b6c2;line-height: 26px;">null</span>});<br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">2</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"wangwu"</span>,&nbsp;{<span style="color: #98c379;line-height: 26px;">"Chinese"</span>:<span style="color: #98c379;line-height: 26px;">"88"</span>,<span style="color: #98c379;line-height: 26px;">"Math"</span>:<span style="color: #98c379;line-height: 26px;">"90"</span>,<span style="color: #98c379;line-height: 26px;">"English"</span>:<span style="color: #98c379;line-height: 26px;">"96"</span>});<br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">3</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"lisi2"</span>,&nbsp;{<span style="color: #56b6c2;line-height: 26px;">null</span>:<span style="color: #56b6c2;line-height: 26px;">null</span>});<br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">4</span>,&nbsp;<span style="color: #98c379;line-height: 26px;">"amory"</span>,&nbsp;<span style="color: #56b6c2;line-height: 26px;">NULL</span>);<br  /><br  />mysql&gt;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">name</span>,&nbsp;course_0,&nbsp;score_0&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">lateral</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">view</span>&nbsp;explode_map(score)&nbsp;tmp&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;course_0,score_0;<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span><br  />|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;course_0&nbsp;|&nbsp;score_0&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span><br  />|&nbsp;zhangsan&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;lisi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;null&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|<br  />|&nbsp;lisi2&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span><br  /><br  />mysql&gt;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">name</span>,&nbsp;course_0,&nbsp;score_0,&nbsp;course_1,&nbsp;score_1&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">lateral</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">view</span>&nbsp;explode_map(score)&nbsp;tmp&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;course_0,score_0&nbsp;<span style="color: #c678dd;line-height: 26px;">lateral</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">view</span>&nbsp;explode_map(score)&nbsp;tmp1&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;course_1,score_1;<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+----------+---------+</span><br  />|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;course_0&nbsp;|&nbsp;score_0&nbsp;|&nbsp;course_1&nbsp;|&nbsp;score_1&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+----------+---------+</span><br  />|&nbsp;zhangsan&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;lisi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;null&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;null&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|<br  />|&nbsp;lisi2&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+----------+---------+</span><br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><p data-tool="mdnice编辑器" style="line-height: 1.8em;letter-spacing: 0em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><code style="color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">explode_map_outer</code><span style="text-align: justify;text-indent: 0em;color: rgba(0, 0, 0, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">和</span><code style="letter-spacing: 0em;text-indent: 0em;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">explode_outer</code><span style="text-indent: 0em;word-spacing: 0em;color: rgba(0, 0, 0, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-align: justify;">的目的一致，可以将当前 MAP 类型的列中是 NULL 的数据行展示出来。</span></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">mysql&gt;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">name</span>,&nbsp;course_0,&nbsp;score_0&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;sdu&nbsp;<span style="color: #c678dd;line-height: 26px;">lateral</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">view</span>&nbsp;explode_map_outer(score)&nbsp;tmp&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;course_0,score_0;<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span><br  />|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;course_0&nbsp;|&nbsp;score_0&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span><br  />|&nbsp;zhangsan&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;|<br  />|&nbsp;zhangsan&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;lisi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;null&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Chinese&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;Math&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90&nbsp;|<br  />|&nbsp;wangwu&nbsp;&nbsp;&nbsp;|&nbsp;English&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;|<br  />|&nbsp;lisi2&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />|&nbsp;amory&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------+----------+---------+</span></code></pre></section></section><p style="line-height: 1.8em;text-align: left;text-indent: 0em;margin-top: 24px;margin-bottom: 0px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">2. 增加 IN 谓词支持 Struct 类型数据的能力（仅在新优化器中实现）</span></p><p style="line-height: 1.8em;text-align: left;text-indent: 0em;margin-top: 24px;margin-bottom: 0px;"><span style="word-spacing: 0em;text-indent: 0em;text-align: justify;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">IN 谓词的左参数支持</span><code style="letter-spacing: 0em;word-spacing: 0em;text-indent: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">struct() function</code><span style="word-spacing: 0em;text-indent: 0em;text-align: justify;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">构建的 Struct 类型的数据，也支持 Select 某表中某一列是 Struct 类型的数据，右边的参数支持一个由</span><code style="letter-spacing: 0em;word-spacing: 0em;text-indent: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">struct() function</code><span style="word-spacing: 0em;text-indent: 0em;text-align: justify;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">构建的 Struct 类型的数据的数组。IN 谓词支持 Struct 类型可以有效替换 Where 条件中如果需要大量的 or 连词连接的表达式，如：</span><code style="letter-spacing: 0em;word-spacing: 0em;text-indent: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">(a = 1 and b = '2') or (a = 1 and b = '3') or (...)&nbsp;</code><span style="word-spacing: 0em;text-indent: 0em;text-align: justify;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">可以通过 IN 实现为&nbsp;</span><span style="letter-spacing: 0em;word-spacing: 0em;text-indent: 0em;background-color: rgba(27, 31, 35, 0.05);color: rgb(30, 107, 184);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;font-size: 14px;">struct(a,b) in (struct(1, '2'), struct(1, '3'), ...)</span></p><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="background-color: rgba(27, 31, 35, 0.05);color: rgb(30, 107, 184);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;font-size: 14px;letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;"></span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">mysql&gt;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #98c379;line-height: 26px;">"2"</span>)&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">in</span>&nbsp;(<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #d19a66;line-height: 26px;">3</span>),&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #98c379;line-height: 26px;">"2"</span>),&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #d19a66;line-height: 26px;">1</span>),&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>);<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  />|&nbsp;cast(struct(1,&nbsp;'2')&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;)&nbsp;IN&nbsp;(NULL,&nbsp;cast(struct(1,&nbsp;'2')&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;),&nbsp;cast(struct(1,&nbsp;1)&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;),&nbsp;cast(struct(1,&nbsp;3)&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;))&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  />|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  />mysql&gt;&nbsp;<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #98c379;line-height: 26px;">"2"</span>)&nbsp;<span style="color: #c678dd;line-height: 26px;">not</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">in</span>&nbsp;(<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #d19a66;line-height: 26px;">3</span>),&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #98c379;line-height: 26px;">"2"</span>),&nbsp;<span style="color: #c678dd;line-height: 26px;">struct</span>(<span style="color: #d19a66;line-height: 26px;">1</span>,<span style="color: #d19a66;line-height: 26px;">1</span>),&nbsp;<span style="color: #56b6c2;line-height: 26px;">null</span>);<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  />|&nbsp;(&nbsp;not&nbsp;cast(struct(1,&nbsp;'2')&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;)&nbsp;IN&nbsp;(NULL,&nbsp;cast(struct(1,&nbsp;'2')&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;),&nbsp;cast(struct(1,&nbsp;1)&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;),&nbsp;cast(struct(1,&nbsp;3)&nbsp;as&nbsp;STRUCT&lt;col1:TINYINT,col2:TEXT&gt;)))&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  />|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br  /></code></pre></section><p style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">3.</span><span style="text-indent: 0em;background-color: rgba(27, 31, 35, 0.05);color: rgb(30, 107, 184);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;font-size: 14px;letter-spacing: 0em;text-align: left;word-spacing: 0em;">MAP_AGG</span><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">：接收 expr1 作为键，expr2 作为对应的值，返回一个 MAP</span><br  /></p><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/sql-manual/sql-functions/aggregate-functions/map-agg/</span></p></blockquote><h2 style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">负载管理</span></strong></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><section style="margin-top: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;">01&nbsp; 资源硬隔离</span></strong></span><br  /></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在 Apache Doris 2.0 版本我们引入了 Workload Group，可以实现对 CPU 资源的软限制。Workload Group 软限的优点是可以提升资源的利用率，但同时也会带来查询延迟的不确定性，这对那些期望</span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);color: rgb(0, 0, 0);">查询性能稳定性</span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">的用户来说是难以接受的。因此在 Apache Doris 2.1 版本中我们对 Workload Group 实现了 CPU 硬限，即无论当前物理机的整体CPU是否空闲，配置了硬限的 Group 最大 CPU 用量不能超过配置的值。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">这意味着不管单机的资源是否充足，该 Workload Group 的最大可用 CPU 资源都是固定的，只要用户的查询负载不发生大的变化，那么查询性能就会相对稳定。由于影响一个查询性能稳定性的因素很多，除了 CPU之外，内存、IO 以及软件层面的资源竞争也都会产生影响，因此当集群的负载在空闲和满载之间切换时，即使配置了 CPU 的硬限，查询性能的稳定性也会产生波动，但是预期的表现应该是优于软限制。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">注意事项</span></strong></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Doris 2.0 版本的 CPU 隔离是基于优先级队列实现的，而在 2.1 版本中 Apache Doris 是基于 CGroup 实现了 CPU 资源的隔离，因此从 2.0 版本升级到 2.1 版本时，需要在使用前完成 CGroup 的配置，详细注意事项参考官网文档。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">目前 Workload Group 支持的工作负载类型包括查询的隔离以及导入与查询之间的隔离，需要注意的是如果期望对导入负载进行彻底的限制，那么需要开启 MemTable 前移。</span></section></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">用户需要通过开关指定当前集群的 CPU 限制模式是软限还是硬限，暂不支持两种模式同时运行，两种模式的切换可以参考官网文档，后续我们也会根据用户的实际需求决定是否要同时支持这两种模式。</span><br  /></p></li></ul><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/admin-manual/workload-group/</span></p></blockquote><h3 style="margin-top: 32px;"><span style="color: rgb(0, 101, 253);"><strong><span style="letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;">02&nbsp; TopSQL</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">当集群出现预期外的大查询导致集群整体负载上升、查询可用性下降时，用户难以快速找到这些大查询并进行相应的降级操作。因此在 Apache Doris 2.1 版本中我们支持了运行时查看 SQL 资源用量的功能，具体指标如下：</span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">mysql&nbsp;[(none)]&gt;desc&nbsp;function&nbsp;active_queries();<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">------------------------+--------+------+-------+---------+-------+</span><br  />|&nbsp;Field&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Type&nbsp;&nbsp;&nbsp;|&nbsp;Null&nbsp;|&nbsp;Key&nbsp;&nbsp;&nbsp;|&nbsp;Default&nbsp;|&nbsp;Extra&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">------------------------+--------+------+-------+---------+-------+</span><br  />|&nbsp;BeHost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;BePort&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;QueryId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;StartTime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;QueryTimeMs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;WorkloadGroupId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;QueryCpuTimeMs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;ScanRows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;ScanBytes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;BePeakMemoryBytes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;CurrentUsedMemoryBytes&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;ShuffleSendBytes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;ShuffleSendRows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;BIGINT&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;Database&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;FrontendInstance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />|&nbsp;Sql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;TEXT&nbsp;&nbsp;&nbsp;|&nbsp;No&nbsp;&nbsp;&nbsp;|&nbsp;false&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NONE&nbsp;&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">------------------------+--------+------+-------+---------+-------+</span></code></pre></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><p data-tool="mdnice编辑器" style="line-height: 1.8em;letter-spacing: 0em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><code style="color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">active_queries()</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-align: justify;color: rgba(0, 0, 0, 0.9);">函数记录了查询在各个 BE 上运行时的审计信息，该函数可以当做普通的 Doris 表来看待，支持查询、谓词过滤、排序和 Join 等操作。常用的指标包括 SQL 的运行时间、CPU 时间、单 BE 的峰值内存、Scan 的数据量以及 Shuffle 的数据量，也可以从 BE 的粒度做上卷，查看 SQL 全局的资源用量。</span></p></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">需要注意的是这里只显示运行时的 SQL，查询结束的 SQL 不会在这里显示，而是写入审计日志中（目前主要是fe.audit.log）。常用的 SQL 如下：</span></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">查看集群中目前运行时间最久的n个sql<br  /><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;QueryId,<span style="color: #c678dd;line-height: 26px;">max</span>(QueryTimeMs)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;query_time&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;QueryId&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;query_time&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span>;<br  /><br  />查看目前集群中CPU耗时最长的n个sql<br  /><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;QueryId,&nbsp;<span style="color: #c678dd;line-height: 26px;">sum</span>(QueryCpuTimeMs)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;cpu_time&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;QueryId&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;cpu_time&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span><br  /><br  />查看目前集群中<span style="color: #c678dd;line-height: 26px;">scan</span>行数最多的n个<span style="color: #c678dd;line-height: 26px;">sql</span>以及他们的运行时间<br  /><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;t1.QueryId,t1.scan_rows,&nbsp;t2.query_time&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;(<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;QueryId,&nbsp;<span style="color: #c678dd;line-height: 26px;">sum</span>(ScanRows)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;scan_rows&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;QueryId&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;scan_rows&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span>)&nbsp;t1&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">left</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">join</span>&nbsp;(<span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;QueryId,<span style="color: #c678dd;line-height: 26px;">max</span>(QueryTimeMs)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;query_time&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;QueryId)&nbsp;t2&nbsp;<span style="color: #c678dd;line-height: 26px;">on</span>&nbsp;t1.QueryId&nbsp;=&nbsp;t2.QueryId<br  />&nbsp;&nbsp;&nbsp;&nbsp;<br  />查看目前各个BE的负载情况，按照CPU时间/<span style="color: #c678dd;line-height: 26px;">scan</span>行数/shuffle字节数降序排列<br  /><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;BeHost,<span style="color: #c678dd;line-height: 26px;">sum</span>(QueryCpuTimeMs)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;query_cpu_time,&nbsp;<span style="color: #c678dd;line-height: 26px;">sum</span>(ScanRows)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;scan_rows,<span style="color: #c678dd;line-height: 26px;">sum</span>(ShuffleSendBytes)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;shuffle_bytes&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;BeHost&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;query_cpu_time&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>,scan_rows&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;,shuffle_bytes&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span><br  /><br  />查看单BE峰值内存最高的N个<span style="color: #c678dd;line-height: 26px;">sql</span><br  /><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;QueryId,<span style="color: #c678dd;line-height: 26px;">max</span>(BePeakMemoryBytes)&nbsp;<span style="color: #c678dd;line-height: 26px;">as</span>&nbsp;be_peak_mem&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;active_queries()&nbsp;<span style="color: #c678dd;line-height: 26px;">group</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;QueryId&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;be_peak_mem&nbsp;<span style="color: #c678dd;line-height: 26px;">desc</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">limit</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">10</span>;<br  /></code></pre></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="letter-spacing: 0.578px;text-decoration: none;font-size: 14px;">目前主要展示的负载类型包括 Select 和</span><code><span style="letter-spacing: 0.578px;text-decoration: none;font-size: 14px;">Insert Into……Select</span></code><span style="letter-spacing: 0.578px;text-decoration: none;font-size: 14px;">，预计在 2.1 版本之上的三位迭代版本中会支持 Stream Load 和 Broker Load 的资源用量展示。</span></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">参考文档：https://doris.apache.org/zh-CN/docs/sql-manual/sql-functions/table-functions/active_queries/</span></p></blockquote><pre style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><p style="text-align: justify;margin: 40px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="font-size: 16px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="color: rgb(42, 100, 246);font-size: 24px;letter-spacing: 0.816px;text-decoration-style: solid;text-decoration-color: rgb(42, 100, 246);">其他</span></strong></p><section style="text-align: justify;margin: 24px 0px 32px;text-indent: 0em;line-height: 1.6em;"><strong style="color: rgb(0, 101, 253);font-size: 16px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.034em;"><span style="letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;">01&nbsp; Decimal256</span></strong><br  /></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">为了更好的满足金融类或者财务类客户以及一些高端制造业客户对于数字类型进行精确计算的需求，2.1 新版本中提供了更高精度的 Decimal 数据类型，最高支持 76 位有效数字（该类型处于 Experimental 状态，需要手工开启配置项 set enable_decimal256=true 才能使用)。</span></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">示例：</span></strong></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">CREATE</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">TABLE</span>&nbsp;<span style="color: #98c379;line-height: 26px;">`test_arithmetic_expressions_256`</span>&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k1&nbsp;<span style="color: #e6c07b;line-height: 26px;">decimal</span>(<span style="color: #d19a66;line-height: 26px;">76</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">30</span>),<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k2&nbsp;<span style="color: #e6c07b;line-height: 26px;">decimal</span>(<span style="color: #d19a66;line-height: 26px;">76</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">30</span>)<br  />&nbsp;&nbsp;&nbsp;&nbsp;)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DISTRIBUTED</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">BY</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">HASH</span>(k1)<br  />&nbsp;&nbsp;&nbsp;&nbsp;PROPERTIES&nbsp;(<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #98c379;line-height: 26px;">"replication_num"</span>&nbsp;=&nbsp;<span style="color: #98c379;line-height: 26px;">"1"</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;);<br  /><br  /><span style="color: #c678dd;line-height: 26px;">insert</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">into</span>&nbsp;test_arithmetic_expressions_256&nbsp;<span style="color: #c678dd;line-height: 26px;">values</span><br  />&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">1.000000000000000000000000000001</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">9999999999999999999999999999999999999999999998.999999999999999999999999999998</span>),<br  />&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">2.100000000000000000000000000001</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">4999999999999999999999999999999999999999999999.899999999999999999999999999998</span>),<br  />&nbsp;&nbsp;(<span style="color: #d19a66;line-height: 26px;">3.666666666666666666666666666666</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">3333333333333333333333333333333333333333333333.333333333333333333333333333333</span>);<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: var(--articleFontsize);letter-spacing: 0.034em;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-indent: 0em;">查询语句及结果：</span></strong><br  /></section><pre><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;"><span style="color: #c678dd;line-height: 26px;">select</span>&nbsp;k1,&nbsp;k2,&nbsp;k1&nbsp;+&nbsp;k2&nbsp;a&nbsp;<span style="color: #c678dd;line-height: 26px;">from</span>&nbsp;test_arithmetic_expressions_256&nbsp;<span style="color: #c678dd;line-height: 26px;">order</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">by</span>&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>,&nbsp;<span style="color: #d19a66;line-height: 26px;">2</span>;<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><br  />|&nbsp;k1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;k2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><br  />|&nbsp;1.000000000000000000000000000001&nbsp;|&nbsp;9999999999999999999999999999999999999999999998.999999999999999999999999999998&nbsp;|&nbsp;9999999999999999999999999999999999999999999999.999999999999999999999999999999&nbsp;|<br  />|&nbsp;2.100000000000000000000000000001&nbsp;|&nbsp;4999999999999999999999999999999999999999999999.899999999999999999999999999998&nbsp;|&nbsp;5000000000000000000000000000000000000000000001.999999999999999999999999999999&nbsp;|<br  />|&nbsp;3.666666666666666666666666666666&nbsp;|&nbsp;3333333333333333333333333333333333333333333333.333333333333333333333333333333&nbsp;|&nbsp;3333333333333333333333333333333333333333333336.999999999999999999999999999999&nbsp;|<br  />+<span style="color: #5c6370;font-style: italic;line-height: 26px;">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><br  />3&nbsp;rows&nbsp;in&nbsp;<span style="color: #c678dd;line-height: 26px;">set</span>&nbsp;(<span style="color: #d19a66;line-height: 26px;">0.09</span>&nbsp;sec)<br  /></code></pre></section><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><code data-wrap="false"></code></section></pre><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">注意事项：</span></strong><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">Decimal256 类型对于计算 CPU 的消耗更高，因此在性能上会有一些损耗。</span></section><h3 style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="color: rgb(0, 101, 253);"><strong><span style="letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;">02&nbsp; 任务</span></strong><strong><span style="letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;">调度 Job Scheduler</span></strong></span></h3><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">同社区用户多次交流中，我们发现许多场景下用户使用 Apache Doris 时都存在定时调度的需求，例如：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">周期性的 Backup；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">过期数据定时清理；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">周期性的导入任务，如定时通过 Catalog 的方式去进行增量或全量数据同步；</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">定期 ETL，如部分用户定期从宽表中 Load 数据至指定表、从明细表中定时拉取数据存至聚合表、ODS 层表定时打宽并写入原有宽表更新；</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">尽管诸如 Airflow、DolphinScheduler 等可供选择的外部调度系统非常多，但仍面临一致性的问题——在极端情况下，外部调度系统触发 Doris 导入任务并执行成功，因意外情况忽然宕机时，外部调度系统无法正确获取执行结果，会认为此次调度失败，导致触发调度系统的容错机制，通常是重试或者直接失败。而无论采用哪种策略，最终都会导致以下几个情况发生：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">资源浪费：由于调度系统误认为任务失败，可能会重新调度执行已经成功的任务，导致不必要的资源消耗。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">数据重复或丢失：如果调度系统选择重试导入任务，可能导致数据重复导入，造成数据冗余和不一致。另一方面，如果调度系统直接标记任务为失败，可能导致实际已成功导入的数据被忽略或丢失。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">时间延误：由于调度系统的容错机制被触发，可能需要进行额外的任务调度和重试，导致整体数据处理时间延长，影响业务效率和响应速度。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">系统稳定性下降：频繁的重试或直接失败可能导致调度系统和 Doris 的负载增加，进而影响系统的稳定性和性能。</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">因此我们在 Apache Doris 2.1 版本中引入了 Job Scheduler 功能并具备了自行任务调度的能力。Doris Job Scheduler 是根据既定计划运行的任务，用于在特定时间或指定时间间隔触发预定义的操作，从而帮助我们自动执行一些任务。从功能上来讲，它类似于操作系统上的定时任务（如：Linux 中的 cron、Windows 中的计划任务），但 Doris 的 Job 调度可以精确到秒级。对于导入场景，我们能够做到完全的一致性保障。除此之外，Doris 内置的 Jon Scheduler 还具有以下特点：</span></section><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">高效调度：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Job Scheduler 可以在指定的时间间隔内安排任务和事件，确保数据处理的高效性。采用时间轮算法保证事件能够精准做到秒级触发。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">灵活调度：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Job Scheduler 提供了多种调度选项，如按 分、小时、天或周的间隔进行调度，同时支持一次性调度以及循环（周期）事件调度，并且周期调度也可以指定开始时间、结束时间。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">事件池和高性能处理队列：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Job Scheduler 采用 Disruptor 实现高性能的生产消费者模型，最大可能的避免任务执行过载。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">调度记录可追溯：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Job Scheduler 会存储最新的 Task 执行记录（可配置），通过简单的命令即可查看任务执行记录，确保过程可追溯。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="color: rgb(0, 101, 253);"><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">高可用：</span></strong></span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">依托于 Doris 自身的高可用机制，Job 可以很轻松的做到自恢复，高可用。</span></section></li></ul><section style="line-height: 1.6em;text-align: justify;margin: 24px 0px;text-indent: 0em;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">在此我们创建一个定时调度任务作为示例：</span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, &quot;Microsoft YaHei&quot;, PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;"><pre data-tool="mdnice编辑器" style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;font-size: 12px;">//&nbsp;从&nbsp;&nbsp;2023-11-17&nbsp;起每天定时执行&nbsp;<span style="color: #c678dd;line-height: 26px;">insert</span>语句直到&nbsp;<span style="color: #d19a66;line-height: 26px;">2038</span>&nbsp;年结束<br  /><span style="color: #c678dd;line-height: 26px;">CREATE</span><br  />JOB&nbsp;e_daily<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">ON</span>&nbsp;SCHEDULE<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EVERY&nbsp;<span style="color: #d19a66;line-height: 26px;">1</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">DAY</span>&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STARTS&nbsp;<span style="color: #98c379;line-height: 26px;">'2023-11-17&nbsp;23:59:00'</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDS&nbsp;<span style="color: #98c379;line-height: 26px;">'2038-01-19&nbsp;03:14:07'</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">COMMENT</span>&nbsp;<span style="color: #98c379;line-height: 26px;">'Saves&nbsp;total&nbsp;number&nbsp;of&nbsp;sessions'</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">DO</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">INSERT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">INTO</span>&nbsp;site_activity.totals&nbsp;(<span style="color: #e6c07b;line-height: 26px;">time</span>,&nbsp;total)<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">SELECT</span>&nbsp;<span style="color: #c678dd;line-height: 26px;">CURRENT_TIMESTAMP</span>,&nbsp;<span style="color: #c678dd;line-height: 26px;">COUNT</span>(*)<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #c678dd;line-height: 26px;">FROM</span>&nbsp;site_activity.sessions&nbsp;<span style="color: #c678dd;line-height: 26px;">where</span>&nbsp;create_time&nbsp;&gt;=&nbsp;&nbsp;days_add(<span style="color: #c678dd;line-height: 26px;">now</span>(),<span style="color: #d19a66;line-height: 26px;">-1</span>)&nbsp;;<br  /><br  /></code></pre></section><blockquote data-type="quote_container"><p style="text-align: left;"><span style="font-size: 14px;">注意：当前 Job Scheduler 仅支持 Insert 内表，参考文档：https://doris.apache.org/zh-CN/docs/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB</span></p></blockquote><h2 style="line-height: 1.6em;text-align: justify;margin: 40px 0px 24px;text-indent: 0em;"><span style="font-size: 28px;color: rgb(0, 101, 253);"><strong><span style="font-size: 28px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Behavior Changed</span></strong></span></h2><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><ul class="list-paddingleft-1" style="list-style-type: square;"><li><section style="margin-top: 24px;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">Unique Key 模型默认开启 Merge On Write 写时合并，新创建的 Unique Key 模型的表将自动设置</span><code style="text-indent: 0em;letter-spacing: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">enable_unique_key_merge_on_write=true</code><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;">。</span><br  /></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">倒排索引 Invert Index 经过一年多时间的打磨，已实现了对原本的位图索引 Bitmap Index 功能和场景的全覆盖，且功能上和性能上都大幅优于原本的位图索引 Bitmap Index，因此从 Apache Doris 2.1 版本起，我们将默认停止对位图索引 Bitmap Index 的支持，已经创建的位图索引保持不变将继续生效，不允许创建新的位图索引，在未来我们将会移除位图索引的相关代码。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">cpu_resource_limit</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">不再支持，其本身是限制 BE 上 Scanner 线程数目的功能，而 Workload Group 也能支持设置 BE Scanner 线程数目，所以已设置的</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">cpu_resource_limit</code><span style="text-indent: 0em;word-spacing: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">将失效。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Segment Compaction 主要应对单批次大数据量的导入，可以在同一批次数据中进行多个 Segment 的 Compaction 操作，在 2.1 版本开始 Segment Compaction 将默认开启，</span><code style="letter-spacing: 0em;text-indent: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">enable_segcompaction&nbsp;</code><span style="text-indent: 0em;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">默认值设置为 True。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none solid rgba(0, 0, 0, 0.9);">Audit Log 插件</span></section></li><ul class="list-paddingleft-1" style="list-style-type: circle;"><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">从 2.1 版本开始，Apache Doris 开始内置 Audit Log 审计日志插件，用户只需通过设置全局变量</span><code style="text-indent: 0em;letter-spacing: 0em;text-align: left;word-spacing: 0em;color: rgb(30, 107, 184);font-size: 14px;line-height: 1.8em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;">enable_audit_plugin</code><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);">开启或关闭审计日志功能。</span></section></li><li><section style="line-height: 1.6em;text-align: justify;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;word-spacing: 0em;font-size: 14px;letter-spacing: 1px;">对于之前已经安装过审计日志插件的用户，升级后可以继续使用原有插件，也可以通过 uninstall 命令卸载原有插件后，使用新的插件。但注意，切换插件后，审计日志表也将切换到新的表中。</span></section></li><li><section style="line-height: 1.6em;text-align: left;text-indent: 0em;margin-top: 24px;margin-bottom: 24px;"><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;">具体可参阅：</span><span style="text-indent: 0em;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;letter-spacing: 1px;text-decoration-style: solid;text-decoration-color: rgba(0, 0, 0, 0.9);color: rgb(136, 136, 136);">https://doris.apache.org/docs/ecosystem/audit-plugin/</span></section></li></ul></ul><section mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: normal;orphans: 2;text-align: justify;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;outline: 0px;color: rgb(34, 34, 34);font-size: 14.875px;text-size-adjust: auto;letter-spacing: 0.544px;font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);line-height: 23.625px;visibility: visible;"><section powered-by="xiumi.us" mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 23.625px;visibility: visible;font-size: 14.875px;"><section mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 23.625px;visibility: visible;font-size: 14.875px;"><section powered-by="xiumi.us" mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 23.625px;visibility: visible;font-size: 14.875px;"><section data-role="outer" label="Powered by 135editor.com" mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 23.625px;visibility: visible;font-size: 14.875px;"><section data-tools="135编辑器" data-id="98469" mp-original-font-size="17" mp-original-line-height="27" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 23.625px;visibility: visible;font-size: 14.875px;"><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" mp-original-font-size="16" mp-original-line-height="25" style="margin: 0px;padding: 0px 10px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;font-size: 14px;color: black;line-height: 21.875px;letter-spacing: 0px;word-break: break-word;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;visibility: visible;"><blockquote data-tool="mdnice编辑器" mp-original-font-size="14.399999618530273" mp-original-line-height="23" style="margin: 20px 0px;padding: 10px 10px 10px 20px;border-left: 3px solid rgb(239, 112, 96);color: rgb(106, 115, 125);line-height: 20.125px;font-size: 12.6px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;border-top-style: none;border-right-style: none;border-bottom-style: none;overflow: auto;background-color: rgb(255, 249, 249);visibility: visible;"><p mp-original-font-size="16" mp-original-line-height="26" style="margin: 0px;padding: 8px 0px;clear: both;min-height: 1em;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;font-size: 14px;color: black;line-height: 22.75px;visibility: visible;"><span mp-original-font-size="14" mp-original-line-height="26" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: normal;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;color: rgb(89, 89, 89);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;letter-spacing: 0.544px;text-align: left;font-size: 12.25px;visibility: visible;line-height: 22.75px;"><strong mp-original-font-size="14" mp-original-line-height="26" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;visibility: visible;font-size: 12.25px;line-height: 22.75px;"><img class="rich_pages wxw-img" data-ratio="1" data-type="png" data-w="64" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/14_6VyhjNCMic3DGmPLZocTtEmtWBJKsQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/UdK9ByfMT2OP8CL6Mmrc9shxR4OiamrPMlRCKiaicf2n4JLNDRcyH1jfEKxo6VyhjNCMic3DGmPLZocTtEmtWBJKsQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1'" style="margin: 0px;padding: 0px;max-width: 100%;height: auto !important;overflow-wrap: break-word !important;vertical-align: text-bottom;outline: 0px;display: inline-block;font-size: 10.7188px;line-height: 19.9062px;box-sizing: border-box !important;visibility: visible !important;width: 20px !important;" data-imgfileid="100037858"  /><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247518343&amp;idx=1&amp;sn=eaf44bee8c4d90aedd508201475b57a9&amp;chksm=fd3ece12ca494704cdf02300bbfe39c1d4245ac30f41aba3065efe66eb9aa453a23e0b6dae6e&amp;scene=21#wechat_redirect" textvalue="300万字！全网最全大数据学‍习面试社区等你来！" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2"><strong style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><span style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-size: 14px;color: rgb(255, 41, 65);">300万字！全网最全大数据学习面试社区等你来！</span></strong></a></strong></span></p></blockquote></section></section></section></section></section></section></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin: 0px;padding: 0px 10px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;line-height: 1.6;letter-spacing: 0.034em;color: rgb(63, 63, 63);font-size: 16px;"><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section mp-original-font-size="14" mp-original-line-height="24.5" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;font-style: normal;font-variant-caps: normal;font-weight: normal;letter-spacing: 0.476px;text-indent: 0px;text-transform: none;white-space: normal;word-spacing: 0px;text-size-adjust: auto;-webkit-text-stroke: 0px rgb(178, 178, 178);font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 12.25px;font-family: &quot;Helvetica Neue&quot;;text-align: center;color: rgb(178, 178, 178);background-color: rgb(255, 255, 255);line-height: 21.4375px;visibility: visible;"><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section mp-original-font-size="14" mp-original-line-height="24.5" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;font-style: normal;font-variant-caps: normal;font-weight: normal;letter-spacing: 0.476px;text-indent: 0px;text-transform: none;white-space: normal;word-spacing: 0px;text-size-adjust: auto;-webkit-text-stroke: 0px rgb(178, 178, 178);font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 12.25px;font-family: &quot;Helvetica Neue&quot;;text-align: center;color: rgb(178, 178, 178);background-color: rgb(255, 255, 255);line-height: 21.4375px;visibility: visible;"><span style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;color: rgb(74, 74, 74);font-size: 15px;">如果这个文章对你有帮助，不要忘记&nbsp;</span><span style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;outline: 0px;font-size: 15px;color: rgb(255, 104, 39);"><strong style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 1.75em;">「在看」</strong>&nbsp;<strong style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 1.75em;">「点赞」</strong>&nbsp;<strong style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;outline: 0px;line-height: 1.75em;">「收藏」</strong></span><span style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;color: rgb(74, 74, 74);font-size: 15px;">&nbsp;三连啊喂！</span><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><p style="text-align: center;"><img class="rich_pages wxw-img" data-galleryid="" data-imgfileid="100037859" data-ratio="1.215625" data-s="300,640" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/15_jNJdvwuULcOtMEU3DFFESPHpbU8Hdg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/UdK9ByfMT2PDwSDUx452DKyaUxtxDoz47He3aCnMeSE9wLtZJwcdOFU6jNJdvwuULcOtMEU3DFFESPHpbU8Hdg/640?wx_fmt=png'" data-type="png" data-w="640" style="width: 241px;height: 293px;"  /></p><p style="margin: 0px 0px 0em;padding: 0px;clear: both;min-height: 1em;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;text-align: center;"><span style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;background-color: rgb(255, 255, 255);color: rgb(136, 136, 136);font-family: &quot;Helvetica Neue&quot;;font-size: 13px;letter-spacing: 1px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;"></span></p></section></section><section style="margin: 0px;padding: 0px;max-width: 100%;color: rgb(51, 51, 51);font-family: mp-quote, -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: normal;orphans: 2;text-align: justify;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-role="outer" label="Powered by 135editor.com" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-tools="135编辑器" data-id="98469" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section hm_fix="349:393" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages wxw-img" data-ratio="0.10979228486646884" src="图片/大数据技术与架构_2024-03-18_「转」Apache Doris 210 版本发布，复杂查询性能提升 100%！/16_zrkyKUN5kNeUFicVC3bMP1GEqKz1OQ.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/BSBqCXrZtzAicMToibKuIysLrB62M5A5YaLhZg6z86tI7ZeEZqTLLYyNrmlzrkyKUN5kNeUFicVC3bMP1GEqKz1OQ/640?wx_fmt=jpeg'" data-type="jpeg" data-w="1011" style="margin: 0px;padding: 0px;max-width: 100%;height: 42px;overflow-wrap: break-word !important;vertical-align: bottom;color: rgb(136, 136, 136);font-family: &quot;Helvetica Neue&quot;;font-size: 13px;letter-spacing: 1px;-webkit-text-stroke-color: rgb(136, 136, 136);box-sizing: border-box;width: 384px;" data-imgfileid="100037857"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-role="outer" label="Powered by 135editor.com" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-tools="135编辑器" data-id="98469" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section hm_fix="349:393" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247510040&amp;idx=1&amp;sn=aa335f25965975731173916f012d56f4&amp;chksm=fd3eee8dca49679b82f632048fb64d21fac01497d1a0fe33917edb01e194caf0f9a1930a55ce&amp;scene=21#wechat_redirect" textvalue="2022年全网首发|大数据专家级技能模型与学习指南(胜天半子篇)" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;">全网首发|大数据专家级技能模型与学习指南(胜天半子篇)</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247508317&amp;idx=1&amp;sn=0bcb7fb6997b42306994b890eaa0d47f&amp;chksm=fd3ee7c8ca496ede347a2971002c6ea68dcfd70abeeb90b43c8b02a2a60ebc7cec3a87ef7d52&amp;scene=21#wechat_redirect" textvalue="互联网最坏的时代可能真的来了" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">互联网最坏的时代可能真的来了</a><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247507860&amp;idx=1&amp;sn=807ac5003762f29c127bc4071dcebe33&amp;chksm=fd3e9901ca4910178cfc816043ea86c29f881f70cd943d252de9ae2e21cb7e8ba80bff162e1b&amp;scene=21#wechat_redirect" textvalue="我在B站读大学，大数据专业" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">我在B站读大学，大数据专业</a><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247499604&amp;idx=1&amp;sn=d938dfb30d221774704982d2938b30c1&amp;chksm=fd3eb9c1ca4930d76a391241333de461ca22d2aa27472eab3cffab1564872ae37f1b48fe2d3c&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">我们在学习Flink的时候，到底在学习什么？</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504856&amp;idx=2&amp;sn=6f62e2a0c756ce56773eed253d2f41ee&amp;chksm=fd3e954dca491c5b732b7e2aa46db32efbc3f690e528522098659bb3c6e78e1582ab4529b5dc&amp;scene=21#wechat_redirect" data-itemshowtype="11" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">193篇文章暴揍Flink，这个合集你需要关注一下</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504742&amp;idx=1&amp;sn=8765c198d8ad66219a7bcabb221e4a23&amp;chksm=fd3e95f3ca491ce52d0724b9e4154a47af0f5ea349e1e184c8fbc65aa17c0000242aa9b58429&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;">Flink生产环境TOP难题与优化，阿里巴巴藏经阁YYDS</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504813&amp;idx=1&amp;sn=f5cd6ae2aa2b1e30f87a5ae55971c514&amp;chksm=fd3e9538ca491c2eb191677d070f2c7e4f1098eece00e256d6205b8a5d21b21c1e74f875f16f&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">Flink CDC我吃定了耶稣也留不住他！| Flink CDC线上问题小盘点</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&amp;mid=2247492567&amp;idx=1&amp;sn=1f693e549f76622725b936041ff8896e&amp;chksm=e9bff2fbdec87bedecbdeed4547d7d612c72fc8d4918614a26a4e31666cf0128fd57b537f347&amp;scene=21#wechat_redirect" data-itemshowtype="11" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">我们在学习Spark的时候，到底在学习什么？</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504834&amp;idx=1&amp;sn=46ca1a3924b8fdb89ac1c2acb0319d6c&amp;chksm=fd3e9557ca491c41d837b917639ea62007ea16d3c2cc6c0c02d1f8a8c6e44318f5183b787c46&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;letter-spacing: 0.544px;">在所有Spark模块中，我愿称SparkSQL为最强！</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247502750&amp;idx=1&amp;sn=bd9a9173d060dc4e4ebd49c8efc6acfe&amp;chksm=fd3e8d0bca49041dea84da93910e5efdc4935e520525c09887c986691377aeb48e5cf7fb5667&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">硬刚Hive | 4万字基础调优面试小总结</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504382&amp;idx=2&amp;sn=550b78802acfe727e0e77cd9195f8784&amp;chksm=fd3e976bca491e7db2b8b2446d231736df01bbf13653804d680ac4390597ec17fa466ad4ae83&amp;scene=21#wechat_redirect" data-itemshowtype="11" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">数据治理方法论和实践小百科全书</a><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247503741&amp;idx=1&amp;sn=e5039be93123f2e337013756a818bfc3&amp;chksm=fd3e89e8ca4900fe603b63c5722a6fb8a32bd63d6ba23e0028851948a71b877eb1f742d95087&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">标签体系下的用户画像建设小指南</a><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247503675&amp;idx=1&amp;sn=3ee6af64d0126c78b48cad219308f81e&amp;chksm=fd3e89aeca4900b8b8954e9569ee3c0877881fac8c792bfafc22e7e9d3e8524da8eb860d33d8&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;">4万字长文 | ClickHouse基础&amp;实践&amp;调优全视角解析</a><br style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&amp;mid=2247492567&amp;idx=2&amp;sn=57ecc77718f1b6f2f262d62e8318dcc9&amp;chksm=e9bff2fbdec87bedb1986765bfae7dbabb9aece45b0b2af147bbad1ac5d79ebc934c64df40ea&amp;scene=21#wechat_redirect" data-itemshowtype="11" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">【面试&amp;个人成长】社招和校招的经验之谈</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504478&amp;idx=1&amp;sn=14efef3868ba42bd044f9618745a7fdc&amp;chksm=fd3e94cbca491dddb961b7b8b93105b2869c5bcf4c03f9f0dc83ad62be0dce4c124b52ed0ba3&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">大数据方向另一个十年开启 |《硬刚系列》第一版完结</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);background-color: rgb(255, 255, 255);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504410&amp;idx=1&amp;sn=7e81ab5a324395eb0f12397c40247ca1&amp;chksm=fd3e948fca491d9946456acbd93b2d651ae4d7a7d0127a211981e08f50f377e60d1b7c0d7b3a&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">我写过的关于成长/面试/职场进阶的文章</a></section><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section powered-by="xiumi.us" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-role="outer" label="Powered by 135editor.com" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-tools="135编辑器" data-id="98469" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section hm_fix="349:393" style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section style="margin: 0px;padding: 0px;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;font-variant-numeric: normal;font-variant-east-asian: normal;font-stretch: normal;font-size: 13px;font-family: &quot;Helvetica Neue&quot;;letter-spacing: 0.544px;-webkit-text-stroke-color: rgb(136, 136, 136);text-align: left;color: rgb(136, 136, 136);line-height: 3em;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzU3MzgwNTU2Mg==&amp;mid=2247504783&amp;idx=1&amp;sn=72aed147a459368ed934a007a2df3bc9&amp;chksm=fd3e951aca491c0cade212390011eca7d8a68951fee6aa2844b8f4d14bcbd5b3ed26305d69dc&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="margin: 0px;padding: 0px;color: rgb(87, 107, 149);text-decoration: none;max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;">当我们在学习Hive的时候在学习什么？「硬刚Hive续集」</a></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section></section><section style="display: none;line-height: 1.75em;"><br  /></section><p style="display: none;"><mp-style-type data-value="3"></mp-style-type></p></content>
</div>
</body>
</html>