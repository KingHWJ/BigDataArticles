<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"数据治理体系","title":"数据仓库基础知识","time":"2021-12-16 07:17:45","timeStamp":"1639610265"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247485206&idx=1&sn=2f5aab2ac704af117b6bfb5ca5312ae5&chksm=9f65146da8129d7b76559228e7effc86ac234eb70cd7049b270403c3e5422cd468f21d30fd97#rd" target="_blank">数据仓库基础知识</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_text">巡山猫&nbsp;&nbsp;</span><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">数据治理体系&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2021-12-16 07:17:45</em></div><content><div class="reprint"><p>转自公众号：巡山猫说数据<br><a href="http://mp.weixin.qq.com/s?__biz=Mzg3NjUzMDI0MQ==&mid=2247483891&idx=1&sn=64bed3047ecf22854d88f45fe14ba1c1" target="_blank" title="阅读原文">http://mp.weixin.qq.com/s?__biz=Mzg3NjUzMDI0MQ==&mid=2247483891&idx=1&sn=64bed3047ecf22854d88f45fe14ba1c1</a></p></div><p style="margin-right: 1em;margin-left: 1em;white-space: normal;" data-mpa-powered-by="yiban.io"><br  /></p><h2 mpa-is-content="t" style="margin: 5px 1em;padding-right: 10px;padding-left: 10px;white-space: normal;letter-spacing: 0.5px;border-left: 5px solid rgb(55, 92, 82);line-height: 32px;color: rgb(55, 92, 82);text-align: left;"><span style="font-size: 18px;"><strong>什么是数据仓库？</strong></span></h2><p style="margin-right: 1em;margin-left: 1em;white-space: normal;"><br  /></p><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">数仓，DataWarehouse，是一个 </span><span style="font-size: 15px;"><strong><span style="color: rgb(255, 169, 0);">面向主题的、集成的、稳定的、与时间相关的</span></strong></span><span style="font-size: 17px;"><strong><span style="color: rgb(255, 169, 0);">&nbsp;</span></strong></span><span style="font-size: 15px;">数据集合。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">而</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 15px;">这个数据集合的建立，是为了支持管理者的决策过程。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">也就是说，我们通过建设数仓，为业务中的流程改进、成本计算，产出收入等环节，提供相应的决策指导及流程监控。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><h2 mpa-is-content="t" style="margin: 5px 1em;padding-right: 10px;padding-left: 10px;white-space: normal;letter-spacing: 0.5px;border-left: 5px solid rgb(55, 92, 82);line-height: 32px;color: rgb(55, 92, 82);text-align: left;"><span style="font-size: 18px;"><strong>数仓有什么特点？</strong></span></h2><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"></span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• 面向主题性</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 15px;color: rgb(255, 169, 0);">数仓中的所有数据，都是面向特定的业务域而产生的。</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">比如，某电商APP，就会有面向用户的数仓，面向订单的数仓，面向商品的数仓</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">我们在建设数仓时，需要在较高层次上把业务拆分为各个域，我们用数据的方式，去定义了这个域，就有了数仓中的面向主题性。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• 集成性</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;"><br  /></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">面向主题性中我们说到，我们的数据需要对应不同的业务域。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">那每个业务域中的每个事件产生的数据，都会有最初的底层数据库。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">怎么通过这些数据库，抽取我们想要的业务域，集成一个</span><strong><span style="font-size: 15px;color: rgb(255, 169, 0);">可描述的，有层级的，完整的</span></strong><span style="font-size: 15px;">数据集合，就是数据仓库的建立过程。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">这个过程，其实就是抽取零散业务数据构建集合的过程。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">所以，数据仓库具有集成性。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• 稳定性</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;"><br  /></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">物理上，数据存储需要稳定性。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">业务上，我们要保证数仓建设的结构清晰，层次分明，从而保证整体数仓结构的稳定性。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">通俗来说，就是</span><strong><span style="font-size: 15px;color: rgb(255, 169, 0);">保证数仓结构不要频繁变更</span></strong><span style="font-size: 15px;">。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• 与时间强相关</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;"><br  /></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">从物理存储上说，数据仓库随着时间和业务的变化，会不断往里追加数据内容，也会不断删掉旧的数据内容。数仓中的每个表格，都会有对应的“生命周期”。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">从业务意义上说，数据仓库反应的是，某一段历史时间内，业务在数据上的表现情况。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><h2 mpa-is-content="t" style="margin: 5px 1em;padding-right: 10px;padding-left: 10px;white-space: normal;letter-spacing: 0.5px;border-left: 5px solid rgb(55, 92, 82);line-height: 32px;color: rgb(55, 92, 82);text-align: left;"><span style="font-size: 18px;"><strong>数仓的建设方式有哪些？</strong></span></h2><section style="margin-left: 16px;margin-right: 16px;"><br  /><span style="font-size: 15px;"></span></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• K模式</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;"><br  /></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">大家可以去搜索一下 Ralph Kimball 这个大佬，他提出的数据仓库架构中的 key模式（敏捷模式），即：关键个体角色目标驱动。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">这种方式总体来说，就是明确短期需求后，直接开干。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">因为直接开干，所以前期我们整体投入小，见效快。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">但是随着业务的发展和迭代，后期肯定需要重构。而重构的成本往往都很高。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;">• I模式</span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="font-size: 16px;"><br  /></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">这又是另一个大佬提出的架构理论，大家可以搜一下 Bill Inmon，他提出的information模式（瀑布模式），即：领域经验知识驱动。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">这个和K模式相反，强调前期强规划，一定要想清楚长期目标和需求，再干活。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">这种方式，前期投入的成本会高出很多，我们需要规划业务域，数据域，数据层次，表结构等等。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">但是后期，整体效果会比K模式好，只是前期见效慢。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">整体来说呢</span></section><section style="margin-left: 16px;margin-right: 16px;"><strong><span style="color: rgb(255, 169, 0);"><span style="color: rgb(255, 169, 0);font-size: 15px;">建议前期业务初步发展阶段，先用K模式，</span><span style="color: rgb(255, 169, 0);font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">但是也要有一个I模式的规划</span></span></strong></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"></span><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">即：</span><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">业务发展到什么节点，我们需要开始I模式的搭建。</span><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">这个需要有个明确的规划。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"></span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">笔者曾经就有 跑着K模式，后期重构了3次才全部切换成I模式的经历。</span><span style="font-size: 15px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">所以一定要提前做规划。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><h2 mpa-is-content="t" style="margin: 5px 1em;padding-right: 10px;padding-left: 10px;white-space: normal;letter-spacing: 0.5px;border-left: 5px solid rgb(55, 92, 82);line-height: 32px;color: rgb(55, 92, 82);text-align: left;"><span style="font-size: 18px;"><strong>数仓的层级有哪些？</strong></span></h2><section style="margin-left: 16px;margin-right: 16px;"><br  /><span style="font-size: 15px;"></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">开局先上图：</span></section><p style="text-align: center;"><img class="rich_pages wxw-img" data-ratio="1.0522088353413654" data-s="300,640" src="https://mmbiz.qpic.cn/sz_mmbiz_png/DDt1yPgbo4lxWZJnuMT0EINu5jtKdsx9RWBPLUEZQL2GwMnnc1ej3yibeXm73UtIF83Cwwrf2D3TKkoG5SAnKTA/640?wx_fmt=png" data-type="png" data-w="996" style="width: 390px;height: auto !important;"  /></p><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"></span><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">从图中我们可以看出，大致可以分为4层：ODS +&nbsp; DWD + DWS + ADS</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">其中，DWD 和 DWS 可以统一至 CDM层。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">当然，我们还需要对应的维度数据：DIM层</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">ODS层：操作数据层（Operational Data Store），基本上是数据的源头，我们在这一层只做简单的数据清洗，不做业务逻辑处理，存储所有我们能够存储且需要存储的数据。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">DWD层：明细数据层（Data Warehouse Detail），一般和ODS层一样，但是会采用维度退化的方法，将维度退化至事实表中，减少事实表格和维度表格的关联，提高表格的易用性。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">DWS层：汇总数据层（Data Warehouse Summary），按照主题划分，采用宽表化的手段，构建对应主题下的数据，用于后续业务的查询。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">ADS层：应用数据层（Application Data Store），主要存放数据需求中的个性化统计指标。这一层一般面向展示使用。不同需求下的，不同粒度的，个性化统计指标数据。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">DIM层：维度表，一般会有2种数据。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">一是业务相关的业务属性数据，如用户画像，商品价格。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">二是数据中的配置属性数据，如在某表格的 类型&nbsp; 字段中存储了A，A代表的具体的含义，可以在这种 配置属性数据 的维度表格中映射出来。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">分层咱们知道了，那么如何根据分层来构建规范的命名呢？</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">笔者抛砖引玉，提供一些参考。</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">我们在表名中，一般需要以下几个信息：</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">1. 所属业务域：是什么业务线？是什么产品线？</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">2. 所属主题域：是业务域中的用户数据？还是订单数据？</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">3. 数据分层：在ODS/DWD/DWS/ADS/DIM中属于哪一层？</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">4. 存储粒度：是全量还是增量？增量周期是多少？</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">5. 自定义标签：当前数据的业务过程定义</span></section><section style="margin-left: 16px;margin-right: 16px;">... ...&nbsp;<br  /></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">举个例子（以某淘中的订单优惠券数据为例）：</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">mtao_dwd_orders_coupon_day</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">业务域 + 数据分层 + 主题域 + 自定义标签 + 存储粒度</span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;"><br  /></span></section><section style="margin-left: 16px;margin-right: 16px;"><span style="font-size: 15px;">当然，这仅是抛砖引玉，大家可以按照自己的业务情况，建设相关的规范，适合自己业务最重要。</span></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><p style="margin-right: 0.5em;margin-left: 0.5em;max-width: 100%;min-height: 1em;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><span style="max-width: 100%;background-color: rgb(255, 255, 255);color: rgb(0, 0, 0);font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;text-align: left;overflow-wrap: break-word !important;box-sizing: border-box !important;">以上，就是本期内容，有任何问题欢迎后台留言～</span></p><p style="margin-right: 0.5em;margin-left: 0.5em;max-width: 100%;min-height: 1em;white-space: normal;text-align: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><br style="max-width: 100%;overflow-wrap: break-word !important;box-sizing: border-box !important;"  /></p><section data-mpa-template="t" mpa-from-tpl="t" style="margin-right: 0.5em;margin-left: 0.5em;max-width: 100%;white-space: normal;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mid="" mpa-from-tpl="t" style="margin-right: auto;margin-left: auto;max-width: 100%;width: 300px;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mpa-category="图文" data-mid="" mpa-from-tpl="t" style="margin-right: auto;margin-left: auto;padding: 3px 4px;max-width: 100%;width: 300px;display: flex;flex-direction: column;justify-content: center;align-items: center;border-width: 3px;border-style: solid;border-color: rgb(253, 218, 189);overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mid="" mpa-from-tpl="t" style="margin-right: auto;margin-left: auto;padding: 10px 14px 10px 20px;max-width: 100%;width: 286px;display: flex;flex-direction: row;justify-content: space-between;align-items: center;background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iab3DV5401xupa9t1SqbNLlfveia6L02FILKuOSa2X0ZpVppuqB81GgiaOZ38qxVdHwksa9qaEjvNxkw/640?wx_fmt=png&quot;);background-position: left top, right top;background-repeat: no-repeat;background-size: 8px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mid="" mpa-from-tpl="t" style="max-width: 100%;z-index: 1000;display: flex;flex-direction: column;justify-content: flex-start;align-items: flex-start;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mid="" mpa-from-tpl="t" style="max-width: 100%;display: flex;flex-direction: row;justify-content: flex-start;align-items: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><p data-mid="" style="max-width: 100%;min-height: 1em;text-align: left;font-size: 18px;color: rgb(59, 75, 97);line-height: 24px;overflow-wrap: break-word !important;box-sizing: border-box !important;">扫描二维码</p></section><section data-mid="" mpa-from-tpl="t" style="max-width: 100%;display: flex;flex-direction: row;justify-content: flex-start;align-items: center;overflow-wrap: break-word !important;box-sizing: border-box !important;"><p data-mid="" style="max-width: 100%;min-height: 1em;text-align: left;font-size: 18px;color: rgb(59, 75, 97);line-height: 24px;overflow-wrap: break-word !important;box-sizing: border-box !important;">获取更多精彩</p></section><section data-mid="" mpa-from-tpl="t" style="margin-top: 14px;padding: 2px 12px;max-width: 100%;background: rgb(248, 187, 137);border-radius: 12px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><p data-mid="" style="max-width: 100%;min-height: 1em;font-size: 15px;line-height: 19px;letter-spacing: 2px;overflow-wrap: break-word !important;box-sizing: border-box !important;">巡山猫</p></section></section><section data-mid="" mpa-from-tpl="t" style="max-width: 100%;width: 120px;height: 120px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><section data-mid="" mpa-from-tpl="t" style="max-width: 100%;display: flex;flex-direction: row;justify-content: center;align-items: center;width: 120px;overflow-wrap: break-word !important;box-sizing: border-box !important;"><img class="rich_pages wxw-img" data-cropselx1="0" data-cropselx2="120" data-cropsely1="0" data-cropsely2="120" data-ratio="1.0041322314049588" src="https://mmbiz.qpic.cn/sz_mmbiz_png/DDt1yPgbo4khXPKQBFRiaFicoibjVvRNAS3bHhb0sqjBq58orfH1SvlMnZ407glHE9g793IlEqYiajVfNvfTpnwHQA/640?wx_fmt=png" data-type="png" data-w="484" style="width: 120px;overflow-wrap: break-word !important;height: auto !important;"  /></section></section></section></section></section></section><section style="margin-left: 16px;margin-right: 16px;"><br  /></section><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247484607&idx=1&sn=c87219f0266c9f3700af3da5aa3db025&chksm=9f6517c4a8129ed22a0b46c50e627346d99e4ec1cf26d8db70205954de4beb81115e9e330487&token=1277961472&lang=zh_CN#rd" target="_blank">阅读原文</a></div></content><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247484607&idx=1&sn=c87219f0266c9f3700af3da5aa3db025&chksm=9f6517c4a8129ed22a0b46c50e627346d99e4ec1cf26d8db70205954de4beb81115e9e330487&token=1277961472&lang=zh_CN#rd" target="_blank">阅读原文</a></div>
</div>
</body>
</html>