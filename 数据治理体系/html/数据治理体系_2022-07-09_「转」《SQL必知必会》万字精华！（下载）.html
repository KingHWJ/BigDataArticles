<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"数据治理体系","title":"《SQL必知必会》万字精华！（下载）","time":"2022-07-09 06:56:40","timeStamp":"1657321000"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247489242&idx=1&sn=283e85cc788bf006da0ffbf0882942f1&chksm=9f6505a1a8128cb76f7165e0a28df19dea97b68592d5827139db22e3bc76a2c670be82e748b6#rd" target="_blank">《SQL必知必会》万字精华！（下载）</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_text">尤而小屋&nbsp;&nbsp;</span><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">数据治理体系&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2022-07-09 06:56:40</em></div><content><div class="reprint"><p>转自公众号：尤而小屋<br><a href="http://mp.weixin.qq.com/s?__biz=Mzg3ODY2MDAyMQ==&mid=2247514977&idx=1&sn=21b7c166162d3b79252d307468035c50" target="_blank" title="阅读原文">http://mp.weixin.qq.com/s?__biz=Mzg3ODY2MDAyMQ==&mid=2247514977&idx=1&sn=21b7c166162d3b79252d307468035c50</a></p></div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size: 16px;color: black;padding-right: 10px;padding-left: 10px;line-height: 1.6;letter-spacing: 0px;word-break: break-word;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif;margin-bottom: 0px;" data-mpa-powered-by="yiban.io"><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;letter-spacing: 0px;">本文是《SQL必</span><span style="font-size: 14px;letter-spacing: 0px;">知必会》一书的精华总</span><span style="font-size: 14px;letter-spacing: 0px;">结，帮助读者快速入门SQL或者MySQL，主要内容包含：</span></p></blockquote><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">数据库基础知识</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">库表的相关操作</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">检索数据的方法等</span></section></li></ul><figure data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><br  /></figure><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">思维导图</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">下面的思维导图中记录了这本书的整体目录结构，包含内容有：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">数据的检索</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">汇总数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">分组数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">…….</span></section></li></ul><figure data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><img class="rich_pages wxw-img" data-ratio="0.9183673469387755" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/QeT5ql1LaZuFjwwh1uZibGhiasSxYpjiaPRskKT0khWUDfRUiaC6eNf1olAM7icfxoJ0SyKGA4JXZUGElYiceK6lJVRg/640?wx_fmt=jpeg" data-type="jpeg" data-w="1176" style="display: block;margin-right: auto;margin-left: auto;"></figure><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">个人增加了一章：Python操作游标</span></p><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">一、了解SQL</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本章中主要是介绍了数据库和SQL相关的基本知识和术语。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">数据库</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">数据库是一个以某种有组织的方式存储的数据集合。数据库是一个保存有组织的数据容器，通常是一个文件或者一组文件</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">表示一种结构化的文件，可以用来存储某种特定的数据类型。表是某种特定类型数据的结构化清单。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">存储在表中的数据是同一种类型的数据或者清单</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">数据库中的每个表都有自己的名字，并且这个表是唯一的。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">列</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">表是由列组成的，列存储表中某部分的信息。列是表中的某个字段。所有的表都是由一个或者多个列组成的。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">数据库中的每个列都应该是具有的相同数据类型datatype。数据类型定义了列可以存储哪些数据类型。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">行</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">表中的数据是按照行来进行存储的，所保存的每个记录存储在自己的行内。如果把表想象成一个网格，那么网格中垂直的列则为表列，水平则为表行。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>行表示的是一个记录</strong>。行有时候也称之为记录。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">主键</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">表中每一行都应该都有一列或者几列来唯一标识自己。主键用来表示一个特定的行。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">主键：一列或者几列，其值能够标识表中每行。</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">如果表中的列可以作为主键，则它必须满足：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">任意两行都不具有相同的主键值（主键列不允许NULL值）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">每行都必须有一个主键值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">主键列中的值不允许修改或者更新</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">主键值不能重用（如果某行从表中删除，则它的主键不能赋给以后的行记录）</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是SQL</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">首先我们看一段来自百度百度的解释：</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">结构化查询语言(Structured Query Language)简称<em>SQL</em>，是一种特殊目的的编程语言，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL是一种专门和数据库沟通的语言</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">SQL特点</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、SQL不是某个特定数据库供应商专有的语言，几乎所有的DBMS都是支持SQL</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、SQL简单易学。它的语句都是由简单的、具有描述性的英文单词组成的</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、SQL虽然简单，但是实际上是一种很强有力的语言，灵活使用去语言元素，可以进行复杂和高级的数据库操作</span></p><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二、检索数据</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本章中介绍的是如何使用select语句从表中检索一个或者多个数据列。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">每个SQL语句多有一个或者多个关键字组成，最经常使用的就是select关键字。它的用途是从一个或者多个表中检索出来信息。为了使用select检索数据，必须至少给出两个信息：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">检索什么（字段，列）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">从哪里检索（表）</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">检索单个列</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;检索什么</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;从哪里检索</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">下面关于SQL的语句做几点笔记：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">多条SQL语句必须是以分号</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">;</span></code><span style="font-size: 14px;">结尾；如果是单条不加分号也是可以的，但是最好加上</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">SQL语句不区分大小写，即：</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">SELECT</span></code><span style="font-size: 14px;">和</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">select</span></code><span style="font-size: 14px;">是相同的。但是一般规范的写法是：SQL关键字进行大写，列名和表名是小写的</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">在处理SQL语句的时候，其中所有的空格都是忽略的；但是分行写，语句更清晰，更好理解</span></section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;写法1</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;检索什么</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;从哪里检索</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;写法2</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;&nbsp;&nbsp;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;写法3</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />prod_name&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;<br  />Products;&nbsp;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;写法：个人习惯写法</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;prod_name&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;&nbsp;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">检索多个列</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;pro_id,prod_name,prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;个人写法</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;pro_id,<br  />&nbsp;prod_name,<br  />&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">检索所有列</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;*代表所有列</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">检索不同的值</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DISTINCT</span>&nbsp;vend_id&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;products;<br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><p style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;color: black;"><span style="font-size: 14px;">SQL中的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DISTINCT</span></code><span style="font-size: 14px;">关键字表示的是去重，只返回不同的值。<strong>它必须放在列的前面</strong>。</span></p></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><p style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;color: black;"><span style="font-size: 14px;">不能部分使用</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DISTINCT</span></code><span style="font-size: 14px;">关键字。它是作用于所有的列</span></p></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DISTINCT</span>&nbsp;vend_id,&nbsp;prod_price&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;DISTINCT作用于所有的列，并不仅仅是后面的列</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">限制结果</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">如果不加限制条件，SQL返回的是全部数据。如果我们想只显示部分数据，该如何实现？</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、SQL Server 和 Access</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;TOP&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>&nbsp;prod_name&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;最多返回5行</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、DB2</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FETCH</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FIRST</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ROWS</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ONLY</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;字面意思：显示前5行</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、Oracle</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ROWNUM</span>&nbsp;&lt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">4、MySQL、MariaDB、PostgreSQL、SQLite</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用关键字limit</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LIMIT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;使用LIMIT5</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">关于LIMIT的笔记：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LIMIT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OFFSET</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;第5行开始显示4行数据</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;简化版本</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LIMIT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>,<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;效果同上</span><br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">第一个数字表示显示多少行数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">第二个数字表示从哪里开始显示</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">SQL注释问题</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL中的注释分为两种：<strong>单行注释和多行注释</strong></span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">单行注释使用</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">—</span></code><span style="font-size: 14px;">符号，后面跟上注释的内容：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;这里是一条注释，你可以写点注释</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LIMIT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OFFSET</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">多行注释使用一对</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">/*</span></code><span style="font-size: 14px;">，符号之间的内容就是注释：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">/*<br  />注释1：SQL语句的作用是什么<br  />注释2：SQL语句谁在什么时候写的<br  />*/</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LIMIT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OFFSET</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">三、排序检索数据</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">排序数据（单个列）</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本节中介绍的是如何利用order by子句来对select检索的结果进行排序。为了明确地排序用select语句检索出来的数据，可使用order by子句取一个或者多个列的名字，来对输出结果进行排序。</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">使用关键词order by</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">排序的结果默认是升序ASC，降序是DESC</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_name;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;根据产品名称的字母进行排序</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：我们需要注意order by子句的位置，一定要保证它是select语句的最后一条子句。如果它不是最后的子句，那么就会报错。</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">按多个列排序</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在实际的需求中，我们经常会遇到根据多个列进行排序。比如根据员工的姓名排序，如果姓相同，再根据名字进行排序。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">要按多个列进行排序，指定列名即可，<strong>列名之间使用逗号隔开</strong>。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_id,prod_price,prod_name&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;选择3个列</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_price,prod_name;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;先根据价格排序，如果有相同的价格再根据姓名排序</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：只有当prod_price有相同的值，才会根据prod_name进行排序</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">按列位置进行排序</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">除了可以使用列名指出排序顺序外，order by还支持使用相对位置进行排序。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;prod_id,<br  />&nbsp;prod_price,<br  />&nbsp;prod_name&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;选择3个列</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>,<span style="color: rgb(209, 154, 102);line-height: 26px;">3</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;2,3就是相对位置</span><br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">2表示的是第2个列（prod_price）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">3表示的是第3个列名（prod_name）</span></section></li></ul><figure data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><img class="rich_pages wxw-img" data-ratio="0.4362017804154303" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/QeT5ql1LaZuFjwwh1uZibGhiasSxYpjiaPR9tB6Xicu1Q20cW1Srmz6iae3aEaWejUXCW9gz8CdqSPhnXVjcfkqybjQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="674" style="display: block;margin-right: auto;margin-left: auto;"  /></figure><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">如果想在多个列上进行降序排列，则对每个列都要指定DESC关键词：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;正确写法</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;prod_id,<br  />&nbsp;prod_price,<br  />&nbsp;prod_name&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_price&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DESC</span>,&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DESC</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;每个列都指定DESC</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;错误写法！！！</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;prod_id,<br  />&nbsp;prod_price,<br  />&nbsp;prod_name&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_price,&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DESC</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;DESC只对最近的prod_name起作用，那么prod_price仍然是升序排列的</span><br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">四、过滤数据</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本节中讲解的是使用where关键词来过滤数据。数据库中一般存在大量的数据，一般我们只需要检索表中少量的行。只检索所需数据需要指定搜索条件，<strong>搜索条件也称之为过滤条件</strong>。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用where子句</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_price=<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定条件</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：当ORDER BY 和WHERE子句同时存在的时候，ORDER BY子句应该位于WHERE子句之后。</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">WHERE子句操作符</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">常用的where子句操作符：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">操作符</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><br  /></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">操作符</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">=</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">等于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">&gt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">大于</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">&lt;&gt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">不等于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">&gt;=</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">大于等于</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">!=</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">不等于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">!&gt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">不大于</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">&lt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">小于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">BETWEEN…AND...</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">在指定的两个值之间</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">&gt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">大于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">IS NULL</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">为NULL值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">!&lt;</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">不小于</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><br  /></td></tr></tbody></table></section><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">注：上面表格中的某些操作符是等价的。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">检查单个值</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_price&nbsp;&lt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定1个条件</span><br  /></span></code></pre><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;vend_id,&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;&lt;&gt;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定不等于条件</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">1、上面where子句中，可以看到有的只会在单引号内，但是有的没有括起来。</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">2、单引号用来限定字符串。如果将值和字符串类型的比较，需要使用限定符号</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">3、用来与数值列进行比较的值，则不用括号。</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">不匹配检查</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;vend_id,&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;&lt;&gt;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;不匹配检查条件&nbsp;</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">范围值检查</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">要检查某个范围的值，可以使用BETWEEN操作符。BETWEEN操作符要搭配AND同时使用，指定范围的最大值和最小值：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;vend_id,&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_price&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BETWEEN</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">100</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;BETWEEN&nbsp;...&nbsp;AND...联合使用</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">空值检查</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">当我们创建表的时候，可以指定其中的列是否包含空值。在一个列不包含值时，称其包含空值NULL。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>注：NULL（无值，no value），它和字段包含0、空字符串或仅仅包含空格是不同的</strong>。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SELECT中一个特殊的WHERE子句用来检查具有NULL值的列：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_price&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IS</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;找出价格为NULL的数据</span><br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">五、高级数据过滤</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本节中介绍的是如何组合WHERE子句以建立功能更强、更高级的搜索条件</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">组合WHERE子句</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">操作符</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">operator</span></code><span style="font-size: 14px;">：用来联结或改变WHERE子句中的子句的关键字，也称之为逻辑操作符</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">logical operator</span></code><span style="font-size: 14px;">。</span></p><h5 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;"><span style="font-size: 14px;">AND操作符</span></h5><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">同时满足AND操作符两边的条件</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;vend_id,&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;&gt;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_price&nbsp;&lt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">20</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;AND操作符指定2个条件&nbsp;</span><br  /></span></code></pre><h5 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;"><span style="font-size: 14px;">OR操作符</span></h5><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">满足OR操作符两边的一个条件即可</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;vend_id,&nbsp;prod_name,&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;&gt;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OR</span>&nbsp;prod_price&nbsp;&lt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">20</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;AND操作符指定2个条件&nbsp;</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">注：当第一个条件满足的时候，第二个条件便不会执行了。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">AND和OR联用</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在WHERE子句中同时使用AND和OR操作符：</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️：AND操作符的优先级是高于OR操作符</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️：AND操作符的优先级是高于OR操作符</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️：AND操作符的优先级是高于OR操作符</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OR</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'BRS01'</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_price&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面的语句原本表达的含义是先挑选满足两个vend_id的条件；但是SQL在执行的时候，AND操作符先处理。如果我们想先执行AND前面的部分，可以<strong>加上括号</strong>：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;(vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OR</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'BRS01'</span>)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_price&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">括号具有比AND或者OR更高的优先级，能够消除歧义。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">IN操作符</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">IN操作符用来指定条件范围，范围中的每个条件都可以进行匹配。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name,prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'BRS01'</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;功能类似于OR操作符</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">name</span>：<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：IN操作符的主要优点</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">1、IN操作符的语法更清楚、更直观</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">2、使用了IN操作符更容易管理求值顺序</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">3、IN操作符一般比OR操作符执行的更快</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">4、在IN操作符中可以包含其他SELECT子句，能够动态地建立where子句</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">NOT操作符</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">NOT操作符只有一个功能：就是否定后面所跟的任何条件。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLL01'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;找出不是DLLO1名字的数据</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_name<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面的语句的功能也可以用</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">&lt;&gt;</span></code><span style="font-size: 14px;">来实现：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;&lt;&gt;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLLO1'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;不等于，效果同上</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;prod_name<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">六、使用通配符进行过滤</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是通配符</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通配符wildcard是用来匹配值的一部分的特殊字符；利用通配符，可以创建比较特定数据的搜索模式。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：由字面值、通配符或者两者组合构成的搜索条件。</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>为了在搜索子句中使用通配符，必须使用LIKE操作符</strong></span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️通配符搜索只能用于文本字段（字符串），对于非文本数据类型不能使用通配符搜索。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">百分号%</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">功能：匹配任意字符出现的任意次数，即任意内容</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_id,&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"Fish%"</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;找出所有Fish开头的产品，不管后面是什么内容</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通配符可以在任意位置使用，可以使用多次：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_id,&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"%bean&nbsp;bag%"</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;匹配名字中包含bean&nbsp;bag的任意名字的数据，不管前后</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通配符出现在中间：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'F%y'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;找出F开头y结尾的数据</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️：百分号</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">%</span></code><span style="font-size: 14px;">能够匹配任意位置的0个、1个或者多个字符，但是不能匹配NULL</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">下划线_</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">下划线通配符的用途和百分号类似，<strong>但是它只能匹配一个字符，百分号是匹配多个字符</strong>，这是二者的区别。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;prod_id,&nbsp;prod_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'__&nbsp;inch&nbsp;teddy&nbsp;bear'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;&nbsp;前面是两个下划线_</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;结果</span><br  />prod_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prod_name<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">-------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------</span><br  />BR02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">12</span>&nbsp;inch&nbsp;teddy&nbsp;bear&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;12或者18刚好是两个字符</span><br  />BR03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">18</span>&nbsp;inch&nbsp;teddy&nbsp;bear<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>一个下划线刚好只能匹配一个字符，不能多也不能少</strong></span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">方括号[]</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">方括号</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">[]</span></code><span style="font-size: 14px;">通配符用来指定一个字符集，它必须匹配指定位置的一个字符。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_contact&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'[JM]%'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;匹配JM当中一个字母开头，后面是任意字符的内容</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_contact<br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">[JM]：匹配其中一个字符</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">%</span></code><span style="font-size: 14px;">：匹配任意内容</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">取反字符^</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用取反符号</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">^</span></code><span style="font-size: 14px;">来否定内容：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_contact&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'[^JM]%'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;匹配不是JM开头的任意内容</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_contact;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用NOT操作符可以得到类似上面的结果：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;cust_contact&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LIKE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'[JM]%'</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;匹配不是JM开头的任意内容；NOT表示取反，否定内容</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_contact;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">通配符使用技巧</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">⚠️通配符使用的几点注意事项：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">不要过度使用通配符</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">如果确实需要使用通配符，尽可能<strong style="color: black;">不要将它们放在搜索模式的开始位置</strong>。通配符处于开始处，搜索是最慢的。</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">仔细注意通配符的位置。如果放错地方，可能得不到我们想要的结果。</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">通配符应该要细心使用，不要过度使用。</span></section></li></ol><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">七、创建计算字段</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">计算字段</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">存储在数据库表中的字段一般不是应用程序中所需要的格式。我们需要直接从数据库中检索出来进行转换、计算或者格式化过的数据。计算字段并不实际存在于数据库表中。计算字段是运行时在select语句内创建的。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">拼接字段</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">将多个字段联结在一起构成单个字段。根据不同的DBMS，使用</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">+</span></code><span style="font-size: 14px;">或者</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">||</span></code><span style="font-size: 14px;">来进行联结。但是在MySQL中必须使用特殊的函数来进行操作。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">拼接字段函数Concat的使用：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">Concat</span>(vend_name,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'&nbsp;('</span>,&nbsp;vend_country,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">')'</span>)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;vend_name;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">代码解释：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">存在列vend_name列中的名字</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">包含一个空格和一个左圆括号的字符串</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">存在vend_country列中的国家</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">包含一个右圆括号的字符串</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>小知识：MySQL中如何去掉空格</strong>？</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">RTRIM(col)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;去掉值右边的所有空格</span><br  />LTRIM(col)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;去掉值左边的所有空格</span><br  />TTRIM(col)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;去掉字符串左右两边的所有空格</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用别名</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">别名（alias）是一个字段或者值的替换明，别名是使用关键词AS来赋予的。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">Concat</span>(vend_name,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'&nbsp;('</span>,&nbsp;vend_country,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">')'</span>)&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;vend_title&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;使用别名</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;vend_name;<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：AS关键词语是可选的，但是最好使用</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">执行算术运算</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">计算字段的另一个常见运算是对检索出来的数据进行算术运算。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;prod_id<br  />&nbsp;,quantity<br  />&nbsp;,item_price<br  />&nbsp;,quantity&nbsp;*&nbsp;item_price&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;expanded_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;计算字段执行算术运算，并使用别名</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2008</span>;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">SQL算术操作符</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL中支持的算术操作符：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">操作符</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">+</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">加</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">-</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">减</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">*</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">乘</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">/</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">除</span></td></tr></tbody></table></section><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">八、使用函数处理数据</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">常用函数</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">与其他计算机语言一样，SQL中也提供函数来处理数据。</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">用于处理文本字符串：删除或填充值、转换值或者大小写转化</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">用于在数值数据上进行算术操作：返回绝对值、代数运算等</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">用于处理日期和时间，并从中提取出特定成分的日期和时间函数等</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">返回DBMS正使用的特殊信息的系统函数</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">文本处理函数</span></h4><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">函数</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">LEFT()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回字符串左边的字符</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">LENGTH()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回字符串的长度</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">LOWER()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">将字符串转换为小写</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">LTRIM()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">去掉值左边的所有空格</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">RIGHT()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回字符串右边的字符</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">RTRIM()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">去掉值右边的所有空格</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">SOUNDEX()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回字符串的SOUNDEX值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">UPPER()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">将字符串转换为大写</span></td></tr></tbody></table></section><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">SOUNDE(X)</span></code><span style="font-size: 14px;">是一个将任何文本串转成描述其语音表示的字母数字模式的算法。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;&nbsp;cust_name<br  />&nbsp;&nbsp;,cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SOUNDEX</span>(cust_contact)&nbsp;=&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SOUNDEX</span>(<span style="color: rgb(152, 195, 121);line-height: 26px;">'Michael&nbsp;Green'</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;转化成对应的值</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">日期和时间处理函数</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">日期和时间采用相应的数据类型存储在表中，以特殊的格式来存储。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;&nbsp;<br  />&nbsp;order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">YEAR</span>(order_date)&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2012</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;提取年份</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">数值处理函数</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">MySQL中常用的数值处理函数：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">函数</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">ABS()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个数的绝对值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">COS()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个角度的余弦值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">EXP()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个数的指数值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">PI()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回圆周率</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">SIN()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个角度的正弦</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">SQRT()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个数的平方根</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">TAN()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一个角度的正切值</span></td></tr></tbody></table></section><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">九、汇总数据</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">聚集函数</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">聚集函数指的是对某些行运行的一个函数，并且返回一个值，常用的聚集函数有：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">函数</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">作用</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">AVG()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回列的平均值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">COUNT()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回列的函数</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">MAX()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回列的最大值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">MIN()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回列的最小值</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">SUM()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回某列值之和</span></td></tr></tbody></table></section><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、AVG()函数</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AVG</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;avg_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求平均值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面求解的是所有行各自的平均值，也可以指定某个特定的行来求解：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AVG</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;avg_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求平均值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLLO1'</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定特定的行</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：AVG()函数会忽略掉值NULL的行</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、COUNT()函数</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">COUNT()函数进行计数，可以使用它来确定表中的函数或者符合特定条件的行的数目，两种使用情况：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">count(*)：不管是空值（NULL）还是非空值，都会统计进去</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">count(column)：对特定的列进行计数，会忽略表该列的NULL值</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_cust<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers;<br  /><br  />num_cust<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--------</span><br  />5<br  /><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(cust_email)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_cust<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers;<br  /><br  />num_cust<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--------</span><br  />3<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：如果指定列名，则COUNT()函数会忽略指定列的值为空的行，但是如果COUNT()函数使用的是星号，则不会忽略</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、MAX()/MIN()函数</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">返回指定列中的最大值或者最小值</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">MAX</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;MAX_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求最大值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">MAX</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;MIN_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求最小值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：上面的两个最值函数会自动忽略掉值为NULL的行</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">4、SUM()函数</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">返回指定列值的和（总计）</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SUM</span>(quantity)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;items_ordered<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">20005</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SUM()函数也可以用来合计计算值：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SUM</span>(item_price&nbsp;*&nbsp;quantity)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;total_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;返回所有物品的价钱之和</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">20005</span>;<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：SUM()函数会自动忽略值为NULL的行</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">聚集不同值</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面的5个聚集函数都可以如下使用：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">对所有的行执行计算，指定ALL参数或不指定参数（因为ALL是默认行为）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">只包含不同的值，指定DISTINCT参数，表示去重之后再进行计算</span></section></li></ul><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：ALL参数不需要指定，是默认行为</span></p></blockquote><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AVG</span>(<span style="color: rgb(198, 120, 221);line-height: 26px;">DISTINCT</span>&nbsp;prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;avg_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;去重之后再求平均值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;vend_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'DLLO1'</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定特定的行</span><br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">1、DISTINCT不能用于COUNT(*)；如果指定列名，则DISTINCT只能用于COUNT()</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">2、DISTINCT必须使用列名，不能用于计算或者表达式</span></p><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">3、DISTINCT用于MAX()和MIN()意义不大，因为最值不管是否考虑去重，都是一样的</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">组合聚集函数</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在SELECT子句中是可以包含多个聚集函数</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AVG</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;avg_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求平均值</span><br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">MAX</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;max_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求最大值</span><br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">MIN</span>(prod_price)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;min_price&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;求最小值</span><br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_items&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;物品的数目</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products;<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十、分组数据</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">分组使用的是两个子句：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">GROUP BY()</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">HAVING()</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建分组</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">分组是使用SELECT子句的GROUP BY子句建立的，看个例子：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;vend_id<br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_prods<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">GROUP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;vend_id;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;分组的列</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">GROUP BY子句使用时候的常见规定：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">GROUP BY子句可以包含任意数目的列，可以对分组进行嵌套</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">GROUP BY子句中列出的每一列都是检索列或者有效的表达式（但是不能是聚集函数）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">如果在SELECT中使用表达式，则必须在GROUP BY子句中使用相同的表达式，而不是使用别名</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">除了聚集函数外，SELECT语句中的每列都必须在GROUP BY子句中列出</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">如果分组中包含具有NULL的行，则NULL将作为一个分组返回；如果列中出现多个NULL，它们将分成一个组</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;"><strong style="color: black;">GROUP BY子句必须在WHERE子句之后，ORDER BY子句之前</strong></span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">GROUP BY子句中可以使用相对位置：<strong style="color: black;">GROUP BY 2, 1 表示先根据第二个列分组，再根据第一个列分组</strong></span></section></li></ol><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">过滤分组</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在WHERE子句中指定过滤的是行而不是分组；实际上WHERE种并没有分组的概念。在SQL使用HAVING来实现过滤分组；</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：WHERE过滤行，HAVING过滤分组</span></p></blockquote><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;cust_id<br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;orders<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">GROUP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_id<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">HAVING</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;过滤分组</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">WHERE和HAVING的区别：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">WHERE在数据过滤前分组，排除的行不在分组统计中</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">HAVING在数据分组后进行过滤</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;vend_id<br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_prods<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_price&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;分组前先执行，找出符合条件的数据</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">GROUP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;vend_id<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">HAVING</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;分组后再执行，找出数目大于2的数据</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">分组和排序</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">ORDER BY 和GROUP BY的差异：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">ORDER BY</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">GROUP BY</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">对产生的输出排序</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">对行分组，但输出可能不是分组的顺序</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">任意列都可以使用（非选择的列也可以使用）</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">只可能使用选择列或者表达式列，而且必须使用每个选择列表达式</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">不一定需要</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">如果和聚集函数一起使用列，则必须使用</span></td></tr></tbody></table></section><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;order_num<br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;items<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">GROUP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">HAVING</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;&gt;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">3</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;items,&nbsp;order_num;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;先分组再过滤，最后排序输出</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">SELECT子句顺序</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在这里总结一下SELECT子句的相关顺序：</span></p><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">子句</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">说明</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);text-align: left;background-color: rgb(240, 240, 240);min-width: 85px;"><span style="font-size: 14px;">是否必须使用</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">SELECT</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">要返回的列或者表达式</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">是</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">FROM</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">从中检索数据的表</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">仅在从表选择数据时使用</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">WHERE</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">行级过滤</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">否</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">GROUP BY</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">分组说明</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">仅在按照组计算聚集时使用</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">HAVING</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">组级过滤</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">否</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">ORDER BY</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">输出排序顺序</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">否</span></td></tr></tbody></table></section><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十一、使用子查询</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">任何SELECT语句都是查询，SQL还允许在查询中嵌套查询。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;再根据子查询中的order_num找出符合要求的cust_id</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;order_num&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;先根据WHERE条件找出满足符合要求的order_num</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span>);<br  /></span></code></pre><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：子查询总是从内向外处理</span></p></blockquote><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;Customers&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;最后根据找出的cust_id查询Customers</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;cust_id&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;再根据子查询中的order_num找出符合要求的cust_id</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;order_num&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;先根据WHERE条件找出满足符合要求的order_num</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span>));<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">作为计算字段使用子查询</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用子查询的另一个方法是创建计算字段</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;cust_name<br  />&nbsp;,cust_state<br  />&nbsp;,(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(*)&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;将子查询作为一个计算字段输出：统计每个cust_id的数量</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;Orders.cust_id&nbsp;=&nbsp;Customers.cust_id)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;orders&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;Orders.cust_id&nbsp;=&nbsp;Customers.cust_id&nbsp;使用完全限定列名来避免歧义</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_name;<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十二、 联结表</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL最强大的功能就是数据查询的过程中使用联结表（join）。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建联结</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通过指定要联结的表和它们的联结方式即可创建联结。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;vend_name,<br  />&nbsp;prod_name,<br  />&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Vendors,&nbsp;Products<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;Vendors.vend_id&nbsp;=&nbsp;Products.vend_id;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定联结条件</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">如果上面的代码中没有WHERE子句来指定联结条件，则返回的是<strong>笛卡尔积</strong>，返回出来数的行就是第一个表中的行乘以第二个表中的行。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：返回笛卡尔积的联结，也称做叉联结cross join</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">内联结inner join</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用最广泛的联结是等值联结，也称之为内联结inner join。实现上面语句的内联结代码：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;vend_name,<br  />&nbsp;prod_name,<br  />&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">INNER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">JOIN</span>&nbsp;Products&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;内联结</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;Vendors.vend_id&nbsp;=&nbsp;Products.vend_id;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定联结条件</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">联结多个表</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;vend_name,<br  />&nbsp;prod_name,<br  />&nbsp;prod_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems,&nbsp;Products,&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;Products.vend_id&nbsp;=&nbsp;Vendors.vend_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;多个表的联结</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OrderItems.prod_id&nbsp;=&nbsp;Products.prod_id<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;order_num&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">20007</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">我们通过联结方式来实现子查询的结果：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;子查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;Customers&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;最后根据找出的cust_id查询Customers</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;cust_id&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;再根据子查询中的order_num找出符合要求的cust_id</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Orders<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;order_num&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;先根据WHERE条件找出满足符合要求的order_num</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span>));<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;内联结</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;cust_name,<br  />&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers,&nbsp;Orders,&nbsp;OrderItems<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;Customers.cust_id&nbsp;=&nbsp;Orders.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;多个表联结查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OrderItems.order_num&nbsp;=&nbsp;Orders.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十三、创建高级联结</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用表别名</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在SQL语句中可以给表取别名：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;cust_name,<br  />&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C,&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O,&nbsp;OrderItems&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;OI&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;取别名，看上去更简洁</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;C.cust_id&nbsp;=&nbsp;O.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;多个表联结查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OI.order_num&nbsp;=&nbsp;O.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用不同类型的联结</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">介绍3种不同的联结：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">自联结self join</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">自然联结natural join</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">外联结outer join</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、自联结self join</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;子查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id,cust_name,cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_name&nbsp;=&nbsp;(<span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_contact&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Jim&nbsp;Jones'</span>);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;内联结</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;c1.cust_id,&nbsp;c2.cust_name,&nbsp;c1.cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;c1,&nbsp;&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;c2&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;相同的表使用两次</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;c1.cust_name&nbsp;=&nbsp;c2.cust_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;c2.cust_contact&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Jim&nbsp;Jones'</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面使用了Customers表两次，为了避免歧义，必须使用不同的别名加以区分。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、自然联结</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">无论何时对表进行联结，应该至少有一列不止出现在一个表中（被联结的列）。自然联结排除多次出现，是每一列只返回一次。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;C.*<br  />&nbsp;,O.order_num<br  />&nbsp;,O.order_date<br  />&nbsp;,OI.prod_id<br  />&nbsp;,OI.quantity<br  />&nbsp;,OI.item_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C,&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O,&nbsp;OrderItems&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;OI&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;C.cust_id&nbsp;=&nbsp;O.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;多个表联结查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OI.order_num&nbsp;=&nbsp;O.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、外联结</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">有时候我们需要将一个表中的行和另一个表中行相关联，但是有时候也需要包含那些没有关联行的行记录，比如下面的场景中：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">对每个顾客下的订单数进行统计，包含那些至今尚未下单的顾客</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">列出所有产品以及订购数量，包含没有人订购的产品</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">计算平均销售规模，包含那些至今尚未下订单的顾客</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">当联结中包含了那些在相关表中没有关联行的行，这种联结称之为外联结。比如：检索出包括没有订单顾客在内的所有顾客。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;C.cust_id<br  />&nbsp;,O.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">LEFT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OUTER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">JOIN</span>&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;外连接</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;Customers.cust_id&nbsp;=&nbsp;Orders.cust_id<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面的代码中表示包含左边所有行的记录；如果是右边，使用RIGHT OUTER。因此外联结实际上有两种形式，它们之间可以互换</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">左外联结</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">右外联结</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">还有一种比较特殊的外联结，叫做全外联结full outer join，它检索的是两个表中的所有行并关联那些可以关联的行。<strong>全外联结包含两个表的不关联的行</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;C.cust_id<br  />&nbsp;,O.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FULL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OUTER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">JOIN</span>&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;外连接</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;Customers.cust_id&nbsp;=&nbsp;Orders.cust_id<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">带有聚集函数的联结</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">检索所有顾客及每个顾客所有的订单数：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span><br  />&nbsp;C.cust_id<br  />&nbsp;,<span style="color: rgb(198, 120, 221);line-height: 26px;">COUNT</span>(O.order_num)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;num_ord&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;使用聚集函数统计订单数</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">INNER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">JOIN</span>&nbsp;Orders&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;C.cust_id&nbsp;=&nbsp;O.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;关联两个表</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">GROUP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;Customers.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;分组</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用联结和联结条件</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">总结一下联结和使用要点：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">注意使用联结的类型：一般是使用内联结，有时候外联结有有效</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">要保证使用正确的联结条件，否则会返回不正确的数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">记得提供联结条件，否则返回的是笛卡尔积</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">一个联结中可以包含多个表，甚至可以对不同的表使用不同的联结类型。要注意测试每个联结</span></section></li></ol><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十四、组合查询UNION</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是组合查询</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL允许执行多个查询（多条SELECT语句），并将结果作为一个查询结果集返回，这些组合通常称为并union或者复合查询；通常两种情况下需要使用组合查询：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">在一个查询中从不同的表返回结构数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">对一个表执行多个不同的查询，按照一个查询返回数据</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建组合查询</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">可以用UNION操作符来组合数条SQL查询。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;语句1</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_state&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'IL'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'IN'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'MI'</span>);<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;语句2</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_name&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Fun4ALL'</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通过组合查询将上面两个查询组合在一起：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;组合查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_state&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'IL'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'IN'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'MI'</span>)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">UNION</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;关键字</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_name&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Fun4ALL'</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">我们也可以使用多个WHERE条件来实现：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;语句1</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_state&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'IL'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'IN'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'MI'</span>)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;cust_name&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Fun4ALL'</span>;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">UNION使用规则</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">总结UNION使用规则：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">UNION必须由两条或者两条以上的SELECT语句组成；语句之间通过UNION关键字隔开</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">UNION中的每个查询必须包含相同的列、表达式或者聚集函数</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">列数据类型必须兼容：类型不必完全相同</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;"><strong style="color: black;">UNION从查询结果集中会自动消除重复的行</strong>；但是如果想保留所有的行，使用UNION ALL 实现</span></section></li></ol><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">对组合结果进行排序</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SELECT语句的输出用ORDER BY子句排序。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;组合查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_state&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'IL'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'IN'</span>,<span style="color: rgb(152, 195, 121);line-height: 26px;">'MI'</span>)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">UNION</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;关键字</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact,cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_name&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Fun4ALL'</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ORDER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BY</span>&nbsp;cust_name,&nbsp;cust_contact;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;组合之后再进行排序</span><br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十五、插入数据</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">插入数据</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">INSERT用来将行插入（或者添加）到数据库表中，3种插入方式：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">插入完整的行</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">插入行的一部分</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">插入某些查询的结果</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">下面通过实际的例子来说明：</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、插入完整的行</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>(<span style="color: rgb(152, 195, 121);line-height: 26px;">'1000000006'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Tony'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'123&nbsp;Any&nbsp;Street'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'New&nbsp;York'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'NY'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'1111'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'USA'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;&nbsp;&nbsp;<br  />)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">将上面的数据插入到Customers表中，每列对应一个值。如果值不存在，则用NULL代替。同时插入数据的顺序必须和表中定义的相同。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>安全写法：列出每个字段名称</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;Customers(cust_id,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;明确列出列名</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_name,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_address,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_city,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_state,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_zip,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_country,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_contact,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>(<span style="color: rgb(152, 195, 121);line-height: 26px;">'1000000006'</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;和上面的列名一一对应</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Tony'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'123&nbsp;Any&nbsp;Street'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'New&nbsp;York'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'NY'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'1111'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'USA'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;&nbsp;&nbsp;<br  />)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面列名和下面插入的数据必须一一对应，我们改变插入顺序：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;Customers(cust_id,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;明确列出列名</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_zip,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_country,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_contact,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_email,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_name,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_address,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_city,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>(<span style="color: rgb(152, 195, 121);line-height: 26px;">'1000000006'</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;和上面的列名一一对应</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'1111'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'USA'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Tony'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'123&nbsp;Any&nbsp;Street'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'New&nbsp;York'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'NY'</span><br  />)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、插入部分数据</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面的例子中我们插入的是全部列名的数据，现在指定部分列名进行插入：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;Customers(cust_id,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;明确列出列名</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_zip,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_country,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_name,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_address,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_city,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>(<span style="color: rgb(152, 195, 121);line-height: 26px;">'1000000006'</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;和上面的列名一一对应</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'1111'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'USA'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Tony'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'123&nbsp;Any&nbsp;Street'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'New&nbsp;York'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'NY'</span><br  />)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、插入检索出来的数据</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">INSERT的另一种使用是将SELECT检索出来的结果插入到表中，使用INSERT SELECT语句</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;Customers(cust_id,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;2、将SELECT检索的结果插进来</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_zip,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_country,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_contact,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_email,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_name,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_address,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_city,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />)<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;1、SELECT先检索结果</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_zip,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_country,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_contact,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_email,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_name,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_address,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_city,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cust_state&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;CustNew;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">INSERT SELECT中SELECT语句也是可以包含WHERE子句，以便过滤插入的数据。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">从一个表复制到另一个表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">还有一种数据插入不需要使用INSERT语句，要将一个表的内容复制到另一个表，可以使用SELECT INSERT语句</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;CustCopy<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">需要注意4点：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">在复制的过程中，任何SELECT选项和子句都可以使用，包含WHERE 和GROUP BY子句</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">可以利用联结从多个表插入数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">不管从多少个表中检索数据，数据最终只能插入到一个表中</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">INSERT INTO是插入数据；SELECT INSERT是导出数据</span></section></li></ol><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十六、更新和删除数据</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">更新数据</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">更新（修改）表中的数据，可以使update语句。常见的有两种update方式：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">更新表中特定的行</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">更新表中所有的行</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">update语句的3个组成部分：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">要更新的表</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">列名和它们的新值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">确定要更新哪些行的过滤条件</span></section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>&nbsp;Customers&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;1、待更新的表</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;cust_email&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'28173497@gmail.com'</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;2、需要更细的列名和它的新值</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'10000000005'</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;3、过滤条件</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">同时更新多个值：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>&nbsp;Customers&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;1、待更新的表</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;2、同时更新多个值</span><br  />&nbsp;cust_email&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'28173497@gmail.com'</span>,<br  />&nbsp;cust_contact&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Sam&nbsp;Roberts'</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'10000000005'</span>;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;3、过滤条件</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在更新多个列的值时，只需要使用提交SET命令，每个</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">列=值</span></code><span style="font-size: 14px;">对之间通过逗号隔开，最后一个列不同。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">如果想删除某个列的值，可以将其设置成NULL（假如表定义允许NULL值）。</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">空字符串用</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">''</span></code><span style="font-size: 14px;">表示，是一个值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">NULL是没有值的</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;cust_email&nbsp;=&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'100000000005'</span>;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">删除数据</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">从表中删除数据使用DELETE语句。有两种删除方式：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">从表中删除特定的行</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">从表中删除所有的行</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">DELETE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'011111111116'</span>;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">DELETE是删除整行而不是删除列。要删除列请使用UPDATE语句</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">更新和删除的指导原则</span></h4><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">请一定要带上WHERE子句，否则会修改全部的数据；除非我们的确是需要更新全部记录（少见）</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">要保证每个表都有主键，可以指定各个主键、多个值或者值的范围</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">在UPDATE或者DELETE语句使用WHERE语句之前，先用SELECT进行测试，保证它过滤掉的是正确的记录</span></section></li></ul><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十七、创建和操作表</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL中一般有两种创建表的方法：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">多数DBMS都具有交互式创建和管理数据库表的工具</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">表也可以直接使用SQL语句来操控；通过create table来实现</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;Products&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;创建表</span><br  />(<br  />&nbsp;&nbsp;prod_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;prod_name&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">254</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;prod_price&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">DECIMAL</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">8</span>,<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>)&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;prod_desc&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">VARCHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">1000</span>)&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />);<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面代码的解释：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">表名紧跟CREATE TABLE 关键字</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">列名在圆括号中，各个列之间通过逗号隔开</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">每列的定义以列名开始，后紧跟数据类型 ，是否允许控制等</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">整条语句是以分号结束</span></section></li></ol><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用NULL值</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">NULL值就是没有值或者缺失值。每个表中的列要么是NULL列，要么是NOT NULL列。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">主键是其值唯一标识表中每一行的列。只有不允许NULL值的列可作为主键，允许NULL值的列不能作为唯一标识。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：NULL是默认设置。如果不指定NOT NULL，则认为指定的就是NULL。</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">注意NULL和空字符串的区别：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">NULL值没有值，不是空字符串</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">空字符串值一个有效的值，它不是无值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">NULL值使用关键字NULL而不是空字符串指定</span></section></li></ol><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">指定默认值</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL中创建表的时候可以指定通过关键字DEFAULT来指定：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;OrderItems<br  />(<br  />&nbsp;&nbsp;order_num&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;order_item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;prod_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;quantity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DEFAULT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">1</span>,&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;指定默认值</span><br  />&nbsp;&nbsp;item_price&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">DECIMAL</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">8</span>,<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>)&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span><br  />);<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">默认值一般是用于日期或者时间戳列。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">更新表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">更新表中的数据使用关键词ALTER TABLE。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">ALTER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ADD</span>&nbsp;vend_phone&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">20</span>);<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">删除表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">删除整个表而不是其内容，使用DROP TABLE。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">DROP</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;CustCopy;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;执行这条语句将会永久删除该表</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">重命名表</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通过关键字RENAME来实现</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">RENAME</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;old_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TO</span>&nbsp;new_name;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">旧表(</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">old_name</span></code><span style="font-size: 14px;">)必须存在，新表(</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">new_name</span></code><span style="font-size: 14px;">)必须不存在。如果新表</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">new_name</span></code><span style="font-size: 14px;">存在，则该语句将失败。</span></p><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十八、视图VIEW</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是视图</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">视图是虚拟的表，与包含数据的表不一样，视图只包含使用时动态检索数据的查询。之前的例子：<strong>检索订购了某种产品的顾客</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;cust_name,<br  />&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C,&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O,&nbsp;OrderItems&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;OI&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;C.cust_id&nbsp;=&nbsp;O.cust_id&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;多个表联结查询</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OI.order_num&nbsp;=&nbsp;O.order_num<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">现在我们将上面的结果包装成一个名ProductsCustomers的虚拟表，可以得到相同的数据：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;ProductsCustomers<br  />WHRE&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">ProductsCustomers并不是一个表，只是一个视图，它不包含任何列或者数据，包含的是一个查询。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">为什么使用视图</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">总结以下几点使用视图的原因：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">重用SQL语句</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">简化复杂的SQL操作</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">使用表的一部分而不是整个表</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">保护数据。可以授予用户访问表的特定部分数据，而不是整个表的数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">更改数据格式和表示、视图可以返回和底层表的表示和格式不同的数据</span></section></li></ol><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：视图本身不包含数据，使用的是从别处检索出来的数据。</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">视图规则和限制</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">关于视图创建和使用的一些常见规则和限制：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">与表一样，视图命名必须唯一</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">创建视图的数目没有限制</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">创建视图必须具有足够的访问权限</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">视图是可以嵌套的</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">视图不能索引，也不能有关联的触发器或者默认值</span></section></li></ol><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建视图</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、利用视图简化复杂的联结</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VIEW</span>&nbsp;ProductsCustomers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;创建视图</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;C,&nbsp;Orders&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;O,&nbsp;OrderItems&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;OI&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;C.cust_id&nbsp;=&nbsp;O.cust_id&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AND</span>&nbsp;OI.order_num&nbsp;=&nbsp;O.order_num<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">上面 代码创建了一个名为ProductsCustomers的视图，我们查询一条信息：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_name,&nbsp;cust_contact<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;ProductsCustomers<br  />WHRE&nbsp;prod_id&nbsp;=&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'RGAN01'</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、利用视图重新格式化检索出的数据</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VIEW</span>&nbsp;VendorLocations&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;创建视图</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">RTRIM</span>(vend_name)&nbsp;+&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'&nbsp;('</span>&nbsp;+&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">RTRIM</span>(vend_country)&nbsp;+&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">')'</span>&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;vend_title<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Vendors;&nbsp;&nbsp;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;从视图中检索数据</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;VendorLocations;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、使用视图过滤数据</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VIEW</span>&nbsp;CustomerEmailList&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;cust_id,&nbsp;cust_name,&nbsp;cust_email<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_email&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IS</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;检索数据</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;CustomerEmailList;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">4、使用视图和计算字段</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VIEW</span>&nbsp;OrderItemExpanded&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;创建视图</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;<br  />&nbsp;order_num,<br  />&nbsp;prod_id,<br  />&nbsp;quantity,<br  />&nbsp;item_price,<br  />&nbsp;quantity&nbsp;*&nbsp;item_price&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">AS</span>&nbsp;expanded_price<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItems;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;使用视图查询数据</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;OrderItemExpanded<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;order_num&nbsp;=&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2008</span>;<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">十九、使用存储过程</span></h3><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是存储过程</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">存储过程（Stored Procedure）是一种在数据库中存储复杂程序，以便外部程序调用的一种数据库对象。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">存储过程是为了完成特定功能的SQL语句集，经编译创建并保存在数据库中，用户可通过指定存储过程的名字并给定参数(需要时)来调用执行。</span></p><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：简答来说，存储过程就是为以后使用而保存的一条或者多条SQL语句。</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">为什么要使用存储过程</span></h4><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">通过把处理封装在一个易用的单元中，可以简化复杂的操作</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">存储过程保证里数据的一致性，降低出错可能性</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">简化对变动的关管理。如果表名、列名或者业务逻辑有变化，那么只需要更改存储过程中的代码，使用它的人员无需知道变化</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">存储过程通常是以编译过的形式进行存储，所以DBMS处理命令所需的工作量少，提高了性能</span></section></li></ol><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：总结存储过程的3个优点：简单、安全、高性能</span></p></blockquote><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建存储过程</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">MySQL中创建存储过程：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;[DEFINER&nbsp;=&nbsp;{&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">user</span>&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">CURRENT_USER</span>&nbsp;}]<br  />&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">PROCEDURE</span>&nbsp;sp_name&nbsp;([proc_parameter[,...]])<br  />&nbsp;&nbsp;&nbsp;&nbsp;[characteristic&nbsp;...]&nbsp;routine_body<br  />&nbsp;<br  />proc_parameter:<br  />&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">OUT</span>&nbsp;|&nbsp;INOUT&nbsp;]&nbsp;param_name&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">type</span><br  />&nbsp;<br  />characteristic:<br  />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">COMMENT</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'string'</span><br  />&nbsp;&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LANGUAGE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span><br  />&nbsp;&nbsp;|&nbsp;[<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>]&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DETERMINISTIC</span><br  />&nbsp;&nbsp;|&nbsp;{&nbsp;CONTAINS&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NO</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">READS</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DATA</span>&nbsp;|&nbsp;MODIFIES&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DATA</span>&nbsp;}<br  />&nbsp;&nbsp;|&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SECURITY</span>&nbsp;{&nbsp;DEFINER&nbsp;|&nbsp;INVOKER&nbsp;}<br  />&nbsp;<br  />routine_body:<br  />&nbsp;&nbsp;Valid&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SQL</span>&nbsp;routine&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">statement</span><br  />&nbsp;<br  />[begin_label:]&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BEGIN</span><br  />&nbsp;&nbsp;[statement_list]<br  />&nbsp;&nbsp;&nbsp;&nbsp;……<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">END</span>&nbsp;[end_label]<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>MYSQL 存储过程中的关键语法</strong></span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">声明语句结束符，可以自定义:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">DELIMITER&nbsp;$$<br  />或<br  />DELIMITER&nbsp;//<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">声明存储过程:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">PROCEDURE</span>&nbsp;demo_in_parameter(<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;p_in&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">int</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">存储过程开始和结束符号:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">BEGIN</span>&nbsp;....&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">END</span>&nbsp;&nbsp;&nbsp;&nbsp;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">变量赋值:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;@p_in=<span style="color: rgb(209, 154, 102);line-height: 26px;">1</span>&nbsp;&nbsp;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">变量定义:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">DECLARE</span>&nbsp;l_int&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">int</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">unsigned</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">default</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">40000</span>;&nbsp;<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">创建MySQL存储过程、存储函数:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">procedure</span>&nbsp;存储过程名(参数)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">存储过程体:</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">function</span>&nbsp;存储函数名(参数)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">创建一个实际的存储过程：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">mysql&gt;&nbsp;delimiter&nbsp;$$&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;将语句的结束符号从分号;临时改为两个$$(可以是自定义)</span><br  />mysql&gt;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">PROCEDURE</span>&nbsp;delete_matches(<span style="color: rgb(198, 120, 221);line-height: 26px;">IN</span>&nbsp;p_playerno&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>)<br  />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">BEGIN</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DELETE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;MATCHES<br  />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;playerno&nbsp;=&nbsp;p_playerno;<br  />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">END</span>$$<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">Query</span>&nbsp;OK,&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">0</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">rows</span>&nbsp;affected&nbsp;(<span style="color: rgb(209, 154, 102);line-height: 26px;">0.01</span>&nbsp;sec)<br  />&nbsp;<br  />mysql&gt;&nbsp;delimiter;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;将语句的结束符号恢复为分号</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">执行存储过程</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">EXECUTE</span>&nbsp;AddNewProduct(<span style="color: rgb(152, 195, 121);line-height: 26px;">'JS01'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Stuffed&nbsp;Eiffel&nbsp;Tower'</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">9.83</span>,<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'Plush&nbsp;stuffed&nbsp;toy&nbsp;with&nbsp;the&nbsp;text&nbsp;La&nbsp;Tour&nbsp;Tower'</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">关键词是</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">EXECUTE</span></code><span style="font-size: 14px;">，后面紧跟的是存储过程的名字</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">名字后面有4个参数</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">作用：这个存储过程将行添加到Products表中，并将传入的属性赋给相应的列</span></section></li></ul><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二十、管理事务处理</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">这一章介绍的是MySQL中事务的相关知识点，包含什么是事务处理，怎样利用COMMIT 和 ROLLBACK语句管理事务处理</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">事务处理</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">事务</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Transaction</span></code><span style="font-size: 14px;">，一个最小的、不可再分的工作单元，通常一个事务对应一个完整的业务。</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">InnoDB</span></code><span style="font-size: 14px;">引擎是支持事务的，</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">MyISAM</span></code><span style="font-size: 14px;">不支持事务。事务是针对数据库中</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DML</span></code><span style="font-size: 14px;">数据操作语言的。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">事务处理（transaction processing）是一种机制，用来管理必须成批执行的SQL操作。利用事务处理，可以保证一组操作不会中途停止，要么完全执行，要么完全不执行，来维护数据库的完整性。</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;"><strong style="color: black;">在MySQL中，一条SQL语句就是一个事务。</strong></span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">一个完整的业务需要大量的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DML（insert、update、delete）</span></code><span style="font-size: 14px;">语句来共同完成。只有</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DML</span></code><span style="font-size: 14px;">数据操作语句才有事务。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">事务保证一组</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">SQL</span></code><span style="font-size: 14px;">语句要么全部执行成功，要么全部失败，以此来维护数据库的完整性。</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">如果没有发生错误，整个语句提交到数据库表中；如果发生错误，则进行回退（撤销），将数据库恢复到某个已知且安全的状态</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">栗子：银行转账业务</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">比如在两个表中，A（原有400）给B（原有200）转200块钱，包含两个过程：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">A转出200，B转进200</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">只有当两个过程全部完成才算真正的执行了一个完整的事务过程。</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">update</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">user</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">set</span>&nbsp;fee=<span style="color: rgb(209, 154, 102);line-height: 26px;">200</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">where</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">id</span>=<span style="color: rgb(209, 154, 102);line-height: 26px;">1</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;语句1</span><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;由于断网、安全限制、超出磁盘空间等不可控制原因，下面的语句可能无法成功执行</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">update</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">user</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">set</span>&nbsp;fee=<span style="color: rgb(209, 154, 102);line-height: 26px;">400</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">where</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">id</span>=<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;语句2</span><br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">语句1的成功执行，并不能将底层数据库中的第一个账户的数据进行修改，只是单纯地记录操作，记录在<strong style="color: black;">内存</strong>中完成</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">第二条语句成功执行之后，和底层数据库文件中的数据完成同步</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">若第二条数据执行失败，清空所有的历史记录</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">事务相关术语</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">事务处理相关的术语：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">事务transaction：一组SQL语句。只能处理DML语句：insert、update、delete语句</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">回退rollback：指撤销指定SQL的语句</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">提交commit：指将未存储的SQL语句结果写入到数据库表；只有进行了commit操作，数据才会从内存中写入磁盘中</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">保留点savepoint：指事务处理过程中设置的临时占位符plaveholder，可以对它发布回退（与整个事务回退处理不同）；保留点越多越好：越多的话，能够更加灵活地处理回退问题</span></section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DATABASE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IF</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">EXISTS</span>&nbsp;employees;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;创建数据库</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">USE</span>&nbsp;employees;<br  /><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`employees`</span>.<span style="color: rgb(152, 195, 121);line-height: 26px;">`account`</span>&nbsp;(&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;数据库中创建表account</span><br  />&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`id`</span>&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">BIGINT</span>&nbsp;(<span style="color: rgb(209, 154, 102);line-height: 26px;">11</span>)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;AUTO_INCREMENT,<br  />&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_name`</span>&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">VARCHAR</span>&nbsp;(<span style="color: rgb(209, 154, 102);line-height: 26px;">4</span>),<br  />&nbsp;&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_money`</span>&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">DECIMAL</span>&nbsp;(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>,&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">DEFAULT</span>&nbsp;<span style="color: rgb(209, 154, 102);line-height: 26px;">0</span>,<br  />&nbsp;&nbsp;PRIMARY&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">KEY</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">`id`</span>)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;设置主键</span><br  />)&nbsp;;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`employees`</span>.<span style="color: rgb(152, 195, 121);line-height: 26px;">`account`</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">`id`</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_name`</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_money`</span>)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'1'</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'tim'</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'200'</span>);&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;插入两条记录</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INTO</span>&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`employees`</span>.<span style="color: rgb(152, 195, 121);line-height: 26px;">`account`</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">`id`</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_name`</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">`p_money`</span>)&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">VALUES</span>&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">'2'</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'bill'</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">'200'</span>);&nbsp;<br  /><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">START</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TRANSACTION</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;开启事务</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;p_money&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">account</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;p_name=<span style="color: rgb(152, 195, 121);line-height: 26px;">"tim"</span>;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;三条语句必须完整执行&nbsp;</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">account</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;p_money=p_money<span style="color: rgb(209, 154, 102);line-height: 26px;">-100</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;p_name=<span style="color: rgb(152, 195, 121);line-height: 26px;">"tim"</span>;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">account</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;p_money=p_money+<span style="color: rgb(209, 154, 102);line-height: 26px;">100</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;p_name=<span style="color: rgb(152, 195, 121);line-height: 26px;">"bill"</span>;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">COMMIT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TRANSACTION</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;显式提交</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">事务四大特性</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">事务具有四大特点，简称为</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">ACID</span></code><span style="font-size: 14px;">：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">原子性</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Atomicity</span></code><span style="font-size: 14px;">：一个事务中的语句，要么全部成功，要么全部失败。不存在只执行了部分的情况。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">一致性</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Consistency</span></code><span style="font-size: 14px;">：在事务开始之前或者结束之后，必须保持数据库的一致性。比如上面的栗子中，A减掉200，那么相应的，B一定要加上200。否则数据库中的数据不一致。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">隔离性</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Isolation</span></code><span style="font-size: 14px;">：当多个用户并发访问数据库，操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。用户的操作之间存在独立性。<strong style="color: black;">事务A和B之间具有隔离性。</strong></span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">持久性</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Durability</span></code><span style="font-size: 14px;">：事务一旦被提交，对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。<strong style="color: black;">事务的成功，是硬盘数据上的更改</strong>，不仅是内存上的变化。<strong style="color: black;">持久性是事务的保证，是事务结束的标志。</strong></span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">隔离级别</span></h4><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">隔离级别</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">脏读(Dirty Read)</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">不可重复读（NonRepeatable Read）</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">幻读（Phantom Read）</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">加锁读Locked Read</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">未提交读（Read uncommitted）</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">已提交读（Read committed）</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">可重复读（Repeatable read）</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">可串行化（Serializable ）</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">N</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">Y</span></td></tr></tbody></table></section><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">脏读：未提交读，事务中修改即使没有提交，对其他会话也是可见的，可以读取到未被提交的数据。脏读会导致很多的问题，较少使用</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">提交读：不可重复读，该级别保证事务如果没有成功执行（</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">commit</span></code><span style="font-size: 14px;">），事务中的操作不会被其他会话可见。解决了脏读问题，但是会对其他</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">session</span></code><span style="font-size: 14px;">产生两次不一样的读取结果</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">幻读：会话T1事务中执行一次查询，然后会话T2新插入一行记录，<strong style="color: black;">这行记录恰好可以满足T1所使用的查询的条件</strong>。然后T1又使用相同 的查询再次对表进行检索，但却看到了事务T2刚才插入的新行。这个新行就称为“幻像”。</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">查看隔离级别</span></h4><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;查看系统隔离级别：</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">select</span>&nbsp;@@global.tx_isolation;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;查看当前会话隔离级别</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">select</span>&nbsp;@@tx_isolation;<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;设置当前会话隔离级别</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">session</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TRANSACTION</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ISOLATION</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LEVEL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">serializable</span>;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;serializable&nbsp;级别</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;设置全局系统隔离级别</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SET</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">GLOBAL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TRANSACTION</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ISOLATION</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">LEVEL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">READ</span>&nbsp;UNCOMMITTED;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;READ&nbsp;UNCOMMITTED&nbsp;可读未提交级别</span><br  /></span></code></pre><hr data-tool="mdnice编辑器" style="height: 1px;margin-top: 10px;margin-bottom: 10px;border-right: none;border-bottom: none;border-left: none;border-top-style: solid;border-top-color: black;"  /><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">事务开始和结束标志</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">开始标志：<strong>任何一条DML语句的执行，标志事务开始</strong></span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">结束的标志分为两种：成功结束的标识和失败结束的标识</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、成功结束的标志</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">commit：提交</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">将所有的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DML</span></code><span style="font-size: 14px;">语句的操作历史记录和底层硬盘中的数据进行了同步。</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">只有事务成功执行，<strong style="color: black;">硬盘</strong>中的数据才会进行修改更新。</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、 失败结束的标识</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">rollback：回滚</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">将所有的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DML</span></code><span style="font-size: 14px;">语句的操作记录进行全部清空。</span></section></li></ul><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二十一、使用游标</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">本章节中讲解的是什么是游标，以及如何使用游标。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">什么是游标</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">SQL检索操作返回一组称为结果集的行，这组返回的行都是与SQL语句相匹配的行（零行或者多行）。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">简单地使用SELECT语句，没有办法得到第一行、下一行或者前10行的数据。但是实际中，我们需要在检索出来的行中前进或者后退一行甚至多行，这时候便可以使用游标。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">游标是一个存储在DBMS服务器上的数据库存查询，它不是一条SELECT语句，而是被该语句检索出来的结果集。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用游标</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">使用游标的几个步骤：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">declare</span></code><span style="font-size: 14px;">：在使用游标之前，必须先进行声明</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">open：一旦声明了游标，就必须打开游标</span></code></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">对于填有数据的游标，根据需要取出检索的各行</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">close</span></code><span style="font-size: 14px;">：在结束的时候，必须关闭游标；有的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">DBMS</span></code><span style="font-size: 14px;">还需要释放游标</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">创建游标</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">DECLARE关键词来定义和命名游标</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">DECLARE</span>&nbsp;CustCursor&nbsp;CURSORVB&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;声明游标</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FOR</span>&nbsp;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">SELECT</span>&nbsp;*&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">FROM</span>&nbsp;Customers<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">WHERE</span>&nbsp;cust_email&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">IS</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>;<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">使用游标</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、OPEN CURSOR语句来打开游标</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">OPEN&nbsp;CURSOR&nbsp;CustCursor&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;打开游标</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、打开游标之后我们可以使用FETCH语句来访问游标数据了。FETCH指出要检索哪些行？从什么地方开始检索？将它们放于何处？</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">关闭游标</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">关闭游标的关键词是</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">close</span></code><span style="font-size: 14px;">。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">游标一旦关闭，如果不再次打开，将无法使用；第二次使用的时候，不需要声明，直接</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">open</span></code><span style="font-size: 14px;">即可</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">CLOSE&nbsp;Custcursor<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二十二、Python操作游标</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">下面的内容是个人增加部分，讲解的是如何通过Python的第三方库</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">pymysql</span></code><span style="font-size: 14px;">操作游标。</span></p><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">连接数据库</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>使用的是</strong><strong><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);">pymysql</code>模块，需要先进行导入</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">import</span>&nbsp;pymysql<br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">host：主机名或者</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">IP</span></code><span style="font-size: 14px;">地址</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">port：默认是</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">3306</span></code></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">user：用户名</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">passwd：</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">user</span></code><span style="font-size: 14px;">账户登录</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">mysql</span></code><span style="font-size: 14px;">的密码</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">db：创建的数据库</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">charset：防止中文出错，编码格式设置为</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">charset="utf8"</span></code></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>使用模块的</strong><strong><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);">connect()</code>方法进行连接</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">import</span>&nbsp;pymysql<br  />conn&nbsp;=&nbsp;pymysql.connect(<br  />&nbsp;&nbsp;host=“localhost”,&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;主机名</span><br  />&nbsp;&nbsp;port=<span style="color: rgb(209, 154, 102);line-height: 26px;">3306</span>,&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;端口</span><br  />&nbsp;&nbsp;user=<span style="color: rgb(152, 195, 121);line-height: 26px;">"root"</span>,&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;用户名</span><br  />&nbsp;&nbsp;passwd=<span style="color: rgb(152, 195, 121);line-height: 26px;">"123456"</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;密码</span><br  />&nbsp;&nbsp;db=<span style="color: rgb(152, 195, 121);line-height: 26px;">"bookdb"</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;数据库名字</span><br  />&nbsp;&nbsp;charset=<span style="color: rgb(152, 195, 121);line-height: 26px;">"utf8"</span>)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;指定字符集</span><br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">操作数据库</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Python</span></code><span style="font-size: 14px;">建立了和数据库的连接，实际上就是建立了一个</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">pymysql.connect()</span></code><span style="font-size: 14px;">的</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">实例对象</span></code><span style="font-size: 14px;">，或者称之为</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">连接对象</span></code><span style="font-size: 14px;">。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Python</span></code><span style="font-size: 14px;">就是通过连接对象和数据库进行对话。</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">pymysql.connect()</span></code><span style="font-size: 14px;">实例对象的方法有：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">commit</span></code><span style="font-size: 14px;">：提交数据</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">rollback</span></code><span style="font-size: 14px;">：如果有权限，取消当前的操作，否则会报错</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">cursor([cursorclass])</span></code><span style="font-size: 14px;">：返回连接的游标对象，执行</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">SQL</span></code><span style="font-size: 14px;">语句</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">close()</span></code><span style="font-size: 14px;">：关闭连接</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">游标对象cur操作方法</span></h4><section data-tool="mdnice编辑器" style="overflow-x: auto;"><table><thead><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">名称</span></th><th style="border-top-width: 1px;border-color: rgb(204, 204, 204);background-color: rgb(240, 240, 240);min-width: 85px;text-align: left;"><span style="font-size: 14px;">描述</span></th></tr></thead><tbody style="border-width: 0px;border-style: initial;border-color: initial;"><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">close</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">关闭游标</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">execute</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">执行一条SQL语句，可以带上参数；执行之后需要conn.commit()，数据库中才会真正建立</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">fetchone</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回一条语句</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">fetchall</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回所有的语句</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: white;"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">fetchmany</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">返回many条语句</span></td></tr><tr style="border-width: 1px 0px 0px;border-right-style: initial;border-bottom-style: initial;border-left-style: initial;border-right-color: initial;border-bottom-color: initial;border-left-color: initial;border-top-style: solid;border-top-color: rgb(204, 204, 204);background-color: rgb(248, 248, 248);"><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">nextset()</span></td><td style="border-color: rgb(204, 204, 204);min-width: 85px;"><span style="font-size: 14px;">移动到下一个结果</span></td></tr></tbody></table></section><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">插入</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">import</span>&nbsp;pymysql&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;导入模块</span><br  />conn&nbsp;=&nbsp;pymysql.connect(host=“localhost”,&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;建立python和数据库的连接</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port=<span style="color: rgb(209, 154, 102);line-height: 26px;">3306</span>,&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user=<span style="color: rgb(152, 195, 121);line-height: 26px;">"root"</span>,&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwd=<span style="color: rgb(152, 195, 121);line-height: 26px;">"123456"</span>,&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db=<span style="color: rgb(152, 195, 121);line-height: 26px;">"bookdb"</span>,&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=<span style="color: rgb(152, 195, 121);line-height: 26px;">"utf8"</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />cur&nbsp;=&nbsp;conn.cursor()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;建立游标对象cur</span><br  />cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"insert&nbsp;into&nbsp;users&nbsp;(username,&nbsp;passwd,&nbsp;email)&nbsp;values&nbsp;(%s,&nbsp;&nbsp;%s,&nbsp;%s)"</span>,&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">"python"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"123456"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"python@gmail.com"</span>))&nbsp;&nbsp;&nbsp;<br  />conn.commit()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;需要再执行conn.commit()</span><br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;同时执行插入多条信息：多条信息用元组的形式表示</span><br  />cur.executemany(<span style="color: rgb(152, 195, 121);line-height: 26px;">"insert&nbsp;into&nbsp;users&nbsp;(username,&nbsp;passwd,&nbsp;email)&nbsp;values&nbsp;(%s,&nbsp;&nbsp;%s,&nbsp;%s)"</span>,&nbsp;((<span style="color: rgb(152, 195, 121);line-height: 26px;">"python"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"123456"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"python@gmail.com"</span>),&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">"java"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"456789"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"java@gmail.com"</span>),&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">"php"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"123789"</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"php@gmail.com"</span>)))<br  />conn.commit()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;需要再执行conn.commit()</span><br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">查询</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;users"</span>)<br  />&gt;&gt;lines&nbsp;=&nbsp;cur.fetchall()&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;返回所有的查询结果</span><br  />&gt;&gt;<span style="color: rgb(198, 120, 221);line-height: 26px;">for</span>&nbsp;line&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">in</span>&nbsp;lines:&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;遍历返回所有的结果</span><br  />&nbsp;&nbsp;&nbsp;&nbsp;print(line)<br  />&nbsp;&nbsp;&nbsp;&nbsp;<br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;只想返回一条结果</span><br  />&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;users&nbsp;where&nbsp;id=1"</span>)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;查询id=1</span><br  /><br  />&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;users"</span>)<br  />&gt;&gt;cur.fetchone()&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;返回一条结果；游标会跟着移动，直到将所有的数据取完</span><br  />&gt;&gt;cur.fetchone()&nbsp;<br  />&gt;&gt;cur.fetchone()<br  /></span></code></pre><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">游标移动</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">scroll</span></code><span style="font-size: 14px;">到指定位置</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">操作存储在内存中的对象时候游标会移动，可以指定游标到某个位置：</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">&gt;&gt;cur.scroll(<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>)&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;相对于当前位置移动2个单位</span><br  />&gt;&gt;cur.fetchone()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;显示数据</span><br  />&gt;&gt;cur.scroll(<span style="color: rgb(209, 154, 102);line-height: 26px;">2</span>,&nbsp;<span style="color: rgb(152, 195, 121);line-height: 26px;">"absolute"</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;加上参数，实现“绝对移动”，到第三条</span><br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>绝对移动的数字不能是负数，相对移动可以是负数</strong></span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">Python</span></code><span style="font-size: 14px;">的连接对象的游标方法中提供一个参数，将读取到的数据保存成字典形式：</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">&gt;&gt;cur&nbsp;=&nbsp;conn.cursor(pymysql.cursors.DictCursor)<br  />&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;users"</span>)<br  />&gt;&gt;conn.commit()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;需要再执行conn.commit()</span><br  />&gt;&gt;cur.fetchall()<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;"><strong>更新</strong></span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;">&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"update&nbsp;users&nbsp;set&nbsp;username=s%&nbsp;where&nbsp;id=2"</span>,&nbsp;(<span style="color: rgb(152, 195, 121);line-height: 26px;">"mypython"</span>))&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;更新第二条语句</span><br  />&gt;&gt;cur.execute(<span style="color: rgb(152, 195, 121);line-height: 26px;">"select&nbsp;*&nbsp;from&nbsp;users&nbsp;where&nbsp;id=2"</span>)<br  />&gt;&gt;conn.commit()&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">#&nbsp;需要再执行conn.commit()</span><br  />&gt;&gt;cur.fetchone()<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二十三、SQL高级特性</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">在最后的一章中简单的介绍了SQL的3个高级特性：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">约束constraint</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">索引index</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">触发器trigger</span></section></li></ul><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">约束</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">约束是管理如何插入或者处理数据库数据的规则。DBMS通过在数据库表上施加约束来实施引用完整性。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">1、主键</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">主键是一种特殊的约束，用来保证一列（或者一组列）中的值是唯一的。主键必须满足的4个条件：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">任意两行的主键值不相同</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">每行都具有一个主键值，即列中不允许NULL值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">包含主键的列从不修改或者更新</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">主键值不能重复用</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;方式1</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;Vendors(<br  />&nbsp;&nbsp;vend_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;&nbsp;primary&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">key</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;添加主键</span><br  />&nbsp;&nbsp;vend_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">50</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_address&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">50</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_city&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">50</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_state&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">5</span>)&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;vend_country&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">char</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">50</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span><br  />);<br  /><br  /><span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;方式2</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ALTER</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;Vendors<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ADD</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">CONSTRAINT</span>&nbsp;PRIMARY&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">KEY</span>&nbsp;(vend_id);<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">2、外键</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">外键值表中的一列，<strong>其值必须列在另一表的主键中</strong>。外键是保证引用完整性的重要部分。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">通过订单信息表Orders表中的顾客ID和顾客信息表Customers的顾客ID进行关联。</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;Orders<br  />(<br  />&nbsp;&nbsp;order_num&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;PRIMARY&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">KEY</span>,&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;主键：订单号唯一</span><br  />&nbsp;&nbsp;order_date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DATETIME&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;cust_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">REFERENCES</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;外键：顾客id不唯一，一个顾客可能有多个订单</span><br  />)<br  /></span></code></pre><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">3、唯一约束</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">唯一约束用来保证一列中的数据是唯一的，可以通过关键词</span><code style="font-size: 14px;padding: 2px 4px;border-radius: 4px;margin-right: 2px;margin-left: 2px;background-color: rgba(27, 31, 35, 0.05);font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace;word-break: break-all;color: rgb(239, 112, 96);"><span style="font-size: 14px;">UNIQUE</span></code><span style="font-size: 14px;">来定义。它和主键的区别在于：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">表中可以包含多个唯一约束，但是只能有一个主键</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">唯一约束列可以包含NULL值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">唯一约束列可以修改或者更新</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">唯一约束列的值可以重复使用</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">与主键不同，唯一约束不能用来定义外键</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">4、检查约束</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">检查约束用来保证一列（或者一组列）中的数据满足一组指定的条件，常见的用途有：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">检查最大值或者最小值</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">指定数据的范围</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">只允许特定的值，例如性别字段中只允许M或者F</span></section></li></ul><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TABLE</span>&nbsp;OrderItems<br  />(<br  />&nbsp;&nbsp;order_num&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;order_item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;prod_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">CHAR</span>(<span style="color: rgb(209, 154, 102);line-height: 26px;">10</span>)&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>,<br  />&nbsp;&nbsp;quantity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(230, 192, 123);line-height: 26px;">INTEGER</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">CHECK</span>&nbsp;(quantity&gt;<span style="color: rgb(209, 154, 102);line-height: 26px;">0</span>),&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;设置检查约束，保证大于0</span><br  />&nbsp;&nbsp;item_price&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MONEY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">NOT</span>&nbsp;<span style="color: rgb(86, 182, 194);line-height: 26px;">NULL</span><br  />)<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">索引index</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">索引用来排序数据以加快搜索和排序操作的速度。创建索引前记住几点：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">索引改善检索操作的性能，但是降低了数据插入、修改和删除的性能</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">索引数据可能要占用大量的存储空间</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">索引用于数据过滤和数据排序</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">可以在索引中定义多个列</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">索引必须唯一命名</span></section></li></ol><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INDEX</span>&nbsp;prod_name_ind<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;Products&nbsp;(prod_name);<br  /></span></code></pre><h4 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 18px;"><span style="font-size: 14px;">触发器trigger</span></h4><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">触发器(trigger)：监视某种情况，并触发某种操作，它是提供给程序员和数据分析员来保证数据完整性的一种方法，它是与表事件相关的特殊的存储过程，它的执行不是由程序调用，也不是手工启动，而是由事件来触发。</span></p><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">触发器可以与特定表上INSERT、UPDATE、DELETE操作相关联。触发器的常见用途：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">保证数据一致</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">基于某个表的变动在其他表上执行活动</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">进行额外的验证并根据需要回退数据</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">计算计算列的值或者更新时间戳</span></section></li></ul><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">触发器创建语法四要素：</span></p><ol data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">监视地点(table)</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">监视事件(insert/update/delete)</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">触发时间(after/before)</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">触发事件(insert/update/delete)</span></section></li></ol><blockquote data-tool="mdnice编辑器" style="border-top: none;border-right: none;border-bottom: none;font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"><p style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"><span style="font-size: 14px;">笔记：触发器只能创建在永久表上，而不能对临时表创建触发器</span></p></blockquote><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">触发器创建的基本语法如下</span></p><pre data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><code style="overflow-x: auto;padding: 16px;color: #abb2bf;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #282c34;border-radius: 5px;"><span style="font-size: 14px;"><span style="color: rgb(198, 120, 221);line-height: 26px;">CREATE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">TRIGGER</span>&nbsp;trigger_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">AFTER</span>/<span style="color: rgb(198, 120, 221);line-height: 26px;">BEFORE</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">INSERT</span>/<span style="color: rgb(198, 120, 221);line-height: 26px;">UPDATE</span>/DELETER&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">ON</span>&nbsp;table_name<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">FOR</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">each</span>&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">row</span>&nbsp;&nbsp;&nbsp;<span style="color: rgb(92, 99, 112);font-style: italic;line-height: 26px;">--&nbsp;固定语句</span><br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">begin</span><br  />&nbsp;<span style="color: rgb(198, 120, 221);line-height: 26px;">sql</span>语句;<br  /><span style="color: rgb(198, 120, 221);line-height: 26px;">end</span>;<br  /></span></code></pre><h3 data-tool="mdnice编辑器" style="margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;"><span style="font-size: 14px;">二十四、总结</span></h3><p data-tool="mdnice编辑器" style="padding-top: 8px;padding-bottom: 8px;line-height: 26px;"><span style="font-size: 14px;">《SQL必知必会》一本非常经典的数据库书籍，也可以说是自己入门数据库的书。算上本次万字精华整理，应该是第三次系统的阅读本书，本书主要有几个特点：</span></p><ul data-tool="mdnice编辑器" style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;" class="list-paddingleft-1"><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">知识全面：书中囊括了很多的数据库知识，从最基础的创建库表到联结查询，再到数据库的视图、触发器等，有基础也有提升</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">案例丰富：本书的讲解主要是通过5个不同表来完成，结合各种案例来说明SQL的使用细节</span></section></li><li style="font-size: 14px;"><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;">对比性强：不同的DBMS系统的语法是有一定出入的，本书在讲解的过程中针对不同DBMS，给出不同的写法，主要还是MySQL</span></section><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 14px;"></span></section><section style="margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);"><span style="font-size: 16px;color: rgb(2, 30, 170);"><strong>结语：需要的朋友可以点下面链接购买实体书第5版，也可以在</strong></span><span style="font-size: 16px;color: rgb(255, 0, 0);"><strong>数据治理体系后台回复“SQL学习”</strong></span><span style="font-size: 16px;color: rgb(2, 30, 170);"><strong>获取本书第3版电子版本，（侵删）</strong></span><br  /></section></li></ul><figure data-tool="mdnice编辑器" style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><br  /></figure></section><p><mpcps class="js_editor_new_cps" data-traceid="0d6a653b-6506-4603-aae5-246b32f04c25" data-goodssouce="1" data-pid="101_10036500238076" data-appuin="0" data-buffer="{&quot;category_id&quot;:10,&quot;pid&quot;:&quot;101_10036500238076&quot;,&quot;biz_uin&quot;:0,&quot;trace_id&quot;:&quot;0d6a653b-6506-4603-aae5-246b32f04c25&quot;,&quot;sku_id&quot;:&quot;101_10036500238076&quot;,&quot;source_id&quot;:2,&quot;source_name&quot;:&quot;京东&quot;,&quot;audit_state&quot;:1,&quot;main_img&quot;:&quot;https://img.zhls.qq.com/3/3b691ab9682d493f80abdd567c55f7fc.jpg&quot;,&quot;product_name&quot;:&quot;SQL必知必会 第5版 SQL从入门到精通SQL入门基础教程 深入浅出sql数据库入门经典&quot;,&quot;current_price&quot;:3600,&quot;first_category_id&quot;:&quot;10&quot;,&quot;appuin&quot;:0,&quot;isNewCpsKOL&quot;:1}"></mpcps></p><section class="mp_profile_iframe_wrp"><mpprofile class="js_uneditable custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-id="MzA3NjIzNjMwOA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/hXibVSNciaXhzia07WkYkDfaRxHUiaDaNc5x3xTNO1RlNBRhPnxpEzoemhsn7ofat4pVwVgOktaveEtu6IKzzLONQQ/0?wx_fmt=png" data-nickname="数据治理体系" data-alias="DGsystem" data-signature="持续完善数据治理实战体系，数据仓库、标签、数字体系，实现业务数字化，数字资产化，资产业务化，资产资本化；回归业务场景的数字化案例才最具参考价值，最容易理解和借鉴的。" data-from="0"></mpprofile></section><div class="msg_source_url"><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA3NjIzNjMwOA==&action=getalbum&album_id=2275731492741890049#wechat_redirect" target="_blank">阅读原文</a></div></content><div class="msg_source_url"><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA3NjIzNjMwOA==&action=getalbum&album_id=2275731492741890049#wechat_redirect" target="_blank">阅读原文</a></div>
</div>
</body>
</html>