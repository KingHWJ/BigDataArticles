<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"数据治理体系","title":"20000字干货笔记，一天搞定Mysql~","time":"2022-02-16 07:55:25","timeStamp":"1644969325"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247485917&idx=1&sn=e2e5e32b7e597ae03438145ba482069f&chksm=9f651aa6a81293b0fd13611c4de362c4a16fba48904360e6c889335d2af2e0701b20714f1212#rd" target="_blank">20000字干货笔记，一天搞定Mysql~</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_text">远辰&nbsp;&nbsp;</span><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">数据治理体系&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2022-02-16 07:55:25</em></div><content><div class="reprint"><p>转自公众号：数据不吹牛<br><a href="http://mp.weixin.qq.com/s?__biz=MzU5Mjg2OTQ1MA==&mid=2247486935&idx=1&sn=e3f68940da56616ec01956ad001eb4f4" target="_blank" title="阅读原文">http://mp.weixin.qq.com/s?__biz=MzU5Mjg2OTQ1MA==&mid=2247486935&idx=1&sn=e3f68940da56616ec01956ad001eb4f4</a></p></div><p style="letter-spacing: 0.544px;white-space: normal;font-size: 16px;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);text-align: center;" data-mpa-powered-by="yiban.io"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">今</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">天给大家分享的是我</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">学习</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">Mysql记录的详细笔记，</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">有基础知识，也有实战案例，</span><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;font-size: 15px;">文章较长，建议收藏~</span></p><p style="text-align: left;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 17px;"><span style="font-size: 17px;background-color: rgb(0, 128, 255);">&nbsp;</span> <strong>基本语法</strong></span></h2><pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code></p></pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 显示所有数据库</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">show</span> <span class="code-snippet__keyword">databases</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建数据库</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">DATABASE</span> <span class="code-snippet__keyword">test</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 切换数据库</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">use</span> <span class="code-snippet__keyword">test</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 显示数据库中的所有表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">show</span> <span class="code-snippet__keyword">tables</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建数据表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> pet (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>),</span></code><code><span class="code-snippet_outer">    owner <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>),</span></code><code><span class="code-snippet_outer">    species <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>),</span></code><code><span class="code-snippet_outer">    sex <span class="code-snippet__built_in">CHAR</span>(<span class="code-snippet__number">1</span>),</span></code><code><span class="code-snippet_outer">    birth <span class="code-snippet__built_in">DATE</span>,</span></code><code><span class="code-snippet_outer">    death <span class="code-snippet__built_in">DATE</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查看数据表结构</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- describe pet;</span></span></code><code><span class="code-snippet_outer">desc pet;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">from</span> pet;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 插入数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> pet <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__string">'puffball'</span>, <span class="code-snippet__string">'Diane'</span>, <span class="code-snippet__string">'hamster'</span>, <span class="code-snippet__string">'f'</span>, <span class="code-snippet__string">'1990-03-30'</span>, <span class="code-snippet__literal">NULL</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 修改数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">UPDATE</span> pet <span class="code-snippet__keyword">SET</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'squirrel'</span> <span class="code-snippet__keyword">where</span> owner = <span class="code-snippet__string">'Diane'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 删除数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">DELETE</span> <span class="code-snippet__keyword">FROM</span> pet <span class="code-snippet__keyword">where</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'squirrel'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 删除表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">DROP</span>&nbsp;<span class="code-snippet__keyword">TABLE</span>&nbsp;myorder;</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 17px;"><span style="font-size: 17px;background-color: rgb(0, 128, 255);">&nbsp;</span></span></strong><strong><span style="font-size: 17px;">&nbsp;数据库大三大设计范式</span></strong></h2><p><strong><span style="font-size: 17px;"><br  /></span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>1NF</strong></span></p></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">不可分割性，只要字段值还可以继续拆分，就不满足第一范式。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">不可分割的意思就按字面理解就是最小单位，不能再分成更小单位了。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">字段只能是一个值，不能被拆分成多个字段，否则的话，它就是可分割的，就不符合一范式。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"></span><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>2NF</strong></span><strong style="font-size: 15px;"></strong></p></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">第二范式就是要有主键，要求其他字段都依赖于主键。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">为什么要有主键？没有主键就没有唯一性，没有唯一性在集合中就定位不到这行记录，所以要主键。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">在满足第一范式的前提下，主键外的每一列都必须完全依赖于主键。如果出现不完全依赖，只可能发生在联合主键的情况下。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><span style="display: none;line-height: 0px;">‍</span></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>3NF</strong></span></p></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">在满足第二范式的前提下，除了主键列之外，其他列之间不能有传递依赖关系，即“消除冗余”。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-size: 15px;text-align: start;background-color: rgb(255, 255, 255);">消除冗余，就是各种信息只在一个地方存储，不出现在多张表中。</span></span></p><p><span style="display: none;line-height: 0px;">‍</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;font-size: 15px;text-align: start;background-color: rgb(255, 255, 255);">范式总结：范式，其实是用来学习参考的，设计的时候根据情况，未必一定要遵守，要灵活结合业务实际情况决定。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 17px;"><span style="font-size: 17px;background-color: rgb(0, 128, 255);">&nbsp;</span></span></strong><strong><span style="font-size: 17px;"> 查询练习</span></strong></h2><p><strong><span style="font-size: 17px;"><br  /></span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>准备数据</strong></span></p></li></ul><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建数据库</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">DATABASE</span> select_test;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 切换数据库</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">USE</span> select_test;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建学生表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> student (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">no</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) PRIMARY <span class="code-snippet__keyword">KEY</span>,</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>,</span></code><code><span class="code-snippet_outer">    sex <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">10</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>,</span></code><code><span class="code-snippet_outer">    birthday <span class="code-snippet__built_in">DATE</span>, <span class="code-snippet__comment">-- 生日</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">class</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__comment">-- 所在班级</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建教师表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> teacher (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">no</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) PRIMARY <span class="code-snippet__keyword">KEY</span>,</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>,</span></code><code><span class="code-snippet_outer">    sex <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">10</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>,</span></code><code><span class="code-snippet_outer">    birthday <span class="code-snippet__built_in">DATE</span>,</span></code><code><span class="code-snippet_outer">    profession <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>, <span class="code-snippet__comment">-- 职称</span></span></code><code><span class="code-snippet_outer">    department <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span> <span class="code-snippet__comment">-- 部门</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 创建课程表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> course (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">no</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) PRIMARY <span class="code-snippet__keyword">KEY</span>,</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>,</span></code><code><span class="code-snippet_outer">    t_no <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>, <span class="code-snippet__comment">-- 教师编号</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__comment">-- 表示该 tno 来自于 teacher 表中的 no 字段值</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">FOREIGN</span> <span class="code-snippet__keyword">KEY</span>(t_no) <span class="code-snippet__keyword">REFERENCES</span> teacher(<span class="code-snippet__keyword">no</span>)</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 成绩表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> score (</span></code><code><span class="code-snippet_outer">    s_no <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>, <span class="code-snippet__comment">-- 学生编号</span></span></code><code><span class="code-snippet_outer">    c_no <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>) <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__literal">NULL</span>, <span class="code-snippet__comment">-- 课程号</span></span></code><code><span class="code-snippet_outer">    degree <span class="code-snippet__built_in">DECIMAL</span>,  <span class="code-snippet__comment">-- 成绩</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__comment">-- 表示该 s_no, c_no 分别来自于 student, course 表中的 no 字段值</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">FOREIGN</span> <span class="code-snippet__keyword">KEY</span>(s_no) <span class="code-snippet__keyword">REFERENCES</span> student(<span class="code-snippet__keyword">no</span>),</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">FOREIGN</span> <span class="code-snippet__keyword">KEY</span>(c_no) <span class="code-snippet__keyword">REFERENCES</span> course(<span class="code-snippet__keyword">no</span>),</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__comment">-- 设置 s_no, c_no 为联合主键</span></span></code><code><span class="code-snippet_outer">    PRIMARY <span class="code-snippet__keyword">KEY</span>(s_no, c_no)</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查看所有表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SHOW</span> <span class="code-snippet__keyword">TABLES</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 添加学生表数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'101'</span>, <span class="code-snippet__string">'曾华'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1977-09-01'</span>, <span class="code-snippet__string">'95033'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'102'</span>, <span class="code-snippet__string">'匡明'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1975-10-02'</span>, <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'103'</span>, <span class="code-snippet__string">'王丽'</span>, <span class="code-snippet__string">'女'</span>, <span class="code-snippet__string">'1976-01-23'</span>, <span class="code-snippet__string">'95033'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'104'</span>, <span class="code-snippet__string">'李军'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1976-02-20'</span>, <span class="code-snippet__string">'95033'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'105'</span>, <span class="code-snippet__string">'王芳'</span>, <span class="code-snippet__string">'女'</span>, <span class="code-snippet__string">'1975-02-10'</span>, <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'106'</span>, <span class="code-snippet__string">'陆军'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1974-06-03'</span>, <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'107'</span>, <span class="code-snippet__string">'王尼玛'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1976-02-20'</span>, <span class="code-snippet__string">'95033'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'108'</span>, <span class="code-snippet__string">'张全蛋'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1975-02-10'</span>, <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> student <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'109'</span>, <span class="code-snippet__string">'赵铁柱'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1974-06-03'</span>, <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 添加教师表数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> teacher <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'804'</span>, <span class="code-snippet__string">'李诚'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1958-12-02'</span>, <span class="code-snippet__string">'副教授'</span>, <span class="code-snippet__string">'计算机系'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> teacher <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'856'</span>, <span class="code-snippet__string">'张旭'</span>, <span class="code-snippet__string">'男'</span>, <span class="code-snippet__string">'1969-03-12'</span>, <span class="code-snippet__string">'讲师'</span>, <span class="code-snippet__string">'电子工程系'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> teacher <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'825'</span>, <span class="code-snippet__string">'王萍'</span>, <span class="code-snippet__string">'女'</span>, <span class="code-snippet__string">'1972-05-05'</span>, <span class="code-snippet__string">'助教'</span>, <span class="code-snippet__string">'计算机系'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> teacher <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'831'</span>, <span class="code-snippet__string">'刘冰'</span>, <span class="code-snippet__string">'女'</span>, <span class="code-snippet__string">'1977-08-14'</span>, <span class="code-snippet__string">'助教'</span>, <span class="code-snippet__string">'电子工程系'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 添加课程表数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> course <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'计算机导论'</span>, <span class="code-snippet__string">'825'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> course <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'3-245'</span>, <span class="code-snippet__string">'操作系统'</span>, <span class="code-snippet__string">'804'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> course <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'6-166'</span>, <span class="code-snippet__string">'数字电路'</span>, <span class="code-snippet__string">'856'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> course <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'9-888'</span>, <span class="code-snippet__string">'高等数学'</span>, <span class="code-snippet__string">'831'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 添加添加成绩表数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'103'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'92'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'103'</span>, <span class="code-snippet__string">'3-245'</span>, <span class="code-snippet__string">'86'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'103'</span>, <span class="code-snippet__string">'6-166'</span>, <span class="code-snippet__string">'85'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'105'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'88'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'105'</span>, <span class="code-snippet__string">'3-245'</span>, <span class="code-snippet__string">'75'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'105'</span>, <span class="code-snippet__string">'6-166'</span>, <span class="code-snippet__string">'79'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'109'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'76'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'109'</span>, <span class="code-snippet__string">'3-245'</span>, <span class="code-snippet__string">'68'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span>(<span class="code-snippet__string">'109'</span>, <span class="code-snippet__string">'6-166'</span>, <span class="code-snippet__string">'81'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查看表结构</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> course;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> teacher;</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;">基础查询<br  /></p></li></ul><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 student 表的所有行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 student 表中的 name、sex 和 class 字段的所有行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">name</span>, sex, <span class="code-snippet__keyword">class</span> <span class="code-snippet__keyword">FROM</span> student;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 teacher 表中不重复的 department 列</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- department: 去重查询</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">DISTINCT</span> department <span class="code-snippet__keyword">FROM</span> teacher;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 score 表中成绩在60-80之间的所有行（区间查询和运算符查询）</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- BETWEEN xx AND xx: 查询区间, AND 表示 "并且"</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> degree <span class="code-snippet__keyword">BETWEEN</span> <span class="code-snippet__number">60</span> <span class="code-snippet__keyword">AND</span> <span class="code-snippet__number">80</span>;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> degree &gt; <span class="code-snippet__number">60</span> <span class="code-snippet__keyword">AND</span> degree &lt; <span class="code-snippet__number">80</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 score 表中成绩为 85, 86 或 88 的行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- IN: 查询规定中的多个值</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> degree <span class="code-snippet__keyword">IN</span> (<span class="code-snippet__number">85</span>, <span class="code-snippet__number">86</span>, <span class="code-snippet__number">88</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 student 表中 '95031' 班或性别为 '女' 的所有行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- or: 表示或者关系</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">class</span> = <span class="code-snippet__string">'95031'</span> <span class="code-snippet__keyword">or</span> sex = <span class="code-snippet__string">'女'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 以 class 降序的方式查询 student 表的所有行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- DESC: 降序，从高到低</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- ASC（默认）: 升序，从低到高</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">ORDER</span> <span class="code-snippet__keyword">BY</span> <span class="code-snippet__keyword">class</span> <span class="code-snippet__keyword">DESC</span>;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">ORDER</span> <span class="code-snippet__keyword">BY</span> <span class="code-snippet__keyword">class</span> <span class="code-snippet__keyword">ASC</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 以 c_no 升序、degree 降序查询 score 表的所有行</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">ORDER</span> <span class="code-snippet__keyword">BY</span> c_no <span class="code-snippet__keyword">ASC</span>, degree <span class="code-snippet__keyword">DESC</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 "95031" 班的学生人数</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- COUNT: 统计</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">COUNT</span>(*) <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">class</span> = <span class="code-snippet__string">'95031'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 score 表中的最高分的学生学号和课程编号（子查询或排序查询）。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- (SELECT MAX(degree) FROM score): 子查询，算出最高分</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> s_no, c_no <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> degree = (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">MAX</span>(degree) <span class="code-snippet__keyword">FROM</span> score);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">--  排序查询</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- LIMIT r, n: 表示从第r行开始，查询n条数据</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> s_no, c_no, degree <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">ORDER</span> <span class="code-snippet__keyword">BY</span> degree <span class="code-snippet__keyword">DESC</span> <span class="code-snippet__keyword">LIMIT</span> <span class="code-snippet__number">0</span>, <span class="code-snippet__number">1</span>;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- LIMIT n offset r: 表示查询n条数据,从第r行开始</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> s_no, c_no, degree <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">ORDER</span> <span class="code-snippet__keyword">BY</span> degree <span class="code-snippet__keyword">DESC</span> <span class="code-snippet__keyword">LIMIT</span> <span class="code-snippet__number">1</span> <span class="code-snippet__keyword">offset</span> <span class="code-snippet__number">0</span>;</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">分组计算平均成绩</span></strong><span style="font-size: 15px;"></span></h2></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">查询每门课的平均成绩</span></strong><span style="font-size: 15px;"></span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- AVG: 平均值</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">AVG</span>(degree) <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = <span class="code-snippet__string">'3-105'</span>;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">AVG</span>(degree) <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = <span class="code-snippet__string">'3-245'</span>;</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">AVG</span>(degree) <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = <span class="code-snippet__string">'6-166'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- GROUP BY: 分组查询</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> c_no, <span class="code-snippet__keyword">AVG</span>(degree) <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">GROUP</span> <span class="code-snippet__keyword">BY</span> c_no;</span></code></pre></section><p><strong style="font-size: 16px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"><span style="font-size: 15px;"><br  /></span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><strong style="font-size: 16px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"><span style="font-size: 15px;">分组条件与模糊查询</span></strong></p></li></ul><p><br  /></p><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"></span></h2></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong><strong><code>score</code>表中至少有 2 名学生选修，并以 3 开头的课程的平均分数</strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">分析表发现，至少有 2 名学生选修的课程是3-105、3-245、6-166，以 3 开头的课程是3-105、3-245。也就是说，我们要查询所有3-105和3-245的degree平均分。</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- 首先把 c_no, AVG(degree) 通过分组查询出来</span></code><code><span class="code-snippet_outer">SELECT c_no, AVG(degree) FROM score GROUP BY c_no</span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| c_no  |</span> AVG(degree) <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     85.3333 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-245 |</span>     <span class="code-snippet__number">76.3333</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81.6667 |</span></span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- 再查询出至少有 <span class="code-snippet__number">2</span> 名学生选修的课程</span></code><code><span class="code-snippet_outer">-- <span class="code-snippet__symbol">HAVING:</span> 表示持有</span></code><code><span class="code-snippet_outer">HAVING COUNT(c_no) &gt;= <span class="code-snippet__number">2</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- 并且是以 <span class="code-snippet__number">3</span> 开头的课程</span></code><code><span class="code-snippet_outer">-- LIKE 表示模糊查询，<span class="code-snippet__string">"%"</span> 是一个通配符，匹配 <span class="code-snippet__string">"3"</span> 后面的任意字符。</span></code><code><span class="code-snippet_outer">AND c_no LIKE <span class="code-snippet__string">'3%'</span>;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- 把前面的SQL语句拼接起来，</span></code><code><span class="code-snippet_outer">-- 后面加上一个 COUNT(*)，表示将每个分组的个数也查询出来。</span></code><code><span class="code-snippet_outer">SELECT c_no, AVG(degree), COUNT(*) FROM score GROUP BY c_no</span></code><code><span class="code-snippet_outer">HAVING COUNT(c_no) &gt;= <span class="code-snippet__number">2</span> AND c_no LIKE <span class="code-snippet__string">'3%'</span>;</span></code><code><span class="code-snippet_outer">+-------+-------------+----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| c_no  |</span> AVG(degree) <span class="code-snippet__params">| COUNT(*) |</span></span></code><code><span class="code-snippet_outer">+-------+-------------+----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-105 |</span>     <span class="code-snippet__number">85.3333</span> <span class="code-snippet__params">|        3 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-245 |</span>     <span class="code-snippet__number">76.3333</span> <span class="code-snippet__params">|        3 |</span></span></code><code><span class="code-snippet_outer">+-------+-------------+----------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">多表查询 - 1</span></strong></h2></li></ul><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"></span></h2><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有学生的</strong><strong><code>name</code>，以及该学生在<code>score</code>表中对应的<code>c_no</code>和<code>degree</code></strong></span> </p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT no, name FROM student;</span></code><code><span class="code-snippet_outer">+-----+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| no  |</span> name      <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer">+-----+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">101</span> <span class="code-snippet__params">| 曾华      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102 |</span> 匡明      <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">103</span> <span class="code-snippet__params">| 王丽      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104 |</span> 李军      <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">105</span> <span class="code-snippet__params">| 王芳      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 106 |</span> 陆军      <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">107</span> <span class="code-snippet__params">| 王尼玛    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 108 |</span> 张全蛋    <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">109</span> <span class="code-snippet__params">| 赵铁柱    |</span></span></code><code><span class="code-snippet_outer">+-----+-----------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">SELECT s_no, c_no, degree FROM score;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">通过分析可以发现，只要把</span><code><span style="font-size: 15px;">score</span></code><span style="font-size: 15px;">表中的</span><code><span style="font-size: 15px;">s_no</span></code><span style="font-size: 15px;">字段值替换成</span><code><span style="font-size: 15px;">student</span></code><span style="font-size: 15px;">表中对应的</span><code><span style="font-size: 15px;">name</span></code><span style="font-size: 15px;">字段值就可以了，如何做呢？</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- FROM...: 表示从 student, score 表中查询</span></code><code><span class="code-snippet_outer">-- WHERE 的条件表示为，只有在 student.no 和 score.s_no 相等时才显示出来。</span></code><code><span class="code-snippet_outer">SELECT name, c_no, degree FROM student, score</span></code><code><span class="code-snippet_outer">WHERE student.no = score.s_no;</span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| name      |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">多表查询 - 2</span></strong><span style="font-size: 15px;"></span></h3></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有学生的</strong> <strong><code>no</code></strong></span> <span style="font-size: 15px;"><strong>、课程名称 (</strong> <strong><code>course</code></strong></span> <span style="font-size: 15px;"><strong>表中的</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>) 和成绩 (</strong> <strong><code>score</code></strong></span> <span style="font-size: 15px;"><strong>表中的</strong> <strong><code>degree</code></strong></span> <span style="font-size: 15px;"><strong>) 列。</strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong><br  /></strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">只有score关联学生的no，因此只要查询score表，就能找出所有和学生相关的no和degree：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT s_no, c_no, degree FROM score;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">然后查询course表：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span>, <span class="code-snippet__keyword">name</span> <span class="code-snippet__keyword">FROM</span> course;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code><code><span class="code-snippet_outer">| no    | name            |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code><code><span class="code-snippet_outer">| 3-105 | 计算机导论      |</span></code><code><span class="code-snippet_outer">| 3-245 | 操作系统        |</span></code><code><span class="code-snippet_outer">| 6-166 | 数字电路        |</span></code><code><span class="code-snippet_outer">| 9-888 | 高等数学        |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">只要把score表中的c_no替换成course表中对应的name字段值就可以了。</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- 增加一个查询字段 name，分别从 score、course 这两个表中查询。</span></code><code><span class="code-snippet_outer">-- as 表示取一个该字段的别名。</span></code><code><span class="code-snippet_outer">SELECT s_no, name as c_name, degree FROM score, course</span></code><code><span class="code-snippet_outer">WHERE score.c_no = course.no;</span></code><code><span class="code-snippet_outer">+------+-----------------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_name          <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-----------------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> 计算机导论      <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> 计算机导论      <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> 计算机导论      <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> 操作系统        <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> 操作系统        <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> 操作系统        <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> 数字电路        <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> 数字电路        <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> 数字电路        <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-----------------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">三表关联查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有学生的</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>、课程名 (</strong> <strong><code>course</code></strong></span> <span style="font-size: 15px;"><strong>表中的</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>) 和</strong> <strong><code>degree</code></strong></span> <span style="font-size: 15px;"><strong>。</strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">只有score表中关联学生的学号和课堂号，我们只要围绕着score这张表查询就好了。</span></p><pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"></span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT * FROM score;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">只要把 s_no 和 c_no 替换成 student 和 course 表中对应的 name 字段值就好了。</span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">首先把 s_no 替换成 student 表中的 name 字段：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT name, c_no, degree FROM student, score WHERE student.no = score.s_no;</span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| name      |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王丽      |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 王芳      |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 赵铁柱    |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+-----------+-------+--------+</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">再把c_no替换成course表中的name字段：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 课程表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span>, <span class="code-snippet__keyword">name</span> <span class="code-snippet__keyword">FROM</span> course;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code><code><span class="code-snippet_outer">| no    | name            |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code><code><span class="code-snippet_outer">| 3-105 | 计算机导论      |</span></code><code><span class="code-snippet_outer">| 3-245 | 操作系统        |</span></code><code><span class="code-snippet_outer">| 6-166 | 数字电路        |</span></code><code><span class="code-snippet_outer">| 9-888 | 高等数学        |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-----------------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 由于字段名存在重复，使用 "表名.字段名 as 别名" 代替。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> student.name <span class="code-snippet__keyword">as</span> s_name, course.name <span class="code-snippet__keyword">as</span> c_name, degree</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">FROM</span> student, score, course</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">WHERE</span> student.NO = score.s_no</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">AND</span> score.c_no = course.no;</span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询加分组求平均分</span></strong><span style="font-size: 15px;"></span></h2></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong><strong><code>95031</code>班学生每门课程的平均成绩。</strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">在score表中根据student表的学生编号筛选出学生的课堂号和成绩：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- IN (..): 将筛选出的学生号当做 s_no 的条件查询</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> s_no, c_no, degree <span class="code-snippet__keyword">FROM</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">WHERE</span> s_no <span class="code-snippet__keyword">IN</span> (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">class</span> = <span class="code-snippet__string">'95031'</span>);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 105  | 3-105 |     88 |</span></code><code><span class="code-snippet_outer">| 105  | 3-245 |     75 |</span></code><code><span class="code-snippet_outer">| 105  | 6-166 |     79 |</span></code><code><span class="code-snippet_outer">| 109  | 3-105 |     76 |</span></code><code><span class="code-snippet_outer">| 109  | 3-245 |     68 |</span></code><code><span class="code-snippet_outer">| 109  | 6-166 |     81 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">这时只要将c_no分组一下就能得出95031班学生每门课的平均成绩：</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> c_no, <span class="code-snippet__keyword">AVG</span>(degree) <span class="code-snippet__keyword">FROM</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">WHERE</span> s_no <span class="code-snippet__keyword">IN</span> (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">class</span> = <span class="code-snippet__string">'95031'</span>)</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">GROUP</span> <span class="code-snippet__keyword">BY</span> c_no;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-------------+</span></span></code><code><span class="code-snippet_outer">| c_no  | AVG(degree) |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-------------+</span></span></code><code><span class="code-snippet_outer">| 3-105 |     82.0000 |</span></code><code><span class="code-snippet_outer">| 3-245 |     71.5000 |</span></code><code><span class="code-snippet_outer">| 6-166 |     80.0000 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+-------------+</span></span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></p></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 1</span></strong><span style="font-size: 15px;"></span></h3></li></ul><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询在</strong> <strong><code>3-105</code></strong></span> <span style="font-size: 15px;"><strong>课程中，所有成绩高于</strong> <strong><code>109</code></strong></span> <span style="font-size: 15px;"><strong>号同学的记录。</strong></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></p><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">先用子查询查找出109同学在3-105中的成绩</span></p><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> * <span class="code-snippet__keyword">from</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> c_no =<span class="code-snippet__string">'3-105'</span> <span class="code-snippet__keyword">and</span> s_no=<span class="code-snippet__string">'109'</span></span></code></pre></section><p style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></p></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">然后再以课程3-105为条件，查找成绩大76的记录</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> * <span class="code-snippet__keyword">from</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> c_no = <span class="code-snippet__string">'3-105'</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">and</span> degree&gt;</span></code><code><span class="code-snippet_outer">(<span class="code-snippet__keyword">select</span> degree <span class="code-snippet__keyword">from</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> c_no = <span class="code-snippet__string">'3-105'</span> <span class="code-snippet__keyword">and</span> s_no=<span class="code-snippet__string">'109'</span>);</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 2</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong><br  /></strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有成绩高于</strong> <strong><code>109</code></strong></span> <span style="font-size: 15px;"><strong>号同学的</strong> <strong><code>3-105</code></strong></span> <span style="font-size: 15px;"><strong>课程成绩记录。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 不限制课程号，只要成绩大于109号同学的3-105课程成绩就可以。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">WHERE</span> degree &gt; (<span class="code-snippet__keyword">SELECT</span> degree <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> s_no = <span class="code-snippet__string">'109'</span> <span class="code-snippet__keyword">AND</span> c_no = <span class="code-snippet__string">'3-105'</span>);</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">YEAR 函数与带 IN 关键字查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">查询所有和 <code>101</code></span> <span style="font-size: 15px;">、<code>108</code></span> <span style="font-size: 15px;">号学生同年出生的 <code>no</code></span> <span style="font-size: 15px;">、<code>name</code></span> <span style="font-size: 15px;">、<code>birthday</code></span> <span style="font-size: 15px;">列。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">no</span>, <span class="code-snippet__keyword">name</span>, birthday <span class="code-snippet__keyword">from</span> student</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> <span class="code-snippet__keyword">year</span>(birthday) <span class="code-snippet__keyword">in</span> (</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">year</span>(birthday) <span class="code-snippet__keyword">from</span> student</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">in</span> (<span class="code-snippet__number">101</span>,<span class="code-snippet__number">108</span>));</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">多层嵌套子查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong><br  /></strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong> <strong><code>'张旭'</code></strong></span> <span style="font-size: 15px;"><strong>教师任课的学生成绩表。</strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">用的三张表teacher、course、score，</span><span style="font-size: 15px;">首先找到教师编号：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">NO</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">NAME</span> = <span class="code-snippet__string">'张旭'</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">通过</span><code><span style="font-size: 15px;">sourse</span></code><span style="font-size: 15px;">表找到该教师课程号：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">from</span> course</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> t_no = (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">NO</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">NAME</span> = <span class="code-snippet__string">'张旭'</span>)</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">通过筛选出的课程号查询成绩表：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> * <span class="code-snippet__keyword">from</span> score <span class="code-snippet__keyword">where</span> c_no = (</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">from</span> course <span class="code-snippet__keyword">where</span> t_no = (</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">from</span> teacher</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">where</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'张旭'</span>));</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">多表查询</span></strong></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong><br  /></strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询某选修课程多于5个同学的教师姓名。</strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">首先在</span><code><span style="font-size: 15px;">teacher</span></code><span style="font-size: 15px;">表中，根据</span><code><span style="font-size: 15px;">no</span></code><span style="font-size: 15px;">字段来判断该教师的同一门课程是否有至少5名学员选修：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 teacher 表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span>, <span class="code-snippet__keyword">name</span> <span class="code-snippet__keyword">FROM</span> teacher;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+</span></span></code><code><span class="code-snippet_outer">| no  | name   |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+</span></span></code><code><span class="code-snippet_outer">| 804 | 李诚   |</span></code><code><span class="code-snippet_outer">| 825 | 王萍   |</span></code><code><span class="code-snippet_outer">| 831 | 刘冰   |</span></code><code><span class="code-snippet_outer">| 856 | 张旭   |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">name</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__comment">-- 在这里找到对应的条件</span></span></code><code><span class="code-snippet_outer">);</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">查看和教师编号有有关的表的信息：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT * FROM course;</span></code><code><span class="code-snippet_outer">-- <span class="code-snippet__symbol">t_no:</span> 教师编号</span></code><code><span class="code-snippet_outer">+-------+-----------------+------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| no    |</span> name            <span class="code-snippet__params">| t_no |</span></span></code><code><span class="code-snippet_outer">+-------+-----------------+------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-105 |</span> 计算机导论      <span class="code-snippet__params">| 825  |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-245 |</span> 操作系统        <span class="code-snippet__params">| 804  |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 6-166 |</span> 数字电路        <span class="code-snippet__params">| 856  |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 9-888 |</span> 高等数学        <span class="code-snippet__params">| 831  |</span></span></code><code><span class="code-snippet_outer">+-------+-----------------+------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">我们已经找到和教师编号有关的字段就在</span><code><span style="font-size: 15px;">course</span></code><span style="font-size: 15px;">表中，但是还无法知道哪门课程至少有5名学生选修，所以还需要根据</span><code><span style="font-size: 15px;">score</span></code><span style="font-size: 15px;">表来查询：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 在此之前向 score 插入一些数据，以便丰富查询条件。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__string">'101'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'90'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__string">'102'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'91'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> score <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__string">'104'</span>, <span class="code-snippet__string">'3-105'</span>, <span class="code-snippet__string">'89'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查询 score 表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 101  | 3-105 |     90 |</span></code><code><span class="code-snippet_outer">| 102  | 3-105 |     91 |</span></code><code><span class="code-snippet_outer">| 103  | 3-105 |     92 |</span></code><code><span class="code-snippet_outer">| 103  | 3-245 |     86 |</span></code><code><span class="code-snippet_outer">| 103  | 6-166 |     85 |</span></code><code><span class="code-snippet_outer">| 104  | 3-105 |     89 |</span></code><code><span class="code-snippet_outer">| 105  | 3-105 |     88 |</span></code><code><span class="code-snippet_outer">| 105  | 3-245 |     75 |</span></code><code><span class="code-snippet_outer">| 105  | 6-166 |     79 |</span></code><code><span class="code-snippet_outer">| 109  | 3-105 |     76 |</span></code><code><span class="code-snippet_outer">| 109  | 3-245 |     68 |</span></code><code><span class="code-snippet_outer">| 109  | 6-166 |     81 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 在 score 表中将 c_no 作为分组，并且限制 c_no 持有至少 5 条数据。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> c_no <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">GROUP</span> <span class="code-snippet__keyword">BY</span> c_no <span class="code-snippet__keyword">HAVING</span> <span class="code-snippet__keyword">COUNT</span>(*) &gt; <span class="code-snippet__number">5</span>;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code><code><span class="code-snippet_outer">| c_no  |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code><code><span class="code-snippet_outer">| 3-105 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">根据筛选出来的课程号，找出在某课程中，拥有至少5名学员的教师编号：</span></section><pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code></section></pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> t_no <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> c_no <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">GROUP</span> <span class="code-snippet__keyword">BY</span> c_no <span class="code-snippet__keyword">HAVING</span> <span class="code-snippet__keyword">COUNT</span>(*) &gt; <span class="code-snippet__number">5</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+</span></span></code><code><span class="code-snippet_outer">| t_no |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+</span></span></code><code><span class="code-snippet_outer">| 825  |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+在teacher表中，根据筛选出来的教师编号找到教师姓名：SELECT name FROM teacher WHERE no IN (</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__comment">-- 最终条件</span></span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> t_no <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">        <span class="code-snippet__keyword">SELECT</span> c_no <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">GROUP</span> <span class="code-snippet__keyword">BY</span> c_no <span class="code-snippet__keyword">HAVING</span> <span class="code-snippet__keyword">COUNT</span>(*) &gt; <span class="code-snippet__number">5</span></span></code><code><span class="code-snippet_outer">    )</span></code><code><span class="code-snippet_outer">);</span></code></pre></section><pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code></section></pre><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></h2><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 3</span></strong><span style="font-size: 15px;"></span></h2></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询 “计算机系” 课程的成绩表。</strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">思路是，先找出teacher表中所有</span><code><span style="font-size: 15px;">计算机系</span></code><span style="font-size: 15px;">课程的编号，根据这个编号查询course表中的课程编号，再用课程编号查找score表</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 通过 teacher 表查询所有 `计算机系` 的教师编号</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span>, <span class="code-snippet__keyword">name</span>, department <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'计算机系'</span></span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+--------------+</span></span></code><code><span class="code-snippet_outer">| <span class="code-snippet__keyword">no</span>  | <span class="code-snippet__keyword">name</span>   | department   |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+--------------+</span></span></code><code><span class="code-snippet_outer">| <span class="code-snippet__number">804</span> | 李诚   | 计算机系     |</span></code><code><span class="code-snippet_outer">| <span class="code-snippet__number">825</span> | 王萍   | 计算机系     |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+--------+--------------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 通过 course 表查询该教师的课程编号</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> t_no <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'计算机系'</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code><code><span class="code-snippet_outer">| no    |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code><code><span class="code-snippet_outer">| 3-245 |</span></code><code><span class="code-snippet_outer">| 3-105 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 根据筛选出来的课程号查询成绩表</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> t_no <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">        <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'计算机系'</span></span></code><code><span class="code-snippet_outer">    )</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 103  | 3-245 |     86 |</span></code><code><span class="code-snippet_outer">| 105  | 3-245 |     75 |</span></code><code><span class="code-snippet_outer">| 109  | 3-245 |     68 |</span></code><code><span class="code-snippet_outer">| 101  | 3-105 |     90 |</span></code><code><span class="code-snippet_outer">| 102  | 3-105 |     91 |</span></code><code><span class="code-snippet_outer">| 103  | 3-105 |     92 |</span></code><code><span class="code-snippet_outer">| 104  | 3-105 |     89 |</span></code><code><span class="code-snippet_outer">| 105  | 3-105 |     88 |</span></code><code><span class="code-snippet_outer">| 109  | 3-105 |     76 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><p><strong><span style="font-size: 15px;">UNION 和 NOT IN 的使用</span></strong><span style="font-size: 15px;"></span></p></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong><strong><code>计算机系</code>与<code>电子工程系</code>中的不同职称的教师。</strong></span></section><pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code></section></pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+------------+------------+</span></span></code><code><span class="code-snippet_outer">| no  | name | sex | birthday   | profession | department |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+------------+------------+</span></span></code><code><span class="code-snippet_outer">| 804 | 李诚 | 男  | 1958-12-02 | 副教授     | 计算机系   |</span></code><code><span class="code-snippet_outer">| 825 | 王萍 | 女  | 1972-05-05 | 助教       | 计算机系   |</span></code><code><span class="code-snippet_outer">| 831 | 刘冰 | 女  | 1977-08-14 | 助教       | 电子工程系 |</span></code><code><span class="code-snippet_outer">| 856 | 张旭 | 男  | 1969-03-12 | 讲师       | 电子工程系 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+------------+------------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- NOT: 代表逻辑非</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'计算机系'</span> <span class="code-snippet__keyword">AND</span> profession <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> profession <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'电子工程系'</span></span></code><code><span class="code-snippet_outer">)</span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 合并两个集</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">UNION</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'电子工程系'</span> <span class="code-snippet__keyword">AND</span> profession <span class="code-snippet__keyword">NOT</span> <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> profession <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> department = <span class="code-snippet__string">'计算机系'</span></span></code><code><span class="code-snippet_outer">);</span></code></pre></section><p><br  /></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">ANY 表示至少一个 - DESC ( 降序 )</span></strong></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询课程</strong> <strong><code>3-105</code></strong></span> <span style="font-size: 15px;"><strong>且成绩 至少 高于</strong> <strong><code>3-245</code></strong></span> <span style="font-size: 15px;"><strong>的</strong> <strong><code>score</code></strong></span> <span style="font-size: 15px;"><strong>表。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT * FROM score WHERE c_no = <span class="code-snippet__string">'3-105'</span>;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     90 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     91 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     89 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">SELECT * FROM score WHERE c_no = <span class="code-snippet__string">'3-245'</span>;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- <span class="code-snippet__symbol">ANY:</span> 符合SQL语句中的任意条件。</span></code><code><span class="code-snippet_outer">-- 也就是说，在 <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> 成绩中，只要有一个大于从 <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> 筛选出来的任意行就符合条件，</span></code><code><span class="code-snippet_outer">-- 最后根据降序查询结果。</span></code><code><span class="code-snippet_outer">SELECT * FROM score WHERE c_no = <span class="code-snippet__string">'3-105'</span> AND degree &gt; ANY(</span></code><code><span class="code-snippet_outer">    SELECT degree FROM score WHERE c_no = <span class="code-snippet__string">'3-245'</span></span></code><code><span class="code-snippet_outer">) ORDER BY degree DESC;</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     91 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     90 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     89 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">表示所有的 ALL</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong><br  /></strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询课程</strong> <strong><code>3-105</code></strong></span> <span style="font-size: 15px;"><strong>且成绩高于</strong> <strong><code>3-245</code></strong></span> <span style="font-size: 15px;"><strong>的</strong> <strong><code>score</code></strong></span> <span style="font-size: 15px;"><strong>表。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 只需对上一道题稍作修改。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- ALL: 符合SQL语句中的所有条件。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 也就是说，在 3-105 每一行成绩中，都要大于从 3-245 筛选出来全部行才算符合条件。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = <span class="code-snippet__string">'3-105'</span> <span class="code-snippet__keyword">AND</span> degree &gt; <span class="code-snippet__keyword">ALL</span>(</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> degree <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = <span class="code-snippet__string">'3-245'</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 101  | 3-105 |     90 |</span></code><code><span class="code-snippet_outer">| 102  | 3-105 |     91 |</span></code><code><span class="code-snippet_outer">| 103  | 3-105 |     92 |</span></code><code><span class="code-snippet_outer">| 104  | 3-105 |     89 |</span></code><code><span class="code-snippet_outer">| 105  | 3-105 |     88 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h2 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">复制表的数据作为条件查询</span></strong><span style="font-size: 15px;"></span></h2></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询某课程成绩比该课程平均成绩低的</strong><strong><code>score</code>表。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- 查询平均分</span></code><code><span class="code-snippet_outer">SELECT c_no, AVG(degree) FROM score GROUP BY c_no;</span></code><code><span class="code-snippet_outer">b表</span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| c_no  |</span> AVG(degree) <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     87.6667 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 3-245 |</span>     <span class="code-snippet__number">76.3333</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81.6667 |</span></span></code><code><span class="code-snippet_outer">+-------+-------------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- 查询 score 表</span></code><code><span class="code-snippet_outer">select * from score;</span></code><code><span class="code-snippet_outer">a表</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     90 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     91 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     92 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     86 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     85 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     89 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     88 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- 将表 b 作用于表 a 中查询数据</span></code><code><span class="code-snippet_outer">-- score a (b): 将表声明为 a (b)，</span></code><code><span class="code-snippet_outer">-- 如此就能用 a.c_no = b.c_no 作为条件执行查询了。</span></code><code><span class="code-snippet_outer">SELECT * FROM score a WHERE degree &lt; (</span></code><code><span class="code-snippet_outer">    (SELECT AVG(degree) FROM score b WHERE a.c_no = b.c_no)</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| degree |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     75 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     79 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">|     76 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">|     68 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">|     81 |</span></span></code><code><span class="code-snippet_outer">+------+-------+--------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 4</span></strong></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有任课 ( 在</strong> <strong><code>course</code></strong></span> <span style="font-size: 15px;"><strong>表里有课程 ) 教师的</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>和</strong> <strong><code>department</code></strong> 。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">name</span>, department <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">IN</span> (<span class="code-snippet__keyword">SELECT</span> t_no <span class="code-snippet__keyword">FROM</span> course);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+-----------------+</span></span></code><code><span class="code-snippet_outer">| name   | department      |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+-----------------+</span></span></code><code><span class="code-snippet_outer">| 李诚   | 计算机系        |</span></code><code><span class="code-snippet_outer">| 王萍   | 计算机系        |</span></code><code><span class="code-snippet_outer">| 刘冰   | 电子工程系      |</span></code><code><span class="code-snippet_outer">| 张旭   | 电子工程系      |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+-----------------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">条件加组筛选</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong> <strong><code>student</code></strong></span> <span style="font-size: 15px;"><strong>表中至少有 2 名男生的</strong> <strong><code>class</code></strong></span> <span style="font-size: 15px;"><strong>。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 查看学生表信息</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> student;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+-----------+-----+------------+-------+</span></span></code><code><span class="code-snippet_outer">| no  | name      | sex | birthday   | class |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+-----------+-----+------------+-------+</span></span></code><code><span class="code-snippet_outer">| 101 | 曾华      | 男  | 1977-09-01 | 95033 |</span></code><code><span class="code-snippet_outer">| 102 | 匡明      | 男  | 1975-10-02 | 95031 |</span></code><code><span class="code-snippet_outer">| 103 | 王丽      | 女  | 1976-01-23 | 95033 |</span></code><code><span class="code-snippet_outer">| 104 | 李军      | 男  | 1976-02-20 | 95033 |</span></code><code><span class="code-snippet_outer">| 105 | 王芳      | 女  | 1975-02-10 | 95031 |</span></code><code><span class="code-snippet_outer">| 106 | 陆军      | 男  | 1974-06-03 | 95031 |</span></code><code><span class="code-snippet_outer">| 107 | 王尼玛    | 男  | 1976-02-20 | 95033 |</span></code><code><span class="code-snippet_outer">| 108 | 张全蛋    | 男  | 1975-02-10 | 95031 |</span></code><code><span class="code-snippet_outer">| 109 | 赵铁柱    | 男  | 1974-06-03 | 95031 |</span></code><code><span class="code-snippet_outer">| 110 | 张飞      | 男  | 1974-06-03 | 95038 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+-----------+-----+------------+-------+</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 只查询性别为男，然后按 class 分组，并限制 class 行大于 1。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> * <span class="code-snippet__keyword">from</span> student <span class="code-snippet__keyword">where</span> sex=<span class="code-snippet__string">'男'</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">group</span> <span class="code-snippet__keyword">by</span> <span class="code-snippet__keyword">class</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">having</span> <span class="code-snippet__keyword">count</span>(<span class="code-snippet__keyword">class</span>)&gt;=<span class="code-snippet__number">2</span>；</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+-------+</span></span></code><code><span class="code-snippet_outer">| <span class="code-snippet__keyword">no</span>  | <span class="code-snippet__keyword">name</span> | sex | birthday   | <span class="code-snippet__keyword">class</span> |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+-------+</span></span></code><code><span class="code-snippet_outer">| <span class="code-snippet__number">101</span> | 曾华 | 男  | <span class="code-snippet__number">1977</span><span class="code-snippet__number">-09</span><span class="code-snippet__number">-01</span> | <span class="code-snippet__number">95033</span> |</span></code><code><span class="code-snippet_outer">| <span class="code-snippet__number">102</span> | 匡明 | 男  | <span class="code-snippet__number">1975</span><span class="code-snippet__number">-10</span><span class="code-snippet__number">-02</span> | <span class="code-snippet__number">95031</span> |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----+------+-----+------------+-------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">NOT LIKE 模糊查询取反</span></strong></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong style="font-size: 15px;">查询 </strong><strong style="font-size: 15px;"><code>student</code> 表中不姓 "王" 的同学记录。</strong><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- <span class="code-snippet__symbol">NOT:</span> 取反</span></code><code><span class="code-snippet_outer">-- <span class="code-snippet__symbol">LIKE:</span> 模糊查询</span></code><code><span class="code-snippet_outer">mysql&gt; SELECT * FROM student WHERE name NOT LIKE <span class="code-snippet__string">'王%'</span>;</span></code><code><span class="code-snippet_outer">+-----+-----------+-----+------------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| no  |</span> name      <span class="code-snippet__params">| sex |</span> birthday   <span class="code-snippet__params">| <span class="code-snippet__keyword">class</span> |</span></span></code><code><span class="code-snippet_outer">+-----+-----------+-----+------------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101 |</span> 曾华      <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1977</span>-09-<span class="code-snippet__number">01</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102 |</span> 匡明      <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1975</span>-<span class="code-snippet__number">10</span>-<span class="code-snippet__number">02</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104 |</span> 李军      <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1976</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">20</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 106 |</span> 陆军      <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 108 |</span> 张全蛋    <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1975</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">10</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109 |</span> 赵铁柱    <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 110 |</span> 张飞      <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95038 |</span></span></code><code><span class="code-snippet_outer">+-----+-----------+-----+------------+-------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">YEAR 与 NOW 函数</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong> <strong><code>student</code></strong></span> <span style="font-size: 15px;"><strong>表中每个学生的姓名和年龄。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">select name, year(now())-year(birthday) as age</span></code><code><span class="code-snippet_outer">from student;</span></code><code><span class="code-snippet_outer">+-----------+------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| name      |</span> age  <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer">+-----------+------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> 曾华      <span class="code-snippet__params">|   42 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 匡明      |</span>   <span class="code-snippet__number">44</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> 王丽      <span class="code-snippet__params">|   43 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 李军      |</span>   <span class="code-snippet__number">43</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> 王芳      <span class="code-snippet__params">|   44 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 陆军      |</span>   <span class="code-snippet__number">45</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> 王尼玛    <span class="code-snippet__params">|   43 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 张全蛋    |</span>   <span class="code-snippet__number">44</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet_outer">|</span> 赵铁柱    <span class="code-snippet__params">|   45 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 张飞      |</span>   <span class="code-snippet__number">45</span> <span class="code-snippet__params">|</span></span></code><code><span class="code-snippet_outer">+-----------+------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">MAX 与 MIN 函数</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询</strong> <strong><code>student</code></strong></span> <span style="font-size: 15px;"><strong>表中最大和最小的</strong> <strong><code>birthday</code></strong></span> <span style="font-size: 15px;"><strong>值。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">MAX</span>(birthday), <span class="code-snippet__keyword">MIN</span>(birthday) <span class="code-snippet__keyword">FROM</span> student;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">---------------+---------------+</span></span></code><code><span class="code-snippet_outer">| MAX(birthday) | MIN(birthday) |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">---------------+---------------+</span></span></code><code><span class="code-snippet_outer">| 1977-09-01    | 1974-06-03    |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">---------------+---------------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">多段排序</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>以</strong> <strong><code>class</code></strong></span> <span style="font-size: 15px;"><strong>和</strong> <strong><code>birthday</code></strong></span> <span style="font-size: 15px;"><strong>从大到小的顺序查询</strong> <strong><code>student</code></strong></span> <span style="font-size: 15px;"><strong>表。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT * FROM student ORDER BY <span class="code-snippet__class"><span class="code-snippet__keyword">class</span> <span class="code-snippet__title">DESC</span>, <span class="code-snippet__title">birthday</span> <span class="code-snippet__title">DESC</span>;</span></span></code><code><span class="code-snippet_outer">+-----+--------+-----+------------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| no  |</span> name   <span class="code-snippet__params">| sex |</span> birthday   <span class="code-snippet__params">| <span class="code-snippet__keyword">class</span> |</span></span></code><code><span class="code-snippet_outer">+-----+--------+-----+------------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 110 |</span> 张飞   <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95038 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101 |</span> 曾华   <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1977</span>-09-<span class="code-snippet__number">01</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104 |</span> 李军   <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1976</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">20</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 107 |</span> 王尼玛 <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1976</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">20</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103 |</span> 王丽   <span class="code-snippet__params">| 女  |</span> <span class="code-snippet__number">1976</span>-<span class="code-snippet__number">01</span>-<span class="code-snippet__number">23</span> <span class="code-snippet__params">| 95033 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102 |</span> 匡明   <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1975</span>-<span class="code-snippet__number">10</span>-<span class="code-snippet__number">02</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105 |</span> 王芳   <span class="code-snippet__params">| 女  |</span> <span class="code-snippet__number">1975</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">10</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 108 |</span> 张全蛋 <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1975</span>-<span class="code-snippet__number">02</span>-<span class="code-snippet__number">10</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 106 |</span> 陆军   <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109 |</span> 赵铁柱 <span class="code-snippet__params">| 男  |</span> <span class="code-snippet__number">1974</span>-<span class="code-snippet__number">06</span>-<span class="code-snippet__number">03</span> <span class="code-snippet__params">| 95031 |</span></span></code><code><span class="code-snippet_outer">+-----+--------+-----+------------+-------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 5</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询 "男" 教师及其所上的课程。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> t_no <span class="code-snippet__keyword">in</span> (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> teacher <span class="code-snippet__keyword">WHERE</span> sex = <span class="code-snippet__string">'男'</span>);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+--------------+------+</span></span></code><code><span class="code-snippet_outer">| no    | name         | t_no |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+--------------+------+</span></span></code><code><span class="code-snippet_outer">| 3-245 | 操作系统     | 804  |</span></code><code><span class="code-snippet_outer">| 6-166 | 数字电路     | 856  |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-------+--------------+------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">MAX 函数与子查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询最高分同学的</strong> <strong><code>score</code></strong></span> <span style="font-size: 15px;"><strong>表。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 找出最高成绩（该查询只能有一个结果）</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">MAX</span>(degree) <span class="code-snippet__keyword">FROM</span> score;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 根据上面的条件筛选出所有最高成绩表，</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 该查询可能有多个结果，假设 degree 值多次符合条件。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> degree = (<span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">MAX</span>(degree) <span class="code-snippet__keyword">FROM</span> score);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 103  | 3-105 |     92 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 6</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询和 "李军" 同性别的所有同学</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">select</span> <span class="code-snippet__keyword">name</span> <span class="code-snippet__keyword">from</span> student <span class="code-snippet__keyword">where</span> sex = (</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> sex <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">where</span> <span class="code-snippet__keyword">name</span>=<span class="code-snippet__string">'李军'</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+</span></span></code><code><span class="code-snippet_outer">| name   |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+</span></span></code><code><span class="code-snippet_outer">| 曾华   |</span></code><code><span class="code-snippet_outer">| 匡明   |</span></code><code><span class="code-snippet_outer">| 李军   |</span></code><code><span class="code-snippet_outer">| 陆军   |</span></code><code><span class="code-snippet_outer">| 王尼玛 |</span></code><code><span class="code-snippet_outer">| 张全蛋 |</span></code><code><span class="code-snippet_outer">| 赵铁柱 |</span></code><code><span class="code-snippet_outer">| 张飞   |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 7</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询和 "李军" 同性别且同班的同学</strong> <strong><code>name</code></strong></span> <span style="font-size: 15px;"><strong>。</strong></span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">name</span>, sex, <span class="code-snippet__keyword">class</span> <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> sex = (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> sex <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'李军'</span></span></code><code><span class="code-snippet_outer">) <span class="code-snippet__keyword">AND</span> <span class="code-snippet__keyword">class</span> = (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">class</span> <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'李军'</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----------+-----+-------+</span></span></code><code><span class="code-snippet_outer">| name      | sex | class |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----------+-----+-------+</span></span></code><code><span class="code-snippet_outer">| 曾华      | 男  | 95033 |</span></code><code><span class="code-snippet_outer">| 李军      | 男  | 95033 |</span></code><code><span class="code-snippet_outer">| 王尼玛    | 男  | 95033 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">-----------+-----+-------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">子查询 - 8</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><strong>查询所有选修 "计算机导论" 课程的 "男" 同学成绩表。</strong></span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">需要的 "计算机导论" 和性别为 "男" 的编号可以在 </span><code><span style="font-size: 15px;">course</span></code><span style="font-size: 15px;"> 和 </span><code><span style="font-size: 15px;">student</span></code><span style="font-size: 15px;"> 表中找到。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> score <span class="code-snippet__keyword">WHERE</span> c_no = (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> course <span class="code-snippet__keyword">WHERE</span> <span class="code-snippet__keyword">name</span> = <span class="code-snippet__string">'计算机导论'</span></span></code><code><span class="code-snippet_outer">) <span class="code-snippet__keyword">AND</span> s_no <span class="code-snippet__keyword">IN</span> (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">SELECT</span> <span class="code-snippet__keyword">no</span> <span class="code-snippet__keyword">FROM</span> student <span class="code-snippet__keyword">WHERE</span> sex = <span class="code-snippet__string">'男'</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| s_no | c_no  | degree |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code><code><span class="code-snippet_outer">| 101  | 3-105 |     90 |</span></code><code><span class="code-snippet_outer">| 102  | 3-105 |     91 |</span></code><code><span class="code-snippet_outer">| 104  | 3-105 |     89 |</span></code><code><span class="code-snippet_outer">| 109  | 3-105 |     76 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-------+--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">按等级查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">建立一个 </span><code><span style="font-size: 15px;">grade</span></code><span style="font-size: 15px;"> 表代表学生的成绩等级，并插入数据：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> grade (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">low</span> <span class="code-snippet__built_in">INT</span>(<span class="code-snippet__number">3</span>),</span></code><code><span class="code-snippet_outer">    upp <span class="code-snippet__built_in">INT</span>(<span class="code-snippet__number">3</span>),</span></code><code><span class="code-snippet_outer">    grade <span class="code-snippet__built_in">char</span>(<span class="code-snippet__number">1</span>)</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> grade <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">90</span>, <span class="code-snippet__number">100</span>, <span class="code-snippet__string">'A'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> grade <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">80</span>, <span class="code-snippet__number">89</span>, <span class="code-snippet__string">'B'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> grade <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">70</span>, <span class="code-snippet__number">79</span>, <span class="code-snippet__string">'C'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> grade <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">60</span>, <span class="code-snippet__number">69</span>, <span class="code-snippet__string">'D'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> grade <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">0</span>, <span class="code-snippet__number">59</span>, <span class="code-snippet__string">'E'</span>);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> grade;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+------+-------+</span></span></code><code><span class="code-snippet_outer">| low  | upp  | grade |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+------+-------+</span></span></code><code><span class="code-snippet_outer">|   90 |  100 | A     |</span></code><code><span class="code-snippet_outer">|   80 |   89 | B     |</span></code><code><span class="code-snippet_outer">|   70 |   79 | C     |</span></code><code><span class="code-snippet_outer">|   60 |   69 | D     |</span></code><code><span class="code-snippet_outer">|    0 |   59 | E     |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+------+-------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 15px;"><strong>查询所有学生的</strong> <strong><code>s_no</code></strong></span> <span style="font-size: 15px;"><strong>、</strong><strong><code>c_no</code></strong></span> <span style="font-size: 15px;"><strong>和</strong> <strong><code>grade</code></strong></span> <span style="font-size: 15px;"><strong>列。</strong></span></p></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><br  /></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">思路是，使用区间 ( </span><code><span style="font-size: 15px;">BETWEEN</span></code><span style="font-size: 15px;"> ) 查询，判断学生的成绩 ( </span><code><span style="font-size: 15px;">degree</span></code><span style="font-size: 15px;"> ) 在 </span><code><span style="font-size: 15px;">grade</span></code><span style="font-size: 15px;"> 表的 </span><code><span style="font-size: 15px;">low</span></code><span style="font-size: 15px;"> 和 </span><code><span style="font-size: 15px;">upp</span></code><span style="font-size: 15px;"> 之间。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT s_no, c_no, grade FROM score, grade</span></code><code><span class="code-snippet_outer">WHERE degree BETWEEN low AND upp;</span></code><code><span class="code-snippet_outer">+------+-------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| s_no |</span> c_no  <span class="code-snippet__params">| grade |</span></span></code><code><span class="code-snippet_outer">+------+-------+-------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 101  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| A     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 102  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| A     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| A     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">| B     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 103  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">| B     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 104  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| B     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| B     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">| C     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 105  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">| C     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">105</span> <span class="code-snippet__params">| C     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">3</span>-<span class="code-snippet__number">245</span> <span class="code-snippet__params">| D     |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| 109  |</span> <span class="code-snippet__number">6</span>-<span class="code-snippet__number">166</span> <span class="code-snippet__params">| B     |</span></span></code><code><span class="code-snippet_outer">+------+-------+-------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">连接查询</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">准备用于测试连接查询的数据：</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">DATABASE</span> testJoin;</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> person (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">id</span> <span class="code-snippet__built_in">INT</span>,</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>),</span></code><code><span class="code-snippet_outer">    cardId <span class="code-snippet__built_in">INT</span></span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">CREATE</span> <span class="code-snippet__keyword">TABLE</span> card (</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">id</span> <span class="code-snippet__built_in">INT</span>,</span></code><code><span class="code-snippet_outer">    <span class="code-snippet__keyword">name</span> <span class="code-snippet__built_in">VARCHAR</span>(<span class="code-snippet__number">20</span>)</span></code><code><span class="code-snippet_outer">);</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> card <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">1</span>, <span class="code-snippet__string">'饭卡'</span>), (<span class="code-snippet__number">2</span>, <span class="code-snippet__string">'建行卡'</span>), (<span class="code-snippet__number">3</span>, <span class="code-snippet__string">'农行卡'</span>), (<span class="code-snippet__number">4</span>, <span class="code-snippet__string">'工商卡'</span>), (<span class="code-snippet__number">5</span>, <span class="code-snippet__string">'邮政卡'</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> card;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-----------+</span></span></code><code><span class="code-snippet_outer">| id   | name      |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-----------+</span></span></code><code><span class="code-snippet_outer">|    1 | 饭卡      |</span></code><code><span class="code-snippet_outer">|    2 | 建行卡    |</span></code><code><span class="code-snippet_outer">|    3 | 农行卡    |</span></code><code><span class="code-snippet_outer">|    4 | 工商卡    |</span></code><code><span class="code-snippet_outer">|    5 | 邮政卡    |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+-----------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">INSERT</span> <span class="code-snippet__keyword">INTO</span> person <span class="code-snippet__keyword">VALUES</span> (<span class="code-snippet__number">1</span>, <span class="code-snippet__string">'张三'</span>, <span class="code-snippet__number">1</span>), (<span class="code-snippet__number">2</span>, <span class="code-snippet__string">'李四'</span>, <span class="code-snippet__number">3</span>), (<span class="code-snippet__number">3</span>, <span class="code-snippet__string">'王五'</span>, <span class="code-snippet__number">6</span>);</span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> person;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+</span></span></code><code><span class="code-snippet_outer">| id   | name   | cardId |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+</span></span></code><code><span class="code-snippet_outer">|    1 | 张三   |      1 |</span></code><code><span class="code-snippet_outer">|    2 | 李四   |      3 |</span></code><code><span class="code-snippet_outer">|    3 | 王五   |      6 |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+</span></span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">分析两张表发现，</span><code><span style="font-size: 15px;">person</span></code><span style="font-size: 15px;"> 表并没有为 </span><code><span style="font-size: 15px;">cardId</span></code><span style="font-size: 15px;"> 字段设置一个在 </span><code><span style="font-size: 15px;">card</span></code><span style="font-size: 15px;"> 表中对应的 </span><code><span style="font-size: 15px;">id</span></code><span style="font-size: 15px;"> 外键。如果设置了的话，</span><code><span style="font-size: 15px;">person</span></code><span style="font-size: 15px;"> 中 </span><code><span style="font-size: 15px;">cardId</span></code><span style="font-size: 15px;"> 字段值为 </span><code><span style="font-size: 15px;">6</span></code><span style="font-size: 15px;"> 的行就插不进去，因为该 </span><code><span style="font-size: 15px;">cardId</span></code><span style="font-size: 15px;"> 值在 </span><code><span style="font-size: 15px;">card</span></code><span style="font-size: 15px;"> 表中并没有。</span></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;"><br  /></span></section><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">内连接</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">要查询这两张表中有关系的数据，可以使用 </span><code><span style="font-size: 15px;">INNER JOIN</span></code><span style="font-size: 15px;"> ( 内连接 ) 将它们连接在一起。</span></section><pre><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code></section></pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="sql"><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- INNER JOIN: 表示为内连接，将两张表拼接在一起。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- on: 表示要执行某个条件。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__keyword">SELECT</span> * <span class="code-snippet__keyword">FROM</span> person <span class="code-snippet__keyword">INNER</span> <span class="code-snippet__keyword">JOIN</span> card <span class="code-snippet__keyword">on</span> person.cardId = card.id;</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+------+-----------+</span></span></code><code><span class="code-snippet_outer">| id   | name   | cardId | id   | name      |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+------+-----------+</span></span></code><code><span class="code-snippet_outer">|    1 | 张三   |      1 |    1 | 饭卡      |</span></code><code><span class="code-snippet_outer">|    2 | 李四   |      3 |    3 | 农行卡    |</span></code><code><span class="code-snippet_outer">+<span class="code-snippet__comment">------+--------+--------+------+-----------+</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- 将 INNER 关键字省略掉，结果也是一样的。</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__comment">-- SELECT * FROM person JOIN card on person.cardId = card.id;注意：card 的整张表被连接到了右边。</span></span></code></pre></section><pre><span style="font-size: 15px;"></span><br  /></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">左外连接</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">完整显示左边的表 ( </span><code><span style="font-size: 15px;">person</span></code><span style="font-size: 15px;"> ) ，右边的表如果符合条件就显示，不符合则补 </span><code><span style="font-size: 15px;">NULL</span></code><span style="font-size: 15px;"> 。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- LEFT JOIN 也叫做 LEFT OUTER JOIN，用这两种方式的查询结果是一样的。</span></code><code><span class="code-snippet_outer">SELECT * FROM person LEFT JOIN card on person.cardId = card.id;</span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| id   |</span> name   <span class="code-snippet__params">| cardId |</span> id   <span class="code-snippet__params">| name      |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    1 |</span> 张三   <span class="code-snippet__params">|      1 |</span>    <span class="code-snippet__number">1</span> <span class="code-snippet__params">| 饭卡      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    2 |</span> 李四   <span class="code-snippet__params">|      3 |</span>    <span class="code-snippet__number">3</span> <span class="code-snippet__params">| 农行卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    3 |</span> 王五   <span class="code-snippet__params">|      6 |</span> NULL <span class="code-snippet__params">| NULL      |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li style="font-weight: bold;"><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">右外链接</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">完整显示右边的表 ( </span><code><span style="font-size: 15px;">card</span></code><span style="font-size: 15px;"> ) ，左边的表如果符合条件就显示，不符合则补 </span><code><span style="font-size: 15px;">NULL</span></code><span style="font-size: 15px;"> 。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">SELECT * FROM person RIGHT JOIN card on person.cardId = card.id;</span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| id   |</span> name   <span class="code-snippet__params">| cardId |</span> id   <span class="code-snippet__params">| name      |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    1 |</span> 张三   <span class="code-snippet__params">|      1 |</span>    <span class="code-snippet__number">1</span> <span class="code-snippet__params">| 饭卡      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    2 |</span> 李四   <span class="code-snippet__params">|      3 |</span>    <span class="code-snippet__number">3</span> <span class="code-snippet__params">| 农行卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">2</span> <span class="code-snippet__params">| 建行卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">4</span> <span class="code-snippet__params">| 工商卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">5</span> <span class="code-snippet__params">| 邮政卡    |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><br  /></section></pre><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><h3 style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">全外链接</span></strong><span style="font-size: 15px;"></span></h3></li></ul><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;">完整显示两张表的全部数据。</span></section><pre><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">-- MySQL 不支持这种语法的全外连接</span></code><code><span class="code-snippet_outer">-- SELECT * FROM person FULL JOIN card on person.cardId = card.id;</span></code><code><span class="code-snippet_outer">-- 出现错误：</span></code><code><span class="code-snippet_outer">-- ERROR <span class="code-snippet__number">1054</span> (<span class="code-snippet__number">42</span>S22): Unknown column <span class="code-snippet__string">'person.cardId'</span> <span class="code-snippet__keyword">in</span> <span class="code-snippet__string">'on clause'</span></span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">-- MySQL全连接语法，使用 UNION 将两张表合并在一起。</span></code><code><span class="code-snippet_outer">SELECT * FROM person LEFT JOIN card on person.cardId = card.id</span></code><code><span class="code-snippet_outer">UNION</span></code><code><span class="code-snippet_outer">SELECT * FROM person RIGHT JOIN card on person.cardId = card.id;</span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| id   |</span> name   <span class="code-snippet__params">| cardId |</span> id   <span class="code-snippet__params">| name      |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    1 |</span> 张三   <span class="code-snippet__params">|      1 |</span>    <span class="code-snippet__number">1</span> <span class="code-snippet__params">| 饭卡      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    2 |</span> 李四   <span class="code-snippet__params">|      3 |</span>    <span class="code-snippet__number">3</span> <span class="code-snippet__params">| 农行卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">|    3 |</span> 王五   <span class="code-snippet__params">|      6 |</span> NULL <span class="code-snippet__params">| NULL      |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">2</span> <span class="code-snippet__params">| 建行卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">4</span> <span class="code-snippet__params">| 工商卡    |</span></span></code><code><span class="code-snippet_outer"><span class="code-snippet__params">| NULL |</span> NULL   <span class="code-snippet__params">|   NULL |</span>    <span class="code-snippet__number">5</span> <span class="code-snippet__params">| 邮政卡    |</span></span></code><code><span class="code-snippet_outer">+------+--------+--------+------+-----------+</span></code></pre></section><section style="line-height: 1.75em;margin-left: 8px;margin-right: 8px;"><code><span style="font-size: 15px;"></span></code><span style="font-size: 15px;text-align: center;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">全文到这里撒花完结~</span></section></pre><pre style="letter-spacing: 0.544px;text-align: center;background-color: rgb(255, 255, 255);color: rgb(62, 62, 62);widows: 1;word-spacing: 2px;caret-color: rgb(51, 51, 51);"><pre style="font-size: 16px;letter-spacing: 0.544px;text-align: center;background-color: rgb(255, 255, 255);widows: 1;word-spacing: 2px;caret-color: rgb(51, 51, 51);"><section mpa-from-tpl="t" style="font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;font-size: 15px;"><section class="mp_profile_iframe_wrp"><mpprofile class="js_uneditable custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-id="MzA3NjIzNjMwOA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/hXibVSNciaXhzia07WkYkDfaRxHUiaDaNc5x3xTNO1RlNBRhPnxpEzoemhsn7ofat4pVwVgOktaveEtu6IKzzLONQQ/0?wx_fmt=png" data-nickname="数据治理体系" data-alias="DGsystem" data-signature="持续完善数据治理实战体系，数仓体系，数字体系，实现业务数字化，数字资产化，资产业务化，资产资本化；回归业务场景的数字化案例才最具参考价值，最容易理解和借鉴的。" data-from="0"></mpprofile></section></section></pre><section data-tools="135编辑器" data-id="95172" style="font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;word-spacing: 1.6px;background-color: rgb(255, 255, 255);color: rgb(0, 0, 0);text-align: left;"><section style="display: flex;justify-content: flex-end;align-items: center;"><section style="display: inline-block;text-align: right;"><section data-brushtype="text" style="margin-bottom: -15px;color: rgb(63, 63, 63);letter-spacing: 2px;transform: rotate(0deg);"><span style="font-size: 14px;"><strong>点个赞支持下呗！</strong></span></section></section></section></section></pre><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247485730&idx=1&sn=e77554678c5e1f8d6dc9f72be289b280&chksm=9f651a59a812934f7edc8a9206f83dae32f9fa24e5a1b2a07ed58ad756fd74a22a0b9aff090c&token=1013316370&lang=zh_CN#rd" target="_blank">阅读原文</a></div></content><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247485730&idx=1&sn=e77554678c5e1f8d6dc9f72be289b280&chksm=9f651a59a812934f7edc8a9206f83dae32f9fa24e5a1b2a07ed58ad756fd74a22a0b9aff090c&token=1013316370&lang=zh_CN#rd" target="_blank">阅读原文</a></div>
</div>
</body>
</html>