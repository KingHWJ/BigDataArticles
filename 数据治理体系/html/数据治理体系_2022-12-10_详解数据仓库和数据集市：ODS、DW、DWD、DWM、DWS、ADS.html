<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"数据治理体系","title":"详解数据仓库和数据集市：ODS、DW、DWD、DWM、DWS、ADS","time":"2022-12-10 17:48:08","timeStamp":"1670665688"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247491622&idx=1&sn=8a7ce8336ce768248e0e6f81ab1efa50&chksm=9f66f35da8117a4bc9bfe7c52b47b2cd5645cf800a02aacf2d9c5423568d7a85c2a69c326eca#rd" target="_blank">详解数据仓库和数据集市：ODS、DW、DWD、DWM、DWS、ADS</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">数据治理体系&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2022-12-10 17:48:08</em></div><content><div class="topic"><p>收录于话题</p><p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA3NjIzNjMwOA==&action=getalbum&album_id=2089432008870379524#wechat_redirect" title="数据仓库" target="_blank">#数据仓库</a></p></div><section data-mpa-powered-by="yiban.io"><mp-common-profile class="custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-weuitheme="light" data-id="MzA3NjIzNjMwOA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/hXibVSNciaXhzia07WkYkDfaRxHUiaDaNc5x3xTNO1RlNBRhPnxpEzoemhsn7ofat4pVwVgOktaveEtu6IKzzLONQQ/0?wx_fmt=png" data-nickname="数据治理体系" data-alias="DGsystem" data-signature="持续完善数据治理实战体系，数据仓库、标签、数字体系，实现业务数字化，数字资产化，资产业务化，资产资本化；回归业务场景的数字化案例才最具参考价值，最容易理解和借鉴的。" data-from="0"></mp-common-profile></section><p style="margin-right: 8px;margin-bottom: 8px;margin-left: 8px;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: right;visibility: visible;line-height: normal;"><span style="outline: 0px;color: rgb(136, 136, 136);letter-spacing: 0.5px;font-size: 14px;font-family: mp-quote, -apple-system-font, &quot;system-ui&quot;, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;visibility: visible;">来源：架构文摘</span></p><h2 style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">01</span></h2><h2 style="margin-bottom: 24px;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">数据流向</span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><img class="rich_pages wxw-img" data-croporisrc="https://mmbiz.qpic.cn/sz_mmbiz_jpg/krYX9qLk0KjKy35xHUOb4iaVWK4b3OL598lI8d2wDCUdNFsFSYbMNq19DU3IkBpPDN9t2zQ76qrGGW2e5W8dOyQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-cropx1="78.99117276166456" data-cropx2="995.5611601513241" data-cropy1="0" data-cropy2="1033.7370753323487" data-ratio="1.1275899672846237" data-s="300,640" data-type="jpeg" data-w="917" style="outline: 0px;border-style: none;display: initial;width: 578px;box-sizing: border-box !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/p2v54xNeNEY74ClO39rH6CBICPFv4uvjSnbsh5tpTnzRfCtNyf92ZibddbiajWM9anWEqJbuPyzIHmekGpVrDplg/640?wx_fmt=jpeg"  /></p><h2 style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">02</span></h2><h2 style="margin-bottom: 24px;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">应用示例</span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><img class="rich_pages wxw-img" data-croporisrc="https://mmbiz.qpic.cn/sz_mmbiz_jpg/krYX9qLk0KjKy35xHUOb4iaVWK4b3OL59epZ9OGetibtCNyia6Ob0Iy6bjDtCPGhpbwBF9hC78EdxgRzwXDGKZlNA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-cropx1="0" data-cropx2="651" data-cropy1="0" data-cropy2="705" data-ratio="1.0814132104454686" data-s="300,640" data-type="jpeg" data-w="651" style="outline: 0px;border-style: none;display: initial;width: 578px;box-sizing: border-box !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/p2v54xNeNEY74ClO39rH6CBICPFv4uvjygT6ptKcm15boh2ErQhtl6gtOOSfJUounPfpM46RG6tRriaex12sBBQ/640?wx_fmt=jpeg"  /></p><h2 style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">03</span></h2><h2 style="margin-bottom: 24px;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">何为数仓DW</span></h2><h2 style="margin-bottom: 24px;white-space: normal;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 0.5px;"></span></h2><h2 style="margin-bottom: 24px;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;"></span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">Data warehouse（可简写为DW或者DWH）数据仓库，是在数据库已经大量存在的情况下，它是一整套包括了etl、调度、建模在内的完整的理论体系。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库的方案建设的目的，是为前端查询和分析作为基础，主要应用于OLAP（on-line Analytical Processing），支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查询结果。目前行业比较流行的有：AWS Redshift，Greenplum，Hive等。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库并不是数据的最终目的地，而是为数据最终的目的地做好准备，这些准备包含：清洗、转义、分类、重组、合并、拆分、统计等</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">主要特点</span></strong></h3><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">面向主题</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">操作型数据库组织面向事务处理任务，而数据仓库中的数据是按照一定的主题域进行组织。</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">主题是指用户使用数据仓库进行决策时所关心的重点方面，一个主题通过与多个操作型信息系统相关。</span></p></li></ul><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">集成</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">需要对源数据进行加工与融合，统一与综合</span></p></li><li><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">在加工的过程中必须消除源数据的不一致性，以保证</span><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库</span><span style="font-size: 15px;letter-spacing: 0.5px;">内的信息时关于整个企业的一致的全局信息。（关联关系）</span></p></li></ul><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">不可修改</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">DW中的数据并不是最新的，而是来源于其他数据源</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库主要是为决策分析提供数据，涉及的操作主要是数据的查询</span></p></li></ul><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">与时间相关</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">处于决策的需要数据仓库中的数据都需要标明时间属性</span></p></li></ul></ul><h3 style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">与数据库的对比</span></h3><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">DW：专门为数据分析设计的，涉及读取大量数据以了解数据之间的关系和趋势</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据库：用于捕获和存储数据</span></p></li></ul><h2 style="white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">04</span></h2><h2 style="margin-bottom: 24px;white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">为何要分层</span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库中涉及到的问题：</span></p><ol class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为什么要做数据仓库？</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为什么要做数据质量管理？</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为什么要做元数据管理？</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数仓分层中每个层的作用是什么？</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">…...</span></p></li></ol><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">在实际的工作中，我们都希望自己的数据能够有顺序地流转，设计者和使用者能够清晰地知道数据的整个声明周期，比如下面左图。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">但是，实际情况下，我们所面临的数据状况很有可能是复杂性高、且层级混乱的，我们可能会做出一套表依赖结构混乱，且出现循环依赖的数据体系，比如下面的右图。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><img class="rich_pages wxw-img" data-croporisrc="https://mmbiz.qpic.cn/sz_mmbiz_jpg/krYX9qLk0KjKy35xHUOb4iaVWK4b3OL59HGRVhRjzbFOAO9fmPhtYI3phEYEFdKwGenPSGJbPR4SUMMfciaEATtQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-cropx1="0" data-cropx2="720" data-cropy1="0" data-cropy2="238.2274741506647" data-ratio="0.33055555555555555" data-type="jpeg" data-w="720" style="outline: 0px;border-style: none;display: initial;width: 578px;box-sizing: border-box !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/p2v54xNeNEY74ClO39rH6CBICPFv4uvjibK32Wic6IwtaicCMicr2D432YoMPlwgnxNcvtU90FLRlU7FS6hu1LhzhA/640?wx_fmt=jpeg"  /></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为了解决我们可能面临的问题，需要一套行之有效的数据组织、管理和处理方法，来让我们的数据体系更加有序，这就是</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247490980&amp;idx=1&amp;sn=d26fba75ef60658edd9779a374f43807&amp;chksm=e976e19ede016888e413191ee8f3f8b626c8ef57e6ddb9877c79a1990a4fccbb9a40ed5af757&amp;scene=21#wechat_redirect" textvalue="数据分层" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据分层</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">。数据分层的好处：</span></p><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">清晰数据结构：让每个数据层都有自己的作用和职责，在使用和维护的时候能够更方便和理解</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">复杂问题简化：将一个复杂的任务拆解成多个步骤来分步骤完成，每个层只解决特定的问题</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">统一数据口径：通过数据分层，提供统一的数据出口，统一输出口径</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">减少重复开发：规范数据分层，开发通用的中间层，可以极大地减少重复计算的工作</span></p></li></ul><h2 style="white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">05</span></h2><h2 style="margin-bottom: 24px;white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">数据分层</span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">每个公司的业务都可以根据自己的业务需求分层不同的层次；目前比较成熟的数据分层：数据运营层ODS、数据仓库层DW、数据服务层ADS(APP)。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据运营层ODS</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据运营层：Operation Data Store 数据准备区，也称为贴源层。数据源中的数据，经过抽取、洗净、传输，也就是ETL过程之后进入本层。该层的主要功能：</span></p><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">ODS是后面数据仓库层的准备区</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为DWD层提供原始数据</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">减少对业务系统的影响</span></p></li></ul><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">在源数据装入这一层时，要进行诸如去噪（例如有一条数据中人的年龄是 300 岁，这种属于异常数据，就需要提前做一些处理）、去重(例如在个人资料表中，同一 ID 却有两条重复数据，在接入的时候需要做一步去重)、字段命名规范等一系列操作。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">但是为了考虑后续可能需要追溯数据问题，因此对于这一层就不建议做过多的数据清洗工作，原封不动地接入原始数据也可以，根据业务具体分层的需求来做。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">这层的数据是后续数据仓库加工数据的来源。数据来源的方式：</span></p><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">业务库</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">经常会使用sqoop来抽取，例如每天定时抽取一次。</span></p></li><li><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">实时方面，可以考虑用</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247484788&amp;idx=1&amp;sn=d445a368e700743bd282791add1da01c&amp;chksm=e976f94ede01705882f29d1f491a3162f38bccb335d935172662f4102cf7076fb60d0b80b21f&amp;scene=21#wechat_redirect" textvalue="canal" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">canal</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">监听mysql的binlog，实时接入即可。</span></p></li></ul><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">埋点日志</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">日志一般以文件的形式保存，可以选择用flume定时同步</span></p></li><li><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">可以用</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247484081&amp;idx=1&amp;sn=0361148a738e2c97ffe3a4bdc66b14f4&amp;chksm=e976fe8bde01779da30145837f857f92cedff25b1833161795d2fd32605bf18024a61936d1c4&amp;scene=21#wechat_redirect" textvalue="spark streaming" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">spark streaming</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">或者Flink来实时接入</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">kafka也OK</span></p></li></ul><li><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">消息队列：即来自ActiveMQ、</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247487926&amp;idx=1&amp;sn=9000fa94f8c949423d454b0339e8a8e4&amp;chksm=e976ed8cde01649a04331acdb70c4d41a03852c583e765edc57c622ce1643983a0ee1f2e8189&amp;scene=21#wechat_redirect" textvalue="Kafka" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">Kafka</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">的数据等。</span></p></li></ul><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据仓库层</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据仓库层从上到下，又可以分为3个层：数据细节层DWD、数据中间层DWM、数据服务层DWS。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据细节层DWD</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据细节层：data warehouse details，DWD(数据清洗/DWI)</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">该层是业务层和数据仓库的隔离层，保持和ODS层一样的数据颗粒度；主要是对ODS数据层做一些数据的清洗和规范化的操作，比如去除空数据、脏数据、离群值等。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">为了提高数据明细层的易用性，该层通常会才采用一些维度退化方法，将维度退化至事实表中，减少事实表和维表的关联。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据中间层DWM</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据中间层：Data Warehouse Middle，DWM</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">该层是在DWD层的数据基础上，对数据做一些轻微的聚合操作，生成一些列的中间结果表，提升公共指标的复用性，减少重复加工的工作。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">简答来说，对通用的核心维度进行聚合操作，算出相应的统计指标。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据服务层DWS</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据服务层：Data Warehouse Service，DWS(宽表-用户行为，轻度聚合)</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">该层是基于DWM上的基础数据，整合汇总成分析某一个主题域的数据服务层，一般是宽表，用于提供后续的业务查询，</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247485083&amp;idx=1&amp;sn=75a094511944c1d0e3f1d8f47f447313&amp;chksm=e976faa1de0173b7dac853363c836b9bc579684eb8ead0652d752baf0875ba406937e842e5a3&amp;scene=21#wechat_redirect" textvalue="OLAP" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">OLAP</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">分析，数据分发等。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">一般来说，该层的数据表会相对较少；一张表会涵盖比较多的业务内容，由于其字段较多，因此一般也会称该层的表为宽表。</span></p><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">用户行为，轻度聚合对DWD</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">主要对ODS/DWD层数据做一些轻度的汇总。</span></p></li></ul><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">数据应用层ADS</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据应用层：Application Data Service，ADS(APP/DAL/DF)-出报表结果</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">该层主要是提供给数据产品和数据分析使用的数据，一般会存放在ES、</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247483857&amp;idx=1&amp;sn=c995e37b278604bec7f04e3f249a6a7a&amp;chksm=e976fdebde0174fd902614dbdb63e7ff407f15ae6b0db3fed4a76f472325502a8f63854b9a1d&amp;scene=21#wechat_redirect" textvalue="Redis" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">Redis</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">、PostgreSql等系统中供线上系统使用；也可能存放在</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247486633&amp;idx=1&amp;sn=0749c4f7eaac7886fd9a27b351b96538&amp;chksm=e976f093de017985f37fd384c8482cab04b9f9f0e0509eb960844fd3fd8f45872171961342c0&amp;scene=21#wechat_redirect" textvalue="hive" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">hive</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">或者Druid中，供数据分析和数据挖掘使用，比如常用的数据报表就是存在这里的。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">事实表 Fact Table</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">事实表是指存储有事实记录的表，比如系统日志、销售记录等。事实表的记录在不断地增长，比如电商的商品订单表，就是类似的情况，所以事实表的体积通常是远大于其他表。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">维表层Dimension（DIM）</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">维度表（Dimension Table）或维表，有时也称查找表（Lookup Table），是与事实表相对应的一种表；它保存了维度的属性值，可以跟事实表做关联，相当于将事实表上经常重复出现的属性抽取、规范出来用一张表进行管理。维度表主要是包含两个部分：</span></p><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">高基数维度数据：一般是用户资料表、商品资料表类似的资料表，数据量可能是千万级或者上亿级别</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">低基数维度数据：一般是配置表，比如枚举字段对应的中文含义，或者日期维表等；数据量可能就是个位数或者几千几万。</span></p></li></ul><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">临时表TMP</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">每一层的计算都会有很多临时表，专设一个DWTMP层来存储我们数据仓库的临时表</span></p><h2 style="white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">06</span></h2><h2 style="margin-bottom: 24px;white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">数据集市</span></h2><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">狭义ADS层；广义上指hadoop从DWD DWS </span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247488579&amp;idx=1&amp;sn=6369000867b9a24cf2278020f2ea2adc&amp;chksm=e976e879de01616f98a2b0d2c9557d43345afe8c192de7f7e349d2a56a934a66f14b27db6ab2&amp;scene=21#wechat_redirect" textvalue="ADS" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">ADS</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">&nbsp;同步到RDS的数据</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据集市（Data Mart），也叫数据市场，数据集市就是满足特定的部门或者用户的需求，按照多维的方式进行存储，包括定义维度、需要计算的指标、维度的层次等，生成面向决策分析需求的数据立方体。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">从范围上来说，数据是从企业范围的数据库、数据仓库，或者是更加专业的数据仓库中抽取出来的。数据中心的重点就在于它迎合了专业用户群体的特殊需求，在分析、内容、表现，以及易用方面。数据中心的用户希望数据是由他们熟悉的术语表现的。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">带有数据集市的数据仓储结构</span></strong></p><figure data-size="normal"><img class="rich_pages wxw-img" data-croporisrc="https://mmbiz.qpic.cn/sz_mmbiz_jpg/krYX9qLk0KjKy35xHUOb4iaVWK4b3OL599zrYxbsFXvXiagkgl4jBSNhYCeNAdeBp7Y4SIcUpReuicur5CBZM2T5g/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-cropx1="0" data-cropx2="354" data-cropy1="0" data-cropy2="357" data-ratio="1.0056497175141244" data-type="jpeg" data-w="354" style="outline: 0px;border-style: none;display: block;width: 354px;box-sizing: border-box !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/p2v54xNeNEY74ClO39rH6CBICPFv4uvj4ARz9COYibK9uvotlRhvvg3MkfkrJ0P2PZcQgjaAyIRFVrqoOwm4xKw/640?wx_fmt=jpeg"  /><section style="margin-bottom: 24px;"><br  /></section><p style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">区别数据仓库</span></strong></p></figure><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">数据集市就是企业级数据仓库的一个子集，它主要面向部门级业务，并且只面向某个特定的主题。为了解决灵活性与性能之间的矛盾，数据集市就是数据仓库体系结构中增加的一种小型的部门或工作组级别的数据仓库。数据集市存储为特定用户预先计算好的数据，从而满足用户对性能的需求。数据集市可以在一定程度上缓解访问数据仓库的瓶颈。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">理论上讲，应该有一个总的数据仓库的概念，然后才有数据集市。实际建设数据集市的时候，国内很少这么做。国内一般会先从数据集市入手，就某一个特定的主题（比如企业的客户信息）先做数据集市，再建设数据仓库。数据仓库和数据集市建立的先后次序之分，是和设计方法紧密相关的。而数据仓库作为工程学科，并没有对错之分。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">在数据结构上，数据仓库是面向主题的、集成的数据的集合。而数据集市通常被定义为星型结构或者</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI0Mjc0MDU2NQ==&amp;mid=2247488589&amp;idx=1&amp;sn=8825644356f0f238038c2376c7e2b911&amp;chksm=e976e877de016161e72be42b17e06853d9c92e2b8e54f10265a218c42ea5d13db62c7170a917&amp;scene=21#wechat_redirect" textvalue="雪花型" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="font-size: 15px;letter-spacing: 0.5px;"><span style="font-size: 15px;letter-spacing: 0.5px;">雪花型</span></a><span style="font-size: 15px;letter-spacing: 0.5px;">数据结构，数据集市一般是由一张事实表和几张维表组成的。</span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><img class="rich_pages wxw-img" data-croporisrc="https://mmbiz.qpic.cn/sz_mmbiz_jpg/krYX9qLk0KjKy35xHUOb4iaVWK4b3OL59PFXcbztIwdzpVhibtic8reFZH2cF6E0uean6KgZIrVJk4PhBw0JVYpCQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-cropx1="0" data-cropx2="815" data-cropy1="0" data-cropy2="382.82127031019206" data-ratio="0.4687116564417178" data-type="jpeg" data-w="815" style="outline: 0px;border-style: none;display: initial;width: 578px;box-sizing: border-box !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/p2v54xNeNEY74ClO39rH6CBICPFv4uvj7g9Zs0hj4fhoPWX36OzWYEEdcPXSTweAvicX3zHia5GP8iaqDcl30qQkQ/640?wx_fmt=jpeg"  /></p><h2 style="white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">07</span></h2><h2 style="margin-bottom: 24px;white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">问题总结</span></h2><h3 style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">ODS与DWD区别？</span></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">问：还是不太明白 ods 和 dwd 层的区别，有了 ods 层后感觉 dwd 没有什么用了。<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">答：嗯，我是这样理解的，站在一个理想的角度来讲，如果 ods 层的数据就非常规整，基本能满足我们绝大部分的需求，这当然是好的，这时候 dwd 层其实也没太大必要。但是现实中接触的情况是 ods 层的数据很难保证质量，毕竟数据的来源多种多样，推送方也会有自己的推送逻辑，在这种情况下，我们就需要通过额外的一层 dwd 来屏蔽一些底层的差异。<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">问：我大概明白了，是不是说 dwd 主要是对 ods 层做一些数据清洗和规范化的操作，dws 主要是对 ods 层数据做一些轻度的汇总?<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">答：对的，可以大致这样理解。<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">APP层干什么的？<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">问：感觉DWS层是不是没地方放了，各个业务的DWS表是应该在 DWD还是在 app?<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">答：这个问题不太好回答，我感觉主要就是明确一下DWS层是干什么的，如果你的DWS层放的就是一些可以供业务方使用的宽表表，放在 app 层就行。如果你说的数据集市是一个比较泛一点的概念，那么其实 dws、dwd、app 这些合起来都算是数据集市的内容。<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">问：那存到 Redis、ES 中的数据算是 app层吗?<br style="outline: 0px;"  /></span></p><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">答：算是的，我个人的理解，app 层主要存放一些相对成熟的表，能供业务侧使用的。这些表可以在 Hive 中，也可以是从 Hive 导入 Redis 或者 ES 这种查询性能比较好的系统中。</span></p><h2 style="white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">08</span></h2><h2 style="margin-bottom: 24px;white-space: normal;outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);line-height: 1.75em;text-align: center;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;letter-spacing: 0.5px;font-size: 20px;">附录</span></h2><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">1. ETL</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">ETL ：Extract-Transform-Load，用于描述将数据从来源端经过抽取、转换、加载到目的端的过程。</span></p><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">2. 宽表</span></strong></h3><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">含义：指字段比较多的数据库表。通常是指业务主体相关的指标、纬度、属性关联在一起的一张数据库表。</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">特点：</span></p></li><ul class="list-paddingleft-1" style="list-style-type: square;"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">宽表由于把不同的内容都放在同一张表，宽表已经不符合三范式的模型设计规范：</span></p></li><ul class="list-paddingleft-1"><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">坏处：数据有大量冗余</span></p></li><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">好处：查询性能的提高和便捷</span></p></li></ul><li style="font-size: 15px;letter-spacing: 0.5px;"><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">宽表的设计广泛应用于数据挖掘模型训练前的数据准备，通过把相关字段放在同一张表中，可以大大提供数据挖掘模型训练过程中迭代计算的消息问题。</span></p></li></ul></ul><h3 style="line-height: 1.75em;margin-bottom: 24px;"><strong><span style="letter-spacing: 0.5px;font-size: 17px;">3. 主题（Subject）</span></strong></h3><p style="line-height: 1.75em;margin-bottom: 24px;"><span style="font-size: 15px;letter-spacing: 0.5px;">是在较高层次上将企业信息系统中的数据进行综合、归类和分析利用的一个抽象概念，每一个主题基本对应一个宏观的分析领域。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。例如“销售分析”就是一个分析领域，因此这个数据仓库应用的主题就是“销售分析”。</span></p><section style="margin-right: 8px;margin-bottom: 0px;margin-left: 8px;outline: 0px;color: rgb(34, 34, 34);letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;font-family: mp-quote, -apple-system-font, &quot;system-ui&quot;, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;line-height: 1.75em;"><span style="outline: 0px;color: rgb(54, 122, 223);font-weight: bolder;font-size: 15px;">【END】</span></section><section><mp-common-profile class="custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-weuitheme="light" data-id="MzA3NjIzNjMwOA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/hXibVSNciaXhzia07WkYkDfaRxHUiaDaNc5x3xTNO1RlNBRhPnxpEzoemhsn7ofat4pVwVgOktaveEtu6IKzzLONQQ/0?wx_fmt=png" data-nickname="数据治理体系" data-alias="DGsystem" data-signature="持续完善数据治理实战体系，数据仓库、标签、数字体系，实现业务数字化，数字资产化，资产业务化，资产资本化；回归业务场景的数字化案例才最具参考价值，最容易理解和借鉴的。" data-from="0"></mp-common-profile></section><p style="display: none;"><mp-style-type data-value="3"></mp-style-type></p><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s/5ay4rSg51AmploMPQvJ4gQ#rd" target="_blank">阅读原文</a></div></content><div class="msg_source_url"><a href="https://mp.weixin.qq.com/s/5ay4rSg51AmploMPQvJ4gQ#rd" target="_blank">阅读原文</a></div>
</div>
</body>
</html>