<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;overflow:hidden;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;padding:0 0 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:0px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:#a5a5a5;}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size: 15px;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}#copyright_logo{color:#bdbdbd;}.rich_media_meta_list{margin-bottom:10px;}.reprint{background:#efefef;border-radius:5px;padding:8px;color:#1f1f1f;}.reprint a{word-break:break-all;}.topic{color:#8e8e8e;background:#f7f7f7;border-radius:5px;padding:10px 8px;}.topic a{padding-right:5px;}.topic p{margin-bottom:5px;}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head><script>
var data={"mp":"数据治理体系","title":"亿级(无限级)并发，没那么难","time":"2022-01-21 06:54:42","timeStamp":"1642719282"};
</script>
<body>
<div class="rich_media"><h1 class="rich_media_title" id="activity-name"><a href="http://mp.weixin.qq.com/s?__biz=MzA3NjIzNjMwOA==&mid=2247485632&idx=1&sn=d7ff37102bdd9dc7076b2fc2abebbee4&chksm=9f651bbba81292adb6285d2a8186af669dbaa4492140c15cf9399aa35efe86741a9b969f145a#rd" target="_blank">亿级(无限级)并发，没那么难</a></h1><div id="meta_content" class="rich_media_meta_list"><span class="rich_media_meta rich_media_meta_text">pingping&nbsp;&nbsp;</span><span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);" class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" id="js_name">数据治理体系&nbsp;&nbsp;</a></span><em id="publish_time" class="rich_media_meta rich_media_meta_text">2022-01-21 06:54:42</em></div><content><div class="reprint"><p>转自公众号：肉眼品世界<br><a href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&mid=2247485571&idx=1&sn=0f55a55ed8fb0d3219b7f2d56eeaf953" target="_blank" title="阅读原文">http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&mid=2247485571&idx=1&sn=0f55a55ed8fb0d3219b7f2d56eeaf953</a></p></div><section style="font-size: 16px;"><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages wxw-img" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="230" data-ratio="0.5934959349593496" data-s="300,640" data-type="png" data-w="492" style="width: 339px;box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTFtcZ0UX2C8QfvicyrZMu8j1WScHSorlZbY4WkcQ1wOc7SMcEwy3OHvs1GicHPkuqwWBLR7ASnvxibg/640?wx_fmt=png"  /></p><section style="margin-top: 40px;margin-right: 8px;margin-left: 8px;padding: 19px;white-space: normal;max-width: 100%;letter-spacing: 0.544px;font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 15px;line-height: 27px;color: rgb(89, 89, 89);background-color: rgb(239, 239, 239);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">肉眼品世界导读：</strong><strong style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong>&nbsp;小编曾经看到高并发几个字也是欣喜若狂，如今变得淡定了，到底多高并发就是高并发了，TPS,QPS是指什么？亿级，千亿级并发真的那么难实现吗？互联网高并发架构设计的原则是什么，看遍了大厂小厂无数架构，是否可以发现都大同小异，万变不离其宗？好，我们就一起来揭秘吧;市面上很少有这么完善和透彻的,觉得不错就点赞转发吧&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">更多优质内容请关注微信公众号“肉眼品世界”（ID：</strong><strong style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">find_world_fine），深度价值体系传递</strong></span></section><section style="white-space: normal;max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;background-color: rgb(255, 255, 255);font-size: 20px;text-align: center;overflow-wrap: break-word !important;"><span style="margin-top: 38px;margin-bottom: 10px;max-width: 100%;height: 59px;line-height: 85px;color: rgb(60, 112, 198);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/ZBjVrHIdkOmV4NEN9KK542ZUnPbFvYaOkLe0mFTiceEtXGN5IjICocMe09DmBzpIdOQkbZZ7r3FibZ7DEGLXm7mw/640?wx_fmt=png&quot;);background-position: 50% 50%;background-repeat: no-repeat;background-attachment: initial;background-origin: initial;background-clip: initial;border-bottom: 2px solid rgb(27, 95, 160);background-size: 57px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;">多大并发是高并发</span></section><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages" data-ratio="0.6666666666666666" data-s="300,640" data-type="png" data-w="820" style="box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;width: auto !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTFtcZ0UX2C8QfvicyrZMu8jmqnJohVia4XUOceeG7YIic46KS3dmlHILk51UibRrgUDzeVPehJ71pmJw/640?wx_fmt=png"  /></p><p style="margin: 10px auto;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;font-family: verdana, Arial, Helvetica, sans-serif;font-size: 14px;background-color: rgb(255, 255, 255);line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="margin: 10px auto;line-height: 1.5;color: rgb(0, 0, 0);font-size: 13px;font-family: Verdana, Arial, Helvetica, sans-serif;text-align: left;white-space: normal;background-color: rgb(254, 254, 242);"><span style="line-height: 1.5;font-size: 18px;"><strong>一、什么是高并发</strong></span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">定义：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;高并发(High Concurrency)是使用技术手段使系统可以并行处理很多请求。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">关键指标：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-响应时间(Response Time)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-吞吐量(Throughput)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-每秒查询率QPS(Query Per Second)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-每秒事务处理量TPS(Transaction Per Second)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-同时在线用户数量</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">关键指标的维度：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-平均，如：小时平均、日平均、月平均</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-Top百分数TP(Top Percentile)，如：TP50、TP90、TP99、TP4个9</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-最大值</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-趋势</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">「并发」由于在互联网架构中，已经从机器维度上升到了系统架构层面，所以和「并行」已经没有清晰的界限。「并」(同时)是其中的关键。由于「同时」会引发多久才叫同时的问题，将时间扩大，又根据不同业务关注点不同，引申出了引申指标。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">引申指标：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-活跃用户数，如：日活DAU(Daily Active User)、月活MAU(Monthly Active Users)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-点击量PV(Page View)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-访问某站点的用户数UV(Unique Visitor)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-独立IP数IP(Internet Protocol)</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-日单量</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="line-height: 1.5;font-size: 18px;"><strong>二、多大算高并发</strong></span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; 这个问题的答案不是一个数字。来看两个场景：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">场景1：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;木头同学去一家创业公司面试。这个公司做的产品还没有上线，面试官小熊之前就职过公司的产品都没有什么量。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">小熊：“有高并发经验吗？”</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">木头：“我们服务单机QPS2000+，线上有4台机器负载均衡。”</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">这时候小熊心里的表情大概是：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages wxw-img" data-ratio="0.6666666666666666" data-type="png" data-w="366" style="min-height: 1em;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTFtcZ0UX2C8QfvicyrZMu8jmYzdICg9VO2humfIfgQ49lOjDV5A7xYtaIkdMRYmE4Lp9xn8NiaicC1w/640?wx_fmt=png"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp;&nbsp;但是如果小熊就职的公司是美团之类的。那这这时候小熊心里的表情大概是：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6666666666666666" data-type="png" data-w="362" style="min-height: 1em;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTFtcZ0UX2C8QfvicyrZMu8jyYN6YtdAicMH34Gl26tRqeu5Petg9ibSsBOWZVy2W6IaTgDXQ2E6Ldhg/640?wx_fmt=png"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">场景2：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">固态硬盘SSD（Solid State Disk）说：我读取和写入高达 1000MB/秒</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">mysql说：我单机TPS10000+</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">nginx说：我单机QPS10W+</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">静儿说：给我一台56核200G高配物理机，我可以创建一个单机QPS1000W</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><img class="rich_pages wxw-img" data-ratio="0.6666666666666666" data-type="png" data-w="458" style="min-height: 1em;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTFtcZ0UX2C8QfvicyrZMu8jtXu5DUYrW2LKPVcOACacNtB6mHZK310icPg9iam45yD2cEFvbWUYo58Q/640?wx_fmt=png"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;不在同一维度，没有任何前提，无法比较谁更牛。“我的系统算不算高并发？”这个问题就如同一个女孩子爱问的问题：“我美不美？”</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="line-height: 1.5;font-size: 18px;"><strong>三、高并发是解决问题的方式</strong></span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;俗话说：「没有对比就没有伤害」。算不算高并发，这个问题的答案需要加对比和前提。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">对比包括：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-业界：在业界同类产品中并发量处于什么位置。举个栗子🌰，美团外卖的日单量是千万级别，一个系统日单量在百万，虽然差一个数量级，但是相比大多数公司已经很不错。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-自身：在自身系统中，并发问题是否已经是系统的瓶颈？如果是，这么这个瓶颈怎么打破？如果不是，那当初架构设计的时候是怎么保证并发不是问题的？(别告诉我：是通过系统没有访问量来保证的[擦汗])。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">前提包括：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-业务复杂度：举个栗子🌰，访问百度首页的时间基本就是看自己家的网速，通常情况下都是点一下就看到结果了。而扫描二维码支付，通常需要等很久，虽然这可能已经是业界最牛的支付公司出品了。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">-配置：用高配物理机得出的数据和最老最低配的虚拟器上的出来的结果是无法比较的。通常的配置有：cpu、内存、磁盘、带宽、网卡</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;高并发的本质不是「多大算高并发」的一个数字，而是从架构上、设计上、编码上怎么来保证或者解决由并发引起的问题。当别人问你：“做过高并发吗？”回答者完全可以描述自己系统的各项指标，然后开始叙述自己对系统中对预防、解决并发问题作出的思考和行动。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">这里就有一个非常重要的概念要讲一下了，经常面试官问，你们系统是多大并发，我说单台2000，面试官就会问2000 QPS ,还是PV</span></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><section style="white-space: normal;max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;background-color: rgb(255, 255, 255);font-size: 20px;text-align: center;overflow-wrap: break-word !important;"><span style="margin-top: 38px;margin-bottom: 10px;max-width: 100%;height: 59px;line-height: 85px;color: rgb(60, 112, 198);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/ZBjVrHIdkOmV4NEN9KK542ZUnPbFvYaOkLe0mFTiceEtXGN5IjICocMe09DmBzpIdOQkbZZ7r3FibZ7DEGLXm7mw/640?wx_fmt=png&quot;);background-position: 50% 50%;background-repeat: no-repeat;background-attachment: initial;background-origin: initial;background-clip: initial;border-bottom: 2px solid rgb(27, 95, 160);background-size: 57px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;">秒懂QPS、TPS、PV、UV、IP</span></section><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="white-space: normal;"  /></p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">QPS、TPS、PV、UV、GMV、IP、RPS等各种名词，外行看起来很牛X，实际上每个程序员都是必懂知识点。下面我来一一解释一下。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">QPS</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">Queries Per Second，每秒查询数。每秒能够响应的查询次数。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">QPS是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准，在因特网上，作为域名系统服务器的机器的性能经常用每秒查询率来衡量。每秒的响应请求数，也即是最大<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">吞吐能力</strong>。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">TPS</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">Transactions Per Second 的缩写，每秒处理的事务数目。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数，最终利用这些信息作出的评估分。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">TPS 的过程包括：</strong><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">客户端请求服务端、服务端内部处理、服务端返回客户端。</strong></p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">例如，访问一个 Index 页面会请求服务器 3 次，包括一次 html，一次 css，一次 js，那么访问这一个页面就会产生一个“T”，产生三个“Q”。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">PV</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">PV</strong>（page view）即页面浏览量，通常是衡量一个网络新闻频道或网站甚至一条网络新闻的主要指标。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">PV</strong>&nbsp;即 page view，页面浏览量。用户每一次对网站中的每个页面访问均被记录 1 次。用户对同一页面的多次刷新，访问量累计。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">根据这个特性，刷网站的 PV 就很好刷了。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">与 PV 相关的还有&nbsp;<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">RV</strong>，即重复访问者数量（repeat visitors）。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">UV</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">UV</strong>&nbsp;访问数（Unique Visitor）指独立访客访问数，统计1天内访问某站点的用户数(以 cookie 为依据)，一台电脑终端为一个访客。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">IP</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">IP</strong>（Internet Protocol）独立 IP 数，是指 1 天内多少个独立的 IP 浏览了页面，即统计不同的 IP 浏览用户数量。同一 IP 不管访问了几个页面，独立 IP 数均为 1；不同的 IP 浏览页面，计数会加 1。IP 是基于用户广域网 IP 地址来区分不同的访问者的，所以，多个用户（多个局域网 IP）在同一个路由器（同一个广域网 IP）内上网，可能被记录为一个独立 IP 访问者。如果用户不断更换 IP，则有可能被多次统计。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">GMV</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">GMV</strong>，是 Gross Merchandise Volume 的简称。只要是订单，不管消费者是否付款、卖家是否发货、是否退货，都可放进 GMV 。</p><h1 style="margin-top: 35px;margin-bottom: 15px;padding-bottom: 0.5em;font-weight: bold;font-size: 1.2rem;max-width: 100%;letter-spacing: 0.544px;white-space: normal;line-height: 1.225;cursor: text;border-bottom: 1px solid rgb(221, 221, 221);color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">RPS</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">RPS</strong>&nbsp;代表吞吐率，即 Requests Per Second 的缩写。吞吐率是服务器并发处理能力的量化描述，单位是 reqs/s，指的是某个并发用户数下单位时间内处理的请求数。<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  />某个并发用户数下单位时间内能处理的最大的请求数，称之为最大吞吐率。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">有人把 RPS 说等效于 QPS。其实可以看作同一个统计方式，只是叫法不同而已。RPS/QPS，可以使用 apche ab 工具进行测量。</p><section style="white-space: normal;max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;background-color: rgb(255, 255, 255);font-size: 20px;text-align: center;overflow-wrap: break-word !important;"><span style="margin-top: 38px;margin-bottom: 10px;max-width: 100%;height: 59px;line-height: 85px;color: rgb(60, 112, 198);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/ZBjVrHIdkOmV4NEN9KK542ZUnPbFvYaOkLe0mFTiceEtXGN5IjICocMe09DmBzpIdOQkbZZ7r3FibZ7DEGLXm7mw/640?wx_fmt=png&quot;);background-position: 50% 50%;background-repeat: no-repeat;background-attachment: initial;background-origin: initial;background-clip: initial;border-bottom: 2px solid rgb(27, 95, 160);background-size: 57px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;">承载高并发系统的本质</span></section><p style="white-space: normal;max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">小编刚上班的时候听到高并发也是热血沸腾，呼啦啦的看各个厂的架构，恨不得一下吃完，后面越看越多，发现怎么各家都一样的。互联网架构的三架马车屡试不爽，提供了非常强大简易的标准化解决方案：<strong>微服务、消息队列、定时任务</strong></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.6666666666666666" data-s="300,640" data-type="jpeg" data-w="1080" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dTiaiaUmmo0iaQG7GF1ziaOW4wZOibrrxdWZib2es3HuW4klzpylS00P1doArkwyUlLgoichDMAibic9zyIjLw/640?wx_fmt=jpeg"  /></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;letter-spacing: 0.544px;">那么高并发系统的本质是什么呢，第一个：这么多请求来了，要在你机器里跑，是不是需要<strong>网络流量</strong>，网络流量太大是不是把你的程序都卡了？那么就出现了把占流量的图片资源静态资源分析，再CDN一下，你的代码可以更安心的跑了；第二个就是：这么多请求来了，每个来的请求都是带着一堆数据过来的，第一层要对数据做处理,处理完又要存储，最后的处理都是把数据放到内存里，内存递给cpu来处理，而内存数据有时又需要从硬盘拿，这就变成了内存，硬盘，cpu 这三者之间的关系了，我们来看看这几者之间的关系</span></p><p style="white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">计算机为什么要并发？</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">为什么要并发？因为人类的贪婪！因为人类想要向计算机索取更多！人类想要一步，进一步的压榨计算机。所以，为了更高效的利用计算机的计算能力，人类想出来了让计算机并发执行多个任务的办法！</span><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">高速处理器与低速存储之间的矛盾</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">我们都知道，计算机中的处理器决定了计算机的处理速度，现代处理器的计算速度是惊人的。但是，处理器并不能自己单独工作，至少在进行运算时需要与进行内存交互，读取数据，或是写入数据。内存这种存储设备的速度是没有办法和处理器相比的，这就造成了造成了处理器计算能力的浪费。这种矛盾就犹如人民日益增长的美好生活需要和不平衡不充分的发展之间的矛盾一样，需要聪明的程序员去解决！</span><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">调和处理器与内存的矛盾</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">聪明的人类想到一个办法，他们在处理器与内存中间，增加一层高速缓存，这层缓存作为处理器与内存之间的缓冲区。将需要处理的数据放入高速缓存，处理结束后再重新放入到内存中，这样就处理器就不需要无尽的等待与内存之间的交互。这样一波操作看似十分的完美！但是，请往下看！</span><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">高速缓存带来的并发问题</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">高速缓存看似完美的解决了高速的处理器与低速缓存之间的矛盾。但是，问题确被复杂化了。在多处理器的系统中，每个处理器都会有自己的高速缓存，数据都会被复制到高速缓存中处理，处理后再放回主内存。由于主内存是共享的，如果不同处理器高速缓存中的数据不同，这样就会造成缓存不一致的问题!</span><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">解决并发问题高速缓存并发问题</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">高速缓存的数据不一致，这种现象就像邻居家的小孩子吵架，吵到最后就需要家长出面，把矛盾化解掉。对于计算机来说，这个家长就是缓存一致性协议，在读写操作时按照协议来操作，避免并发问题。这样，就完美的解决了所有的问题！</span><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><p><br style="overflow-wrap: break-word;"  /></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg wxw-img" data-ratio="0.5625" data-s="300,640" data-type="jpeg" data-w="640" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dTiaiaUmmo0iaQG7GF1ziaOW4wZpD5LY0ysz9ku6MeibxdicQE8JlO4RictduFUfibD2O95mtQ2SJvqWJYPRQ/640?wx_fmt=jpeg"  /></p><p style="overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;text-align: center;">处理器、高速缓存、缓存一致性协议、主内存</p><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /></p><h1 style="font-size: 1em;overflow-wrap: break-word;border-width: 0px;border-style: initial;border-color: initial;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);">计算机高效并发的其他操作</h1><p><br style="overflow-wrap: break-word;color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"  /><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">除了高效缓存机制外，还有一些其他的操作也可以提高效率。例如，与Java的指令重排序一样，处理器也会根据执行效率，将代码进行重新排序进行执行。有同学可能是我有多线程，我有缓存，我还有神器redis，那才是高并发，没错，尽可能高的提高cpu的利用率，把数据都放在内存里进行，最靠近cpu的地方，所以我们的所有的互联网高并发架构无非都是把数据更可能的不从磁盘里读取和运算，更多的放入内存，同时通过多线程等方式提高cpu的利用率，哈哈，就是监控你cpu有没有偷懒的时候，压榨cpu呀；cpu内存总有忙不过来的时候，这个时候怎么办呢，就是等你不忙的时候来个定时任务或者跑到另外一台机器的队列来执行。</span></p><p><br  /></p><p><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">实在单机扛不过来的时候，就喊人来帮忙，于是有了集群；有的单元模块嫌弃另外的单元模块影响我运行，于是有了微服务。</span></p><p><br  /></p><p><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">于是我们看到了大多数互联网架构都是往内存里塞数据，亲切的称之为缓存，通过优化算法减少程序的执行时间，实在不行来个磁盘顺序写，如kfaka和mysql的<span style="font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 16px;letter-spacing: 0.544px;">redo log</span>,每次都写数据都嫌累，就有了redis pipeline ,mysql redo log 组提交这样的操作</span></p><p><br  /></p><p><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">在高并发场景下，有时又需要读的同时又在写，怎么避免读取到脏数据呢，这是大多数中间件要考虑的事情，而大多数中间件其实是C语言写的，在这种情况下C一般会干什么事呢，修改数据的时原内存块我不动你，我新在已经分配好的内存块里找一个地方去修改数据，修改完了，再重新拷贝过去</span></p><p><span style="color: rgb(68, 68, 68);font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;font-size: 14px;text-align: start;background-color: rgb(255, 255, 255);">另外一块就是网络请求的处理方式，epoll,poll,select,java的nio了，&nbsp;由于这块相对比较比较重要，稍微展开一下：</span></p><p><br  /></p><h2 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 24px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">用户空间以及内核空间概念</h2><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;">我们知道现在操作系统都是采用虚拟存储器，那么对32位操作系统而言，它的寻址空间（虚拟存储空间）为4G（2的32次方）。操心系统的核心是内核，独立于普通的应用程序，可以访问受保护的内存空间，也有访问底层硬件设备的所有权限。为了保证用户进程不能直接操作内核，保证内核的安全，操心系统将虚拟空间划分为两部分，一部分为内核空间，一部分为用户空间。针对linux操作系统而言，将最高的1G字节（从虚拟地址0xC0000000到0xFFFFFFFF），供内核使用，称为内核空间，而将较低的3G字节（从虚拟地址0x00000000到0xBFFFFFFF），供各个进程使用，称为用户空间。每个进程可以通过系统调用进入内核，因此，Linux内核由系统内的所有进程共享。于是，从具体进程的角度来看，每个进程可以拥有4G字节的虚拟空间。</p></blockquote><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">空间分配如下图所示：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages wxw-img" data-ratio="0.5468227424749164" data-type="png" data-w="598" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibssdyRMVDLOt8KicEJaibAb6rtgXibz99f2QCaotedaCicohiagIOFic4BlevA/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">有了用户空间和内核空间，整个linux内部结构可以分为三部分，从最底层到最上层依次是：硬件--&gt;内核空间--&gt;用户空间。</strong></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">如下图所示：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages wxw-img" data-ratio="0.6389578163771712" data-type="png" data-w="806" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsRVwicuKiapC2b2QbC1nCeSKmrkm8hSu6IDBNvxGcRHHbLCtL9J6mtnJA/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">需要注意的细节问题，从上图可以看出内核的组成:</strong></p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><ol class="list-paddingleft-2" style="padding-left: 30px;width: 458.844px;max-width: 100%;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(74, 74, 74);line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">内核空间中存放的是内核代码和数据，而进程的用户空间中存放的是用户程序的代码和数据。不管是内核空间还是用户空间，它们都处于虚拟空间中。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(74, 74, 74);line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Linux使用两级保护机制：0级供内核使用，3级供用户程序使用。</span></p></li></ol></blockquote><h2 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 24px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">Linux 网络 I/O模型</h2><p><img class="rich_pages wxw-img" data-ratio="0.6871584699453552" data-type="png" data-w="732" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsRp5SjQdgic8nNUia39fNYXcZgQbPmWjBMuXzDTGxH7MEg6HUh81kWjkg/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">我们都知道，为了OS的安全性等的考虑，<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">进程是无法直接操作I/O设备的，其必须通过系统调用请求内核来协助完成I/O动作，而内核会为每个I/O设备维护一个buffer</strong>。如下图所示：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.304" data-type="png" data-w="500" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsicJSiboAds6Cho8KImKP2zWNAVkJaOibRv7ZmdgzmROXrgDSs2jzKWlcA/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">整个请求过程为：用户进程发起请求，内核接受到请求后，从I/O设备中获取数据到buffer中，再将buffer中的数据copy到用户进程的地址空间，该用户进程获取到数据后再响应客户端。</strong></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">在整个请求过程中，数据输入至buffer需要时间，而从buffer复制数据至进程也需要时间。因此根据在这两段时间内等待方式的不同，I/O动作可以分为以下<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">五种模式</strong>：</p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><ul class="list-paddingleft-2" style="padding-left: 30px;width: 458.844px;max-width: 100%;list-style-type: square;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">阻塞I/O (Blocking I/O)</strong></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">非阻塞I/O (Non-Blocking I/O)</strong></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">I/O复用（I/O Multiplexing)</strong></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">信号驱动的I/O (Signal Driven I/O)</strong></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(74, 74, 74);line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">异步I/O (Asynchrnous I/O)</strong>&nbsp;<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">说明：</strong>如果像了解更多可能需要linux/unix方面的知识了，可自行去学习一些网络编程原理应该有详细说明，<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">不过对大多数java程序员来说，不需要了解底层细节，知道个概念就行，知道对于系统而言，底层是支持的</strong>。</span></p></li></ul><p style="margin-top: 15px;max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;">本文最重要的参考文献是Richard Stevens的“UNIX® Network Programming Volume 1, Third Edition: The Sockets Networking ”，6.2节“I/O Models ”，<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">公众号【肉眼品世界】回复：linuxsocket或者linux001</strong>&nbsp;，获取该资料，建议电脑下载（比较大以及chm格式），<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">本文中的流程图也是截取自中</strong>。</p></blockquote><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6156156156156156" data-type="png" data-w="999" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsQNA2P7GovKicHaeAJVV4Jed19GSYVeFiaxdZ1ic589lXcDUItzn2p4fFA/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.3419354838709677" data-type="png" data-w="1240" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsoSuJlNd2ic9LvhySjgq6le48jfveZT7aWZxQ5iabTkM82gxsuTRgTsFw/640?wx_fmt=png"  /></p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">记住这两点很重要</strong></p><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;">1 等待数据准备 (Waiting for the data to be ready)
2 将数据从内核拷贝到进程中 (Copying the data from the kernel to the process)</p></blockquote><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">阻塞I/O (Blocking I/O)</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">在linux中，默认情况下所有的socket都是blocking，一个典型的读操作流程大概是这样：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6414473684210527" data-type="png" data-w="608" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsVvdaTIdkCez4cWGcfqRicAJXOWPTZOzxoofuAZnjSp1ex0lCzpVHKvw/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">当用户进程调用了recvfrom这个系统调用，内核就开始了IO的第一个阶段：等待数据准备。对于network io来说，很多时候数据在一开始还没有到达（比如，还没有收到一个完整的UDP包），这个时候内核就要等待足够的数据到来。而在用户进程这边，整个进程会被阻塞。当内核一直等到数据准备好了，它就会将数据从内核中拷贝到用户内存，然后内核返回结果，用户进程才解除block的状态，重新运行起来。所以，blocking IO的特点就是<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">在IO执行的两个阶段都被block了。</strong></p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">非阻塞I/O (Non-Blocking I/O)</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">linux下，可以通过设置socket使其变为non-blocking。当对一个non-blocking socket执行读操作时，流程是这个样子：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6128526645768025" data-type="png" data-w="638" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs3QQX8xRxl3HpE9YBG9uycyowUCXq6RALl5lw2TruAN7G7pwRANjxSw/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">当用户进程调用recvfrom时，系统不会阻塞用户进程，而是立刻返回一个ewouldblock错误，从用户进程角度讲 ，并不需要等待，而是马上就得到了一个结果。用户进程判断标志是ewouldblock时，就知道数据还没准备好，于是它就可以去做其他的事了，于是它可以再次发送recvfrom，一旦内核中的数据准备好了。并且又再次收到了用户进程的system call，那么它马上就将数据拷贝到了用户内存，然后返回。当一个应用程序在一个循环里对一个非阻塞调用recvfrom，我们称为轮询。应用程序不断轮询内核，看看是否已经准备好了某些操作。这通常是<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">浪费CPU时间</strong>，但这种模式偶尔会遇到。</p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">I/O复用（I/O Multiplexing)</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">IO multiplexing这个词可能有点陌生，但是如果我说select，epoll，大概就都能明白了。有些地方也称这种IO方式为event driven IO。我们都知道，select/epoll的好处就在于单个process就可以同时处理多个网络连接的IO。它的基本原理就是select/epoll这个function会不断的轮询所负责的所有socket，当某个socket有数据到达了，就通知用户进程。它的流程如图：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.5680119581464873" data-type="png" data-w="669" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsNdtskBQZpQ6rSFqU9NWqvVMoeibSFzfX3VPzcjg1bSKajibfCiavfZ9Qw/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">当用户进程调用了select，那么整个进程会被block，而同时，内核会“监视”所有select负责的socket，当任何一个socket中的数据准备好了，select就会返回。这个时候用户进程再调用read操作，将数据从内核拷贝到用户进程。这个图和blocking IO的图其实并没有太大的不同，事实上，还更差一些。因为这里需要使用两个system call (select 和 recvfrom)，而blocking IO只调用了一个system call (recvfrom)。但是，用select的优势在于它可以同时处理多个connection。（多说一句。所以，如果处理的连接数不是很高的话，使用select/epoll的web server不一定比使用multi-threading + blocking IO的web server性能更好，可能延迟还更大。select/epoll的优势并不是对于单个连接能处理得更快，而是在于能处理更多的连接。）
在IO multiplexing Model中，实际中，对于每一个socket，一般都设置成为non-blocking，但是，如上图所示，整个用户的process其实是一直被block的。只不过process是被select这个函数block，而不是被socket IO给block。</p><h4 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 18px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">文件描述符fd</h4><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">Linux的内核将所有外部设备都可以看做一个文件来操作。那么我们对与外部设备的操作都可以看做对文件进行操作。我们对一个文件的读写，都通过调用内核提供的系统调用；内核给我们返回一个filede scriptor（fd,文件描述符）。而对一个socket的读写也会有相应的描述符，称为socketfd(socket描述符）。描述符就是一个数字，指向内核中一个结构体（文件路径，数据区，等一些属性）。那么我们的应用程序对文件的读写就通过对描述符的读写完成。</p><h4 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 18px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">select</h4><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">基本原理：</strong>select 函数监视的文件描述符分3类，分别是writefds、readfds、和exceptfds。调用后select函数会阻塞，直到有描述符就绪（有数据 可读、可写、或者有except），或者超时（timeout指定等待时间，如果立即返回设为null即可），函数返回。当select函数返回后，可以通过遍历fdset，来找到就绪的描述符。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">缺点:
1、select最大的缺陷就是单个进程所打开的FD是有一定限制的，它由FDSETSIZE设置，32位机默认是1024个，64位机默认是2048。一般来说这个数目和系统内存关系很大，”具体数目可以cat /proc/sys/fs/file-max察看”。32位机默认是1024个。64位机默认是2048.
2、对socket进行扫描时是线性扫描，即采用轮询的方法，效率较低。当套接字比较多的时候，每次select()都要通过遍历FDSETSIZE个Socket来完成调度，不管哪个Socket是活跃的，都遍历一遍。这会浪费很多CPU时间。”如果能给套接字注册某个回调函数，当他们活跃时，自动完成相关操作，那就避免了轮询”，这正是epoll与kqueue做的。3、需要维护一个用来存放大量fd的数据结构，这样会使得用户空间和内核空间在传递该结构时复制开销大。</p><h4 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 18px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">poll</h4><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">基本原理：</strong>poll本质上和select没有区别，它将用户传入的数组拷贝到内核空间，然后查询每个fd对应的设备状态，如果设备就绪则在设备等待队列中加入一项并继续遍历，如果遍历完所有fd后没有发现就绪设备，则挂起当前进程，直到设备就绪或者主动超时，被唤醒后它又要再次遍历fd。这个过程经历了多次无谓的遍历。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">它没有最大连接数的限制，原因是它是基于链表来存储的，但是同样有一个缺点：</strong>1、大量的fd的数组被整体复制于用户态和内核地址空间之间，而不管这样的复制是不是有意义。2 、poll还有一个特点是“水平触发”，如果报告了fd后，没有被处理，那么下次poll时会再次报告该fd。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">注意：</strong>从上面看，select和poll都需要在返回后，通过遍历文件描述符来获取已经就绪的socket。事实上，同时连接的大量客户端在一时刻可能只有很少的处于就绪状态，因此随着监视的描述符数量的增长，其效率也会线性下降。</p><h4 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 18px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">epoll</h4><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">epoll是在2.6内核中提出的，是之前的select和poll的增强版本。相对于select和poll来说，epoll更加灵活，没有描述符限制。epoll使用一个文件描述符管理多个描述符，将用户关系的文件描述符的事件存放到内核的一个事件表中，这样在用户空间和内核空间的copy只需一次。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">基本原理：</strong>epoll支持水平触发和边缘触发，最大的特点在于边缘触发，它只告诉进程哪些fd刚刚变为就绪态，并且只会通知一次。还有一个特点是，epoll使用“事件”的就绪通知方式，通过epollctl注册fd，一旦该fd就绪，内核就会采用类似callback的回调机制来激活该fd，epollwait便可以收到通知。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">epoll的优点：</strong>1、没有最大并发连接的限制，能打开的FD的上限远大于1024（1G的内存上能监听约10万个端口）。2、效率提升，不是轮询的方式，不会随着FD数目的增加效率下降。只有活跃可用的FD才会调用callback函数；即Epoll最大的优点就在于它只管你“活跃”的连接，而跟连接总数无关，因此在实际的网络环境中，Epoll的效率就会远远高于select和poll。3、内存拷贝，利用mmap()文件映射内存加速与内核空间的消息传递；即epoll使用mmap减少复制开销。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">JDK1.5_update10版本使用epoll替代了传统的select/poll，极大的提升了NIO通信的性能。</strong></p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">备注：</strong>JDK NIO的BUG，例如臭名昭著的epoll bug，它会导致Selector空轮询，最终导致CPU 100%。官方声称在JDK1.6版本的update18修复了该问题，但是直到JDK1.7版本该问题仍旧存在，只不过该BUG发生概率降低了一些而已，它并没有被根本解决。<strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">这个可以在后续netty系列里面进行说明下。</strong></p></blockquote><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">信号驱动的I/O (Signal Driven I/O)</h3><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;">由于signal driven IO在实际中并不常用，所以简单提下。</p></blockquote><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.5745937961595273" data-type="png" data-w="677" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsLtMX8PPrqjD46nRA3GJeWADkAAgEibTJpEtNafuOJpjpWDF0sEaGnmw/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">很明显可以看出用户进程不是阻塞的。首先用户进程建立SIGIO信号处理程序，并通过系统调用sigaction执行一个信号处理函数，这时用户进程便可以做其他的事了，一旦数据准备好，系统便为该进程生成一个SIGIO信号，去通知它数据已经准备好了，于是用户进程便调用recvfrom把数据从内核拷贝出来，并返回结果。</p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">异步I/O</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">一般来说，这些函数通过告诉内核启动操作并在整个操作（包括内核的数据到缓冲区的副本）完成时通知我们。这个模型和前面的信号驱动I/O模型的主要区别是，在信号驱动的I/O中，内核告诉我们何时可以启动I/O操作，但是异步I/O时，内核告诉我们何时I/O操作完成。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.5969924812030075" data-type="png" data-w="665" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs4xoM7RMUxY7f6E32IHhZvFAAbBjMbzsTPEXmNp0qiaicynkZsrsMeQVg/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">当用户进程向内核发起某个操作后，会立刻得到返回，并把所有的任务都交给内核去完成（包括将数据从内核拷贝到用户自己的缓冲区），内核完成之后，只需返回一个信号告诉用户进程已经完成就可以了。</p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">5中I/O模型的对比</h3><p><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;"><img data-ratio="0.5167130919220055" data-type="png" data-w="718" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs88Ec3N1Tk7mF2jhshyK1OWpozOQzL4qmAub2YYE5Coff8VwvgTW6Gw/640?wx_fmt=png"  /></span><br  /></p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">结果表明：</strong>前四个模型之间的主要区别是第一阶段，四个模型的第二阶段是一样的：过程受阻在调用recvfrom当数据从内核拷贝到用户缓冲区。然而，异步I/O处理两个阶段，与前四个不同。</p></blockquote><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.16532258064516128" data-type="png" data-w="1240" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsq8S7W0G6RGib9fwP7mY9qxfMg6N40HVsnDyk9kU8rzeMDz9TRpwRYQQ/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">从同步、异步，以及阻塞、非阻塞两个维度来划分来看：</strong></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6631823461091754" data-type="png" data-w="861" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibshlsUowNSK9ZrZAtGReIDrqXNdRFIxiaWj133OV6MSwBEl19ibDicDRfow/640?wx_fmt=png"  /></strong></p><h2 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 24px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">零拷贝</h2><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6666666666666666" data-type="png" data-w="1240" style="border-width: 2px;border-style: solid;border-color: rgb(238, 238, 238);border-radius: 6px;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/1QxwhpDy7ia1mMN6NlFd3fDIMRY5O2CHeD9gicHia6ZuvVj98DwibFfQpoSB5GMkuhhiccfMWO9KhiaFheW1GwIXXHUA/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">CPU不执行拷贝数据从一个存储区域到另一个存储区域的任务，这通常用于在网络上传输文件时节省CPU周期和内存带宽。</p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">缓存 IO</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">缓存 IO 又被称作标准 IO，大多数文件系统的默认 IO 操作都是缓存 IO。在 Linux 的缓存 IO 机制中，操作系统会将 IO 的数据缓存在文件系统的页缓存（ page cache ）中，也就是说，数据会先被拷贝到操作系统内核的缓冲区中，然后才会从操作系统内核的缓冲区拷贝到应用程序的地址空间。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">缓存 IO 的缺点：数据在传输过程中需要在应用程序地址空间和内核进行多次数据拷贝操作，这些数据拷贝操作所带来的 CPU 以及内存开销是非常大的。</p><h3 style="margin-top: 1.5rem;margin-bottom: 1rem;font-size: 20px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;color: rgb(21, 153, 87);line-height: 1.35;box-sizing: border-box !important;overflow-wrap: break-word !important;">零拷贝技术分类</h3><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">零拷贝技术的发展很多样化，现有的零拷贝技术种类也非常多，而当前并没有一个适合于所有场景的零拷贝技术的出现。对于 Linux 来说，现存的零拷贝技术也比较多，这些零拷贝技术大部分存在于不同的 Linux 内核版本，有些旧的技术在不同的 Linux 内核版本间得到了很大的发展或者已经渐渐被新的技术所代替。本文针对这些零拷贝技术所适用的不同场景对它们进行了划分。概括起来，Linux 中的零拷贝技术主要有下面这几种：</p><ul class="list-paddingleft-2" style="padding-left: 30px;width: 494px;max-width: 100%;color: rgb(62, 62, 62);font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 16px;text-align: start;white-space: normal;list-style-type: square;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;">直接 I/O：对于这种数据传输方式来说，应用程序可以直接访问硬件存储，操作系统内核只是辅助数据传输：这类零拷贝技术针对的是操作系统内核并不需要对数据进行直接处理的情况，数据可以在应用程序地址空间的缓冲区和磁盘之间直接进行传输，完全不需要 Linux 操作系统内核提供的页缓存的支持。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;">在数据传输的过程中，避免数据在操作系统内核地址空间的缓冲区和用户应用程序地址空间的缓冲区之间进行拷贝。有的时候，应用程序在数据进行传输的过程中不需要对数据进行访问，那么，将数据从 Linux 的页缓存拷贝到用户进程的缓冲区中就可以完全避免，传输的数据在页缓存中就可以得到处理。在某些特殊的情况下，这种零拷贝技术可以获得较好的性能。Linux 中提供类似的系统调用主要有 mmap()，sendfile() 以及 splice()。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;">对数据在 Linux 的页缓存和用户进程的缓冲区之间的传输过程进行优化。该零拷贝技术侧重于灵活地处理数据在用户进程的缓冲区和操作系统的页缓存之间的拷贝操作。这种方法延续了传统的通信方式，但是更加灵活。在Linux 中，该方法主要利用了写时复制技术。</span></p></li></ul><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">前两类方法的目的主要是为了避免应用程序地址空间和操作系统内核地址空间这两者之间的缓冲区拷贝操作。这两类零拷贝技术通常适用在某些特殊的情况下，比如要传送的数据不需要经过操作系统内核的处理或者不需要经过应用程序的处理。第三类方法则继承了传统的应用程序地址空间和操作系统内核地址空间之间数据传输的概念，进而针对数据传输本身进行优化。我们知道，硬件和软件之间的数据传输可以通过使用 DMA 来进行，DMA 进行数据传输的过程中几乎不需要CPU参与，这样就可以把 CPU 解放出来去做更多其他的事情，但是当数据需要在用户地址空间的缓冲区和 Linux 操作系统内核的页缓存之间进行传输的时候，并没有类似DMA 这种工具可以使用，CPU 需要全程参与到这种数据拷贝操作中，所以这第三类方法的目的是可以有效地改善数据在用户地址空间和操作系统内核地址空间之间传递的效率。</p><blockquote style="margin-bottom: 1.2em;padding: 15px 15px 15px 1rem;border-left-width: 6px;border-left-color: rgb(220, 230, 240);color: rgb(129, 145, 152);line-height: 22px;font-size: 14px;max-width: 100%;text-align: start;white-space: normal;background: rgb(242, 247, 251);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);box-sizing: border-box !important;overflow-wrap: break-word !important;">注意，对于各种零拷贝机制是否能够实现都是依赖于操作系统底层是否提供相应的支持。</p></blockquote><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6599264705882353" data-type="png" data-w="544" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibstNZ1aExqDAQicW9n6iaBgwO73sxHicaRgo9Evsr6BPAlIzibFueMt1v2Bg/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">当应用程序访问某块数据时，操作系统首先会检查，是不是最近访问过此文件，文件内容是否缓存在内核缓冲区，如果是，操作系统则直接根据read系统调用提供的buf地址，将内核缓冲区的内容拷贝到buf所指定的用户空间缓冲区中去。如果不是，操作系统则首先将磁盘上的数据拷贝的内核缓冲区，这一步目前主要依靠DMA来传输，然后再把内核缓冲区上的内容拷贝到用户缓冲区中。接下来，write系统调用再把用户缓冲区的内容拷贝到网络堆栈相关的内核缓冲区中，最后socket再把内核缓冲区的内容发送到网卡上。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">从上图中可以看出，共产生了四次数据拷贝，即使使用了DMA来处理了与硬件的通讯，CPU仍然需要处理两次数据拷贝，与此同时，在用户态与内核态也发生了多次上下文切换，无疑也加重了CPU负担。在此过程中，我们没有对文件内容做任何修改，那么在内核空间和用户空间来回拷贝数据无疑就是一种浪费，而零拷贝主要就是为了解决这种低效性。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">### 让数据传输不需要经过user space，使用mmap
我们减少拷贝次数的一种方法是调用mmap()来代替read调用：</p><section style="padding-top: 8px;padding-bottom: 6px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;background-color: rgb(241, 239, 238);border-radius: 0px;overflow-y: auto;color: rgb(80, 97, 109);font-size: 10px;line-height: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><ol class="list-paddingleft-2" style="padding-left: 30px;width: 494px;max-width: 100%;list-style-type: none;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">buf = mmap(diskfd, len);</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">write(sockfd, buf, len);</span></code></span></p></li></ol></section><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">应用程序调用 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">mmap()</span></code>，磁盘上的数据会通过 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">DMA</span></code>被拷贝的内核缓冲区，接着操作系统会把这段内核缓冲区与应用程序共享，这样就不需要把内核缓冲区的内容往用户空间拷贝。应用程序再调用 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">write()</span></code>,操作系统直接将内核缓冲区的内容拷贝到 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">socket</span></code>缓冲区中，这一切都发生在内核态，最后， <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">socket</span></code>缓冲区再把数据发到网卡去。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">同样的，看图很简单：</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.7472727272727273" data-type="png" data-w="550" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs1qaf05gCfr9FOrPWZM4ZG1ibzofI0qXoIEYAWC1pqNeZTXD3nqcPJsg/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">使用mmap替代read很明显减少了一次拷贝，当拷贝数据量很大时，无疑提升了效率。但是使用 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">mmap</span></code>是有代价的。当你使用 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">mmap</span></code>时，你可能会遇到一些隐藏的陷阱。例如，当你的程序 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">map</span></code>了一个文件，但是当这个文件被另一个进程截断(truncate)时, write系统调用会因为访问非法地址而被 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SIGBUS</span></code>信号终止。<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SIGBUS</span></code>信号默认会杀死你的进程并产生一个 <code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">coredump</span></code>,如果你的服务器这样被中止了，那会产生一笔损失。</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">通常我们使用以下解决方案避免这种问题：</p><ol class="list-paddingleft-2" style="padding-left: 30px;width: 494px;max-width: 100%;color: rgb(62, 62, 62);font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 16px;text-align: start;white-space: normal;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">为SIGBUS信号建立信号处理程序</strong>&nbsp;当遇到&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SIGBUS</span></code>信号时，信号处理程序简单地返回，&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">write</span></code>系统调用在被中断之前会返回已经写入的字节数，并且&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">errno</span></code>会被设置成success,但是这是一种糟糕的处理办法，因为你并没有解决问题的实质核心。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;"><strong style="max-width: 100%;color: rgb(0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">使用文件租借锁</strong>&nbsp;通常我们使用这种方法，在文件描述符上使用租借锁，我们为文件向内核申请一个租借锁，当其它进程想要截断这个文件时，内核会向我们发送一个实时的&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">RT_SIGNAL_LEASE</span></code>信号，告诉我们内核正在破坏你加持在文件上的读写锁。这样在程序访问非法内存并且被&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SIGBUS</span></code>杀死之前，你的&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">write</span></code>系统调用会被中断。&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">write</span></code>会返回已经写入的字节数，并且置&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">errno</span></code>为success。&nbsp;我们应该在&nbsp;<code style="max-width: 100%;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="padding-right: 2px;padding-left: 2px;max-width: 100%;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;line-height: 22px;box-sizing: border-box !important;overflow-wrap: break-word !important;">mmap</span></code>文件之前加锁，并且在操作完文件后解锁：</span></p></li></ol><section style="padding-top: 8px;padding-bottom: 6px;max-width: 100%;font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: start;white-space: normal;background-color: rgb(241, 239, 238);border-radius: 0px;overflow-y: auto;color: rgb(80, 97, 109);font-size: 10px;line-height: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><ol class="list-paddingleft-2" style="padding-left: 30px;width: 494px;max-width: 100%;list-style-type: none;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(102, 102, 234);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">if</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">(fcntl(diskfd, F_SETSIG, RT_SIGNAL_LEASE) == -</span><span style="max-width: 100%;color: rgb(223, 83, 32);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">1</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">) {</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;"> &nbsp; &nbsp;perror(</span><span style="max-width: 100%;color: rgb(123, 151, 38);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">"kernel lease set signal"</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">);</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;"> &nbsp; &nbsp;</span><span style="max-width: 100%;color: rgb(102, 102, 234);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">return</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">-</span><span style="max-width: 100%;color: rgb(223, 83, 32);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">1</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">;</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">}</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(156, 148, 145);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">/* l_type can be F_RDLCK F_WRLCK &nbsp;加锁*/</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(156, 148, 145);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">/* l_type can be &nbsp;F_UNLCK 解锁*/</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(102, 102, 234);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">if</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">(fcntl(diskfd, F_SETLEASE, l_type)){</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;"> &nbsp; &nbsp;perror(</span><span style="max-width: 100%;color: rgb(123, 151, 38);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">"kernel lease set type"</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">);</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;"> &nbsp; &nbsp;</span><span style="max-width: 100%;color: rgb(102, 102, 234);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">return</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">-</span><span style="max-width: 100%;color: rgb(223, 83, 32);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">1</span><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">;</span></code></span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);max-width: 100%;line-height: 22px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 14px !important;word-break: inherit !important;"><code style="white-space:pre-wrap;margin-left: -20px;max-width: 100%;overflow-wrap: normal;display: flex;overflow: initial;line-height: 12px;border-width: 0px;border-style: initial;border-color: initial;font-size: 10px;box-sizing: border-box !important;font-family: inherit !important;"><span style="max-width: 100%;color: rgb(27, 25, 24);line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 13px !important;white-space: inherit !important;">}</span></code></span></p></li></ol></section><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">关于更多零拷贝的问题可以查看《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI2MDY5NzYxNQ==&amp;mid=2247484591&amp;idx=1&amp;sn=07e6d215acbbde934cecd9e2588f1243&amp;chksm=ea64ffcfdd1376d99cbde0d565f3225501107cd92bdcd9d113cabfcc379cd88d86b7a7e8ec20&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">如何理解 Linux 的零拷贝技术？</a>》</p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">所以，我们可以看到高并发的本质是通过软件层编码的方法充分使用内存和cpu，这是单机，再加集群就是无限级了，当然集群的管理和监控也是相当重要的组成部分</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">这里面最重要的部分就是</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">1:充分利用内存，压榨cpu</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">2:处理好网络IO,socketfd这东西在贯穿网络的主要核心,了解了socketfd就基本了解了外界于linux打交道的原理，至于怎么打交道就是poll,select,epoll的事情了</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">3:算法，算法也是软件编码层的充分使用硬件相对独立的一个分支，关于算法相关内容可以参考：</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247484400&amp;idx=1&amp;sn=7037d16b5c9dff0ec50e3ae6905ae092&amp;chksm=9faf9c3ba8d8152d2aa9097b80e4a72e3c844af76a864c0d78585e89de1dd4d768a0ff02c471&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">十大经典排序算法（动图演示，收藏好文）</a>》</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485367&amp;idx=4&amp;sn=4bc8c9bd113967835983f5851bc29975&amp;chksm=9faf987ca8d8116a54122e905bd4a367216519d36937ac7b570cc09217e494fd9c5a58895f51&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">《一遍记住 Java 面试中常用的八种排序算法与代码实现！</a>》</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247484248&amp;idx=2&amp;sn=e92658fb0f6c81b0b2ade3c2d927bf29&amp;chksm=9faf9c93a8d815857714d3304525e39987cee205e5f5fb8f74e7e55bd7a03854dc44354b1111&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">主宰这个世界的10种算法</a><br  /></span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485136&amp;idx=1&amp;sn=b614b64cc2069c4e0f9cecb345fa8a40&amp;chksm=9faf991ba8d8100dfc59c88baea62305978ef8a5af69d7871d00525777972ec51f43e5f6149c&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">已经绝版的《数据结构和算法（第二版）》高清电子书！</a><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485147&amp;idx=2&amp;sn=2186163d086ca303d9f2b84883ebdc6c&amp;chksm=9faf9910a8d81006f4eff5862510bbff20811014bff30b62cc65d27b911940bac7ce4d1ee9ce&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">(附下载) 435页经典书籍《算法心得：高效算法的奥秘(第2版)》</a><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485406&amp;idx=1&amp;sn=b73b839b236a95a9c5aa8a51d4fee080&amp;chksm=9faf9815a8d81103d45282ed69e944c06971e72e1882e5ecbeb6881e5978231f2ecd443e6f8d&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">【干货】350+页的《数据结构与算法》pdf</a><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247484297&amp;idx=3&amp;sn=64f943859ce5f4c3974009b61cfb4955&amp;chksm=9faf9c42a8d815549c50f0cb0876d34187d0c8a12c8dd10ab3a917fccb6396292858a87c0cc0&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">一致性哈希算法在分布式场景中的应用</a><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485518&amp;idx=3&amp;sn=0ee7f911c03fb0276642f1ff6358df60&amp;chksm=9faf9785a8d81e9322b6080701c98cd6239e6cc40c171bf438c73c8ad0c27de87c81efa689c9&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">今日头条、抖音推荐算法原理全文详解</a><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">基于以上三点又构建了诸如docker,nginx server,lvs,redis,多线程语言，数据库,分布式存储的一系列应用，至于其他，小编也在射射发抖的学习...</p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.9465648854961832" data-s="300,640" data-type="jpeg" data-w="262" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsAxYTaouMohxBfWaG7uYKGxibw5yhMGlxmwGWaBT35fEXOvfyrIPoTbg/640?wx_fmt=jpeg"  /></p><section style="white-space: normal;max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;background-color: rgb(255, 255, 255);font-size: 20px;text-align: center;overflow-wrap: break-word !important;"><span style="margin-top: 38px;margin-bottom: 10px;max-width: 100%;height: 59px;line-height: 85px;color: rgb(60, 112, 198);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/ZBjVrHIdkOmV4NEN9KK542ZUnPbFvYaOkLe0mFTiceEtXGN5IjICocMe09DmBzpIdOQkbZZ7r3FibZ7DEGLXm7mw/640?wx_fmt=png&quot;);background-position: 50% 50%;background-repeat: no-repeat;background-attachment: initial;background-origin: initial;background-clip: initial;border-bottom: 2px solid rgb(27, 95, 160);background-size: 57px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;">如何构建高并发系统</span></section><p style="white-space: normal;max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">知道了高并发系统的相关实质，那么我们还得会使用前辈们造好的轮子来搭配好，平时我们所说的高并发系统更多的是用工具来组合形成一个稳定高效的系统，也就是所谓的高并发高可用，如果并发太大又需要对前辈们造的轮子做改造，而大多数组件是C语言写的，所以做架构能会C，能了解到相关组件的源码并在需要的情况下做修改是架构师向更高层次发展需要具备的要素，大佬们造的那些轮子也是支撑高并发系统的核心要素，如redis，lvs，nginx，mysql,感谢开源，站在巨人的肩膀上做架构竟然变得如何美好；高可用是伴随高并发而产生的，<span style="color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;letter-spacing: 0.544px;text-align: start;background-color: rgb(255, 255, 255);">前面说过高并发</span>，这里又有一个高可用，什么是高可用呢</p><h1 style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">1、什么是高可用</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">高可用指系统的可用程度。没有100%的可用性。打个夸张的比方说，部署在全球的所有机房都同时停电了，那么系统就不能再提供服务。一般我们只需要做到4个9就已经很不错了，如下图:</p><p><br  /></p><p><img data-ratio="0.47625" data-type="other" data-w="800" style="cursor: zoom-in;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs3tJY5cv3dyOQlMic078Z3MicObwibsTtak29EKOZMYHk2uBlfR1U1mU6w/640?wx_fmt=other"  /></p><h1 style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">2、高可用分类</h1><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">按照业务=逻辑+数据来分，高可用分为计算高可用和存储高可用，逻辑即数据，数据即存储。</p><h2 style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">2.1 计算高可用</h2><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">常见的计算高可用架构分为主备、主从、对称集群、非对称集群。</p><p style="margin-top: 0.8em;margin-bottom: 0.8em;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;color: rgb(52, 73, 94);font-family: &quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif;font-size: 16px;text-align: start;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">主备：<br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.8976234003656307" data-w="547" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsGWhvZff3DucPzbls1mzvCLBvwreplnrSOvxopoTXZwpp1tict4kS4NA/640?wx_fmt=other"  /></p><p><br  /></p><p><br  /></p><p><strong>主从：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.998109640831758" data-w="529" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsLw6eBodiaDbawu2S1UaByP9gopLMlUA2kRoukOdC89V0D85zmnah9mA/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>对称集群：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.6375" data-w="640" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs94sw7kCMXcHRBiat2PDdJvUCpPeyJvVtyMibbwribDQr0kxfvwWdqlvyA/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>非对称集群：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.6125" data-w="640" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsqFDdfL1ZmibDzMu064y30T5aq6xw7pibSPXHFgibD9GyXbkrMXe3ytQbw/640?wx_fmt=other"  /></p><p><br  /></p><p><br  /></p><h2>2.2 存储高可用</h2><p>常见的存储高可用有主备、主从、主备/主从切换，主主，集群（数据集中集群和数据分散集群），分区（洲际、国家、城市、同城分区）。</p><p><strong>主备：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.7078125" data-w="640" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsIJ5pDyF12zcqROkARmBFJQ97icd4jcDZJJmCHeLKJmc52OFNiaT6B0pA/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>主从：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.7078125" data-w="640" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsB9Z7knN8PmiaBb8ETssicjlF697GNq9iaibuBtzkCAZLaQg4vpUs1tmLiag/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>数据集中式集群：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.7071197411003236" data-w="618" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs2SIibvWicl4OdGME9DiccwmkHWtnZv8PEz9oWGD1CFzHpnHBjbn9YUxvg/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>主主集群：</strong><br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="1.0946745562130178" data-w="338" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsmwt7onic2eql39XTeJvib7oQ6tuufXDODnXic9OqWV75IG1tLsOvEGDRA/640?wx_fmt=other"  /></p><p><br  /></p><p><strong>数据分散集群：</strong><br  />比如HDFS的架构。<br  /></p><p><img data-type="other" style="cursor: zoom-in;height: auto !important;" data-ratio="0.6942528735632184" data-w="435" src="https://mmbiz.qpic.cn/mmbiz/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibst7NTaV3KaTicAxqC9JB4Bcu87LFia7yMEcfcHo2q6Ip7C4KicTCKPrsKg/640?wx_fmt=other"  /></p><p><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;">在存储界，还有一个比较有名的组件FastDFS,基本设计也是类似，关于高可用的知识图谱，可以作为参考:<br  /></span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;text-align: start;white-space: pre-line;"><img data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="885" data-ratio="1.531356898517674" data-type="png" data-w="877" style="width: 578px;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibswicicdjdEsTlXVlBXMzQKGu7hmgYxrkNJAgxhE4SOd2vfkS65uXjMNFQ/640?wx_fmt=png"  /></span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;">往往我们开始做系统时，并不是一开始就设计这么复杂的架构，架构核心的内容是大道至简，架构也是根据需要一步步演进而来的，一般目前的架构要比现在实际用户量并发量至少高一个层级，创业公司刚上来也没必要搞那么复杂的系统，关于基础的技术选型可以查看《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247483946&amp;idx=1&amp;sn=6fe1289bd8621ef2ad389e7e08186d77&amp;chksm=9faf9de1a8d814f79b4cca3fc999670757b67242459d4245f742ecf758684a2672323ffb2e41&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">创业公司技术选型与管理注意事项</a>》，一个springboot跑起来再说，够你玩好久了，等你量达到那种程度了；但对于技术来说，还是能够提前做到心中有数比较好</span></p><h2 style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">某些App怎么扛住1分钟10亿请求？</span></h2><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">架构的演进路线</span></strong><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">百万级并发：1秒100万次请求。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">千万级并发：一分钟6亿次请求，差不多就是需求的极限。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">架构的设计和架构优化要符合需求本身，不能无限制优化。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">基本概念</span></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（1）分布式（系统中，多个模块在不同服务器上部署）</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（2）集群（一个软件部署在多台服务器，并作为一个整体，提供一类服务）</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（3）高可用（系统中部分节点失效，其他节点能够接替它继续工作或有相应的处理预案）</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（4）负载均衡（把请求均匀的发到多个节点上）</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">架构演进：</span></strong></section><section data-mpa-template="t" mpa-from-tpl="t" style="max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">1</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 单机架构</span></strong></span></strong><br  /></span></strong></section><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="328" data-ratio="0.5694164989939637" data-s="300,640" data-type="png" data-w="497" style="width: 578px;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsT9hA4NZjODvgqD2rRtPdYWhafsp6qflIqLFKpicjH8Q87wGVmcEmnKQ/640?wx_fmt=png"  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">DNS服务器，做域名解析的服务器，作用是，经过DNS将www.taobao.com这类的域名转换为实际IP地址，浏览器转而访问这个IP对应的tomcat。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">如果是单机一般用服务商自己的DNS解析即可，如果是多机DNSPOD在域名轮询层就是不错解决方案；java用tomcat,php用nginx,springboot这骚货还自带tomcat，你要嫌麻烦直接启动springboot也是可以的</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：用户增长，java(php)代码、静态资源和数据库之间竞争资源，单机性能不足以支撑业务，万一哪台机器内存突然出点儿状况，你的服务也就不可用了。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">2</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第一次演进：动静分离、代码与数据库分离</span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.5787401574803149" data-s="300,640" data-type="png" data-w="508" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsl704BeagznLG8OcLso1AAOFo5dRzDsOKTgYMiadFFEx7EibN1QUMSqWw/640?wx_fmt=png"  /></p><p style="text-align: center;"><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">java(php,go)代码和数据库分别独占服务器资源，显著提高两者各自性能，这个时候也可以把html和图片静态文件资源分离，目前大多数情况下是前后端分离的，创业公司用vue把打包过后的文件单独部署一个域名，随时可以通过jenkins部署到新服务器（tomcat服务器找一个内存大的，DB服务器找一个硬盘大的，带宽更宽的）。</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：用户量增长，数据库并发读写，尤其是读，成为瓶颈。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">注意，不会通过数据库集群解决</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">3</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第二次演进：引进CDN,缓存甚至分布式缓存</span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.832520325203252" data-s="300,640" data-type="png" data-w="615" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibsLSyZQdprYJtiabNPFibJtMeTIIeYK5ON3miapTTa0Juanvnh6XTVzerDQ/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;"><span style="font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 1px;background-color: rgb(255, 255, 255);">在Tomcat服务器上（Java程序所在的地方）加入缓存，可以把绝大多数请求（尤其是查询）在访问数据库前拦截掉。</span>如果你的服务器是nginx或者有nginx代理层，nginx可以直接访问和刷新缓存的</span></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.8137931034482758" data-s="300,640" data-type="png" data-w="580" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dREBaa2aYS1SNoEibtH5TCibs5kzkCIeEmzrV3IuQ09o90DxALrYnSpI835WJoKampTuqicE64wlUkxg/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;">Redis一般放在单独的服务器上，也可以多弄几台Redis服务器，配置成主从同步（提升可用性可以加上哨兵）。</span><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;redis的进群解决方案一般有Codis,Redis Cluster,twemproxy,redis主从，这几种都各有优缺点，如果你的redis集群量不大，搞个主从就可以了；提到天猫和redis，自然少不了秒杀场景，秒杀场景可以参考《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247484535&amp;idx=5&amp;sn=91947c2df702388c997a42a38ac4aa00&amp;chksm=9faf9bbca8d812aae1f1722212e3b1c06c7d7acba49d254652807b1058dd8e9b5acb402184ad&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">解密 Redis 助力双 11 背后电商秒杀系统</a>》的一些做法</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">当然，这个时候消息队列也可以出现在系统里了，开始用redis也可以抗一阵儿，金融场景RocketMQ是不错的选择,kafka追求高吞吐量，起源的时候是用于海量日志传输，但是随着版本的越来越完善，可靠性也在不断提高，据说（没亲眼见代码）某滴滴公司消息推送就使用kafka了</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：用户数量增长，并发压力主要在单机的tomcat+java上，响应逐渐变慢。单机java变慢还可以优化呀，每个api接口的时间监控起来，mysql慢查询监控起来，推荐一款阿里问题定位神器《</span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485289&amp;idx=4&amp;sn=ffff1b4efa1cea6683cd928fd1143fe7&amp;chksm=9faf98a2a8d811b443f6c49e60ab51dcfc4405c87dc1f28c8e347c7e2d84beaaaffd4d7265f0&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;" data-linktype="2"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">阿里问题定位神器 Arthas 的骚操作，定位线上BUG，超给力</span></a><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">》</span><br  /></section><p><br  /></p><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">4</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第三次演进：<strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">引入反向代理和负载均衡</strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.7219430485762144" data-s="300,640" data-type="png" data-w="597" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHanvXPchG5rUvBbUNORSqdNzlJyg2tYAIe4AD52HB2OIcicZZ3RUgLoqA/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">使用反向代理，将大量的用户请求，均匀分发到每个java应用程序中。关于nginx为什么能支撑这么大并发可以阅读《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247485341&amp;idx=3&amp;sn=7802315f7c87f3c3b503394af5cf4ae5&amp;chksm=9faf9856a8d8114036527a9af450634f90e614a34a8818587a2676bd023be32efbc4d7bd2807&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">只知道 Nginx 牛逼，却不知道它怎么支持百万并发？</a>》</span><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：应用服务器可支持的并发量大大增加，缓存能力也可以轻易扩展，并发量增长意味着更多请求穿透到数据库，单机的数据库最终成为瓶颈。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">静态文件大幅度访问影响</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">5</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第四次演进：<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">数据库读写分离</strong></strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="468" data-ratio="0.8092485549132948" data-s="300,640" data-type="png" data-w="692" style="width: 578px;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHau3QIfK4kmqlgRopibQXM1qNykpv18VCDCFPmLPIsX5crUZqtDpHfXxQ/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">把数据库划分为读库和写库，读库可以有多个，通过同步机制把写库的数据同步到读库，使用数据库中间件（Mycat），通过它来组织数据库的分离读写。php用mysqlnd或者在代码里来个读写分离，读写分离如何做呢，就是在执行sql前，匹配是delete,insert,update,replace操作就读主库，select等就读从库</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：业务逐渐变多，不同业务之间的访问量差距较大，不同业务直接竞争数据库，相互影响性能。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">6</p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第五次演进：<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">数据库按业务分库</strong></strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.8184873949579832" data-s="300,640" data-type="png" data-w="595" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHas73sHM4IdOFoY3ZLndp5rcnPicrH2VaVcGNW2AwkgI9qMoG2wZla3Pg/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">把不同的业务数据保存到不同的数据库中，业务之间的资源竞争降低，访问量大的业务可以部署更多的服务器。用户中心一般是首先需要独立出来的，对应的应用也可以独立部署</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：用户数量增长，单机的写库会逐渐达到性能瓶颈。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">7<br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第六次演进：<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">把数据库的大表拆成小表</strong></strong></strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.987012987012987" data-s="300,640" data-type="png" data-w="693" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHamIAXKicGnjI0JlXkw6RJ5fStJZ1M9wqRicWTMJI0p66R6iads78LL2C0Q/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">比如针对订单生成，可以按照月份，甚至小时创建表。到底是1000万还是2000万数据分表的时候，这个需要看你这张表字段多少，和每个字段存储的量和你机器的配置，一般存一两千万没什么问题，跑得呼呼的;分表分库方法分几种，可以参考《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA3OTc0MzY1Mg==&amp;mid=2247483834&amp;idx=1&amp;sn=29c5858b42c3607c9de6d5cd63f47308&amp;chksm=9faf9e71a8d8176734f20e3ee7ba997ef9e0bf3f0158809ceed3e5599a4e8ceaf9f1c5aba301&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2">不用找了，大厂在用的分库分表方案，都在这了！</a>》</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">这种做法可以称作分布式数据库，但逻辑上仍然是一个完整的数据库整体，现在有一种架构叫MPP（大规模并行处理），针对于各种这类问题的使用场景。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">分表分库倒是分好了，你查询写入和数据合并的时候麻烦了，常用的分表分库中间件有如下几种，各有优缺点，一般大厂都是自己根据业务场景独立开发的，<br  /></span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-type="jpeg" data-ratio="0.5840579710144927" data-w="690" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHabnN4HgKIsrVeo9iaE7hpiaGG6j5nfShcDibGHvyfuak77c0pCcRJa5ymA/640?wx_fmt=jpeg"  /></span></section><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif;font-size: 16px;color: rgb(77, 77, 77);line-height: 26px;overflow-x: auto;overflow-wrap: break-word;text-align: start;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;outline: 0px;font-weight: 700;overflow-wrap: break-word;">百度用的Heisenberg,</span><em style="box-sizing: border-box;outline: 0px;overflow-wrap: break-word;">https://github.com/brucexx/heisenberg（开源版已停止维护）</em></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">支撑天猫淘宝支付宝那么大流量也是人肉手工分表分库吗？没有，阿里大多数场景用了他们自己的oceanbase数据库，oceanbase数据库也是有一层自己的OBproxy代理的，只是没有这层代理oceanbase也能跑得不错的；可以发现要深入的做架构，需要对相关组件能根据业务做相应的改造，这个时候linux系统，c语言，数据结构就变得非常重要了,而人的精力有限，样样都精不可能，这个时候你就需要团队协作了，深入研究一个点儿，其他地方也会发现差不多。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：数据库和tomcat都可以大规模水平扩展，最终单机的nginx会成为瓶颈。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">8<br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第七次演进：<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">使用LVS让多个Nginx负载均衡</strong></strong></strong></strong></span></strong></span></strong></span></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">LVS是软件，运行在操作系统内核态，可以对TCP请求或高层网络协议进行转发，分发的性能远高于Nginx，大概十几万。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">F5是硬件，跟LVS做的事情类似，但性能更高，而且价格昂贵。</span></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.7247191011235955" data-s="300,640" data-type="png" data-w="534" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHaxtwzhLoClnibo7nFUdrjpPgV7LWdsreoC0w488Ru9UrtYYtiaYhhS4dg/640?wx_fmt=png"  /><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">这种方式，用户可达千万或上亿级别。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：LVS达到瓶颈，或用户分布在不同的地区，与服务器机房的距离不同，导致访问延迟的不同。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">9<br  /><br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第八次演进：智能<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">DNS轮询实现机房间的负载均衡</strong></strong></strong></strong></strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages" data-ratio="0.6344086021505376" data-s="300,640" data-type="png" data-w="651" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHaZGic3AM1KibicJOptibs7RZqwe53WE5iaTMMNib4j4PRDSz5Srs3TGV23QrQ/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">别说,DNSPOD还挺好用的，不同机房ip智能解析，响应速度也不错，当然还有收费版的，功能更多（这不是腾讯的广告<img data-ratio="1" data-w="20" style="display: inline-block;width: 20px;vertical-align: text-bottom;height: auto !important;" src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/emoji_ios/u1F602.png"  /><img data-ratio="1" data-w="20" style="display: inline-block;width: 20px;vertical-align: text-bottom;height: auto !important;" src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/emoji_ios/u1F602.png"  /><img data-ratio="1" data-w="20" style="display: inline-block;width: 20px;vertical-align: text-bottom;height: auto !important;" src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/emoji_ios/u1F602.png"  />）<br  /></span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">在DNS中配置一个域名对应多个IP。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">每个IP地址对应到不同的机房里的虚拟IP。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">做到机房级别的水平扩展，已经是从请求并发量来讲，过亿的处理方案，十几亿或几十亿的并发，暂时没人考虑。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：检索，分析的需求越来越多，单靠数据库无法解决各种各样的需求。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">10<br  /><br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第九次演进：<strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">引入NoSQL数据库和搜索引擎</strong><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong></strong></strong></strong></strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.844845908607864" data-s="300,640" data-type="png" data-w="941" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHaR5RlX4XS0IT4bZ7rM1o4dich2ewKe1PdZfpRqKbicfGicdc5SWmYa1ibkg/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">数据量多到一定规模的时候，关系型数据库不再适用，而且数据量较大的查询，MySQL不一定能运行出结果，对于海量数据的处理，通过分布式文件系统HDFS来存储，对于key-value类型的数据，通过HBase、Redis等处理，对于抓取查询，可以通过ES等解决，对于多维分析，通过kylin、Druid等解决。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">阿里云上有各种时序数据库，图数据库，表格数据库，还有HybridDB for MySQL，支持OLTP和OLAP,tidb也干这活儿，是个不错的选择，也是近年以来发展不错的数据库厂商，有大厂给你当靠山，亿级流量就变得比以前更容易了</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">引入更多的组件同时必然极大的提高系统复杂度，不同的组件的数据还需要同步，需要考虑一致性问题。</span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">11<br  /><br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第十次演进：<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">数据两地三中心</strong></span></strong></span></strong></span></strong></section><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">一般来说目前比较流行的灾备体系是至少建设三个数据中心，其中：</span></p><ul class="list-paddingleft-2" style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: left;white-space: normal;word-spacing: 2px;overflow-wrap: break-word !important;"><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">主中心：正常情况下全面提供业务服务。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">同城中心：一般使用同步复制的方式来向同城灾备中心传输数据，保证同城中心数据复本为最新，随时可以接管业务，以保证RTO的指标。但是同城中心无法应对此类删库事件。</span></p></li><li style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">异地中心：一般使用延时异步复制（延时时间一般为30分钟左右）的方式向异地灾备中心传输数据，其中同步复制的好处是一旦主中心被人工破坏，那么不会立刻涉及异地中心以保证RPO的指标。</span></p></li></ul><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;text-align: center;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages" data-backh="210" data-backw="562" data-ratio="0.3729903536977492" data-s="300,640" data-type="png" data-w="622" style="box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;width: 661px !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhmKk7XyD7bgVsypXPxu5MYEq5gOMwL1CRicT5FcicXbLwcicszictBjHGVkZ6Ox2jHDwmwAWPC2n1JFA/640?wx_fmt=png"  /></p><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">一句话总结灾备体系的最佳实践就是两地三中心；同城保证业务连续性，优先负责用户体验；异地保证数据连续性，确保企业生存底线。而针对行为及日志等重要性等级不高的数据，一般采用异地磁带备份的方式。具体方式如下：</span></p><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;text-align: center;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="rich_pages" data-cropselx1="0" data-cropselx2="562" data-cropsely1="0" data-cropsely2="272" data-ratio="0.47024504084014" data-s="300,640" data-type="png" data-w="857" style="box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;width: 578px !important;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhmKk7XyD7bgVsypXPxu5MY0oJ5dYNKsAPW6SyLDFDwESvweC0bttqBY8ecJanpjibibymbbteqR8SQ/640?wx_fmt=png"  /></p><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;word-spacing: 2px;background-color: rgb(255, 255, 255);color: rgb(89, 89, 89);font-size: 16px;letter-spacing: 2px;box-sizing: border-box !important;overflow-wrap: break-word !important;">解决方案有商用的也有开源的，商用的华为</span><span style="max-width: 100%;letter-spacing: 0.544px;text-align: left;word-spacing: 2px;background-color: rgb(255, 255, 255);color: rgb(0, 153, 204);font-family: &quot;Microsoft Yahei&quot;, Helvetica;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SAN 3DC方案</span><span style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;word-spacing: 2px;background-color: rgb(255, 255, 255);font-size: 16px;letter-spacing: 2px;color: rgb(89, 89, 89);box-sizing: border-box !important;overflow-wrap: break-word !important;">的不错，mysql开源的可以尝试一下阿里的canal：跨地域</span><span style="font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: left;word-spacing: 2px;background-color: rgb(255, 255, 255);">&nbsp;</span><span style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;word-spacing: 2px;background-color: rgb(255, 255, 255);font-size: 16px;letter-spacing: 2px;color: rgb(89, 89, 89);box-sizing: border-box !important;overflow-wrap: break-word !important;">MySQL binlog 增量订阅&amp;消费组件</span></span></p><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: left;white-space: normal;word-spacing: 2px;letter-spacing: 1px;caret-color: rgb(51, 51, 51);text-size-adjust: auto;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">不过从目前情况看不少企业尤其是创业型企业，都没有百年老店的观念，因此在异地中心的建设上投入还不够，不过这样的模式缺点也很明显，一旦发生这种删库事件就影响就是致命的。</span></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">12<br  /><br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; &nbsp; 第十一次演进：<strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">大应用拆为小应用</strong></span></strong></span></strong></span></strong></section><p style="text-align: center;"><br  /></p><p style="text-align: center;"><img class="rich_pages" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="342" data-ratio="0.589798087141339" data-s="300,640" data-type="png" data-w="941" style="width: 578px;height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHaEUQPrFayIzeg2HqJ4TazfeYKlmcOueCnf39wJYq3iaQDt1icS8oR7hUg/640?wx_fmt=png"  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></strong><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">按照业务板块来划分应用，使单个应用的职责更清晰，相互之间可以做到独立升级迭代，甚至可以做到部分功能关闭。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">瓶颈：不同应用之间，存在公用的模块，导致包含公共功能的部分在升级时，全部相关代码都要跟着升级。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></strong></span></strong></span></strong></span></strong></section><section data-mpa-template="t" mpa-from-tpl="t" style="white-space: normal;max-width: 100%;caret-color: rgb(51, 51, 51);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-size-adjust: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-id="92424" mpa-from-tpl="t" style="max-width: 100%;font-size: 16px;letter-spacing: 0.544px;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-color="#1e9be8" data-custom="#1e9be8" mpa-from-tpl="t" style="max-width: 100%;border-width: 0px;border-style: none;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="margin: 35px 8px 20px;max-width: 100%;width: 676.997px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="margin-top: -19px;margin-left: 17px;max-width: 100%;transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section mpa-from-tpl="t" style="max-width: 100%;border-width: 2px;border-style: solid;border-color: rgb(51, 51, 51);width: 35px;height: 35px;line-height: 35px;font-size: 20px;background-color: rgb(254, 254, 254);transform: translateZ(10px);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p data-brushtype="text" data-original-title="" title="" aria-describedby="tooltip494416" style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">13<br  /><br  /><br  /><br  /></p></section><section mpa-from-tpl="t" style="margin-top: -25px;margin-left: 10px;max-width: 100%;width: 30px;height: 30px;background-color: rgb(30, 155, 232);color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></section></section></section></section></section></section></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp;</span></strong></span></strong></span></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="font-size: 17px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; 第十一次演进：微服务、service mesh</span></strong></span></strong></span></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></section><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">“微服务架构是一种架构模式，它提倡将单一应用程序划分成一组小的服务，服务之间相互协调、互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务和服务之间采用轻量级的通信机制相互沟通（通常是基于HTTP的Restful API).每个服务都围绕着具体的业务进行构建，并且能够被独立的部署到生产环境、类生产环境等。（知乎华为云技术宅基地）</span></p><p><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;">微服务架构：<br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.8986975397973951" data-type="jpeg" data-w="691" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHaEqbFCffoDzxRwpeZRPBlkBzUVicibfaEWmzFj5Y1I6EiboM7SBtPrYhEA/640?wx_fmt=jpeg"  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6166666666666667" data-type="jpeg" data-w="720" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_jpg/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHayz4iahaC5U4Awf6hJO6R1z02m7URibWhiaG9GfaPGWePtKA8CPaVicLtqg/640?wx_fmt=jpeg"  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">类似于我们现在写的SpringCloud的项目结构，尤其是当用户，支付等功能在多个应用中都存在，抽离出来效率更高；不要以为把服务独立出来，独立部署，能注册发现就是微服务了，服务治理，限流降级，权限管理，链路追踪也是微服务体系里比较重要的环节</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">现在想实现这种效果，可以用现成的框架，spring cloud ，dubbo都是不错的选择，微服务要再升级就上docker,管理docker又需要k8s</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">另外一种趋势就是Service Mesh，Service Mesh架构图：</span></strong></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img data-ratio="0.6369137670196672" data-type="png" data-w="661" style="height: auto !important;" src="https://mmbiz.qpic.cn/mmbiz_png/DMP9YVibia1dTp7naQnZhMGlqXUZV61VHajN1c3ku9wlfca7XAaszFLfYTibYJ0gchXGvrRib7fAOZkyI8eZgZOHKg/640?wx_fmt=png"  /></span></section><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">目前流行的 Service Mesh 开源软件有 Linkerd、Envoy 和 Istio，而 Buoyant（开源 Linkerd 的公司）又发布了基于 Kubernetes 的 Service Mesh 开源项目 Conduit。</span></p><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Service Mesh 开源项目简介：</span></p><ul style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;" class="list-paddingleft-2"><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Linkerd</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/linkerd/linkerd）：第一代 Service Mesh，2016 年 1 月 15 日首发布，业界第一个 Service Mesh 项目，由 Buoyant 创业小公司开发（前 Twitter 工程师），2017 年 7 月 11 日，宣布和 Istio 集成，成为 Istio 的数据面板。</span></p></li><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Envoy</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/envoyproxy/envoy）：第一代 Service Mesh，2016 年 9 月 13 日首发布，由 Matt Klein 个人开发（Lyft 工程师），之后默默发展，版本较稳定。</span></p></li><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Istio</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/istio/istio）：第二代 Service Mesh，2017 年 5 月 24 日首发布，由 Google、IBM 和 Lyft 联合开发，只支持 Kubernetes 平台，2017 年 11 月 30 日发布 0.3 版本，开始支持非 Kubernetes 平台，之后稳定的开发和发布。</span></p></li><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Conduit</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/runconduit/conduit）：第二代 Service Mesh，2017 年 12 月 5 日首发布，由 Buoyant 公司开发（借鉴 Istio 整体架构，部分进行了优化），对抗 Istio 压力山大，也期待 Buoyant 公司的毅力。</span></p></li><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">nginMesh</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/nginmesh/nginmesh）：2017 年 9 月首发布，由 Nginx 开发，定位是作为 Istio 的服务代理，也就是替代 Envoy，思路跟 Linkerd 之前和 Istio 集成很相似，极度低调，GitHub 上的 star 也只有不到 100。</span></p></li><li style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Kong</span></strong><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">（https://github.com/Kong/kong）：比 nginMesh 更加低调，默默发展中。</span></p></li></ul><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  />关于公众号“</span><span style="max-width: 100%;font-size: 15px;color: rgb(61, 170, 214);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong>肉眼品世界</strong></span><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">”回复“</span><span style="max-width: 100%;font-size: 15px;color: rgb(61, 170, 214);box-sizing: border-box !important;overflow-wrap: break-word !important;">s<strong>ervicemesh</strong></span><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">”，可以下载一份精基于k8s，Istio实践service mesh 的58页精美ppt</span><br  /></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">再往下演进，ESB服务总线做接口管理，容器化技术实现运行环境隔离，云平台承载大型系统</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">云平台中的几个概念：</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">IaaS：基础设施即服务，可申请硬件资源的层面。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">PaaS：平台即服务，提供云平台常用的技术组件的开发和维护。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SaaS：软件即服务，开发好一个应用，部署之后，按照功能或要求付费。</span></section><section style="white-space: normal;max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;background-color: rgb(255, 255, 255);font-size: 20px;text-align: center;overflow-wrap: break-word !important;"><span style="margin-top: 38px;margin-bottom: 10px;max-width: 100%;height: 59px;line-height: 85px;color: rgb(60, 112, 198);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/ZBjVrHIdkOmV4NEN9KK542ZUnPbFvYaOkLe0mFTiceEtXGN5IjICocMe09DmBzpIdOQkbZZ7r3FibZ7DEGLXm7mw/640?wx_fmt=png&quot;);background-position: 50% 50%;background-repeat: no-repeat;background-attachment: initial;background-origin: initial;background-clip: initial;border-bottom: 2px solid rgb(27, 95, 160);background-size: 57px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;">思考总结</span></section><p style="white-space: normal;max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">一、高并发架构的实质</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">通过充分使用内存的方式可以获取数据交换的速度，更多的饱和使用cpu</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">在网络编程上充分使用异步通知的方法充分利用基于linux socket io(你会发觉好多地方都这么干的)</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;">通过高效的算法和数据结构提供软件层的基础数据库和分布式管理</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;">单机达到cpu饱和运转极限，然后就是以一定策略加机器,omg,多少并发都能抗住,当然现在还有云..</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">二、架构调整是否必须按照上面的路线演变？</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">不一定！！！上面讲的是电商方向，已有的演化线路。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">三、对于即将实施的系统，架构要设计到什么程度？</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">够用就行，问清楚什么叫够用，设计要满足下一阶段用户量和性能指标的要求。</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">四、我想做架构师有什么要求？</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">主要是决策权衡力，技术只是思维的外在体现形式；不一定样样都会，但要有很强的学习能力，基础知识扎实很重要；还要能经得起喷，快速学习改进的心态；会用相关组件做架构是架构，了解每个组件和操作系统的一些基础知识很重要，大多数方法论都是建立在这基础上的，小编也是好多不懂在不断学习的</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">五、都云了，做技术还有前途吗？</span></section><p><br  /></p><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;white-space: normal;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">方案都大同小异，大家都知道了，做技术还有前途吗？当然有，随着国家的发展科技创新占越来越重的比例，虽然有成熟框架和云，但是基于巨人肩膀上的创新是会层出不穷的，也会在细节点上不断深入的；就像微服务体系一样，看上去是技术，其实也是产品，这个产品解决人多了，业务多了开发难度的问题，通过注册中心、容器、服务治理、网关、限流形成一个技术产品体系，解决一些开发部署的问题，从本质上看是有这个产品思维体系才诞生了这些技术组件，所以技术更高维度的思考是需要考虑用什么样的产品解决什么样的问题，然后用自己所掌握的技术来实现，就插上了一双新的翅膀</span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span></section><section style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;white-space: normal;background-color: rgb(255, 255, 255);letter-spacing: 1px;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;">码字不易，打字太快有不完善的地方欢迎留言讨论，觉得不错点赞和转发。</span></section><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 15px;">参考资料：</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 12px;">【NIO基础篇】&nbsp; 匠心零度 https://www.cnblogs.com/jiangxinlingdu/p/8116265.html</span></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;text-align: start;white-space: pre-line;font-size: 12px;">【什么是微服务架构】java团长 华为云技术宅基地&nbsp; </span><span style="font-size: 12px;">https://www.zhihu.com/question/6550</span><span style="font-size: 12px;">2</span><span style="font-size: 12px;">802</span><br  /></p><p style="margin-top: 15px;margin-bottom: 15px;max-width: 100%;min-height: 1em;font-size: 16px;text-align: start;white-space: pre-line;line-height: 30px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="font-size: 12px;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 12px;text-align: start;white-space: pre-line;"></span><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 12px;text-align: start;white-space: pre-line;">【1 分钟抗住 10 亿请求</span><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 12px;text-align: start;white-space: pre-line;">】CSDN&nbsp;</span></span><span style="font-size: 12px;">阿凡博客</span><span style="font-size: 12px;"><span style="color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 12px;text-align: start;white-space: pre-line;">&nbsp;</span>https://blog.csdn.net/qq_43107323/article/details/104919132</span></p><section class="mp_profile_iframe_wrp"><mpprofile class="js_uneditable custom_select_card mp_profile_iframe" data-id="MzA3NjIzNjMwOA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/hXibVSNciaXhzia07WkYkDfaRxHUiaDaNc5x3xTNO1RlNBRhPnxpEzoemhsn7ofat4pVwVgOktaveEtu6IKzzLONQQ/0?wx_fmt=png" data-nickname="数据治理体系" data-alias="DGsystem" data-signature="持续完善数据治理实战体系，数仓体系，数字体系，实现业务数字化，数字资产化，资产业务化，资产资本化；回归业务场景的数字化案例才最具参考价值，最容易理解和借鉴的。" data-from="0" data-pluginname="mpprofile"></mpprofile></section></section></content>
</div>
</body>
</html>